(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const i of s)if(i.type==="childList")for(const a of i.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(s){const i={};return s.integrity&&(i.integrity=s.integrity),s.referrerPolicy&&(i.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?i.credentials="include":s.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function r(s){if(s.ep)return;s.ep=!0;const i=n(s);fetch(s.href,i)}})();/**
* @vue/shared v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**//*! #__NO_SIDE_EFFECTS__ */function xa(e){const t=Object.create(null);for(const n of e.split(","))t[n]=1;return n=>n in t}const St={},or=[],$e=()=>{},Jp=()=>!1,ki=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&(e.charCodeAt(2)>122||e.charCodeAt(2)<97),Na=e=>e.startsWith("onUpdate:"),le=Object.assign,Oa=(e,t)=>{const n=e.indexOf(t);n>-1&&e.splice(n,1)},Zp=Object.prototype.hasOwnProperty,At=(e,t)=>Zp.call(e,t),at=Array.isArray,ar=e=>Li(e)==="[object Map]",Sh=e=>Li(e)==="[object Set]",ut=e=>typeof e=="function",Bt=e=>typeof e=="string",Cn=e=>typeof e=="symbol",Pt=e=>e!==null&&typeof e=="object",Ch=e=>(Pt(e)||ut(e))&&ut(e.then)&&ut(e.catch),Ph=Object.prototype.toString,Li=e=>Ph.call(e),tg=e=>Li(e).slice(8,-1),Vh=e=>Li(e)==="[object Object]",Ma=e=>Bt(e)&&e!=="NaN"&&e[0]!=="-"&&""+parseInt(e,10)===e,Jr=xa(",key,ref,ref_for,ref_key,onVnodeBeforeMount,onVnodeMounted,onVnodeBeforeUpdate,onVnodeUpdated,onVnodeBeforeUnmount,onVnodeUnmounted"),Fi=e=>{const t=Object.create(null);return n=>t[n]||(t[n]=e(n))},eg=/-(\w)/g,be=Fi(e=>e.replace(eg,(t,n)=>n?n.toUpperCase():"")),ng=/\B([A-Z])/g,Kn=Fi(e=>e.replace(ng,"-$1").toLowerCase()),Ui=Fi(e=>e.charAt(0).toUpperCase()+e.slice(1)),Ao=Fi(e=>e?`on${Ui(e)}`:""),_n=(e,t)=>!Object.is(e,t),Ro=(e,...t)=>{for(let n=0;n<e.length;n++)e[n](...t)},Dh=(e,t,n,r=!1)=>{Object.defineProperty(e,t,{configurable:!0,enumerable:!1,writable:r,value:n})},rg=e=>{const t=parseFloat(e);return isNaN(t)?e:t};let Au;const Bi=()=>Au||(Au=typeof globalThis<"u"?globalThis:typeof self<"u"?self:typeof window<"u"?window:typeof global<"u"?global:{});function ka(e){if(at(e)){const t={};for(let n=0;n<e.length;n++){const r=e[n],s=Bt(r)?ag(r):ka(r);if(s)for(const i in s)t[i]=s[i]}return t}else if(Bt(e)||Pt(e))return e}const sg=/;(?![^(]*\))/g,ig=/:([^]+)/,og=/\/\*[^]*?\*\//g;function ag(e){const t={};return e.replace(og,"").split(sg).forEach(n=>{if(n){const r=n.split(ig);r.length>1&&(t[r[0].trim()]=r[1].trim())}}),t}function La(e){let t="";if(Bt(e))t=e;else if(at(e))for(let n=0;n<e.length;n++){const r=La(e[n]);r&&(t+=r+" ")}else if(Pt(e))for(const n in e)e[n]&&(t+=n+" ");return t.trim()}const lg="itemscope,allowfullscreen,formnovalidate,ismap,nomodule,novalidate,readonly",ug=xa(lg);function xh(e){return!!e||e===""}const Nh=e=>!!(e&&e.__v_isRef===!0),Un=e=>Bt(e)?e:e==null?"":at(e)||Pt(e)&&(e.toString===Ph||!ut(e.toString))?Nh(e)?Un(e.value):JSON.stringify(e,Oh,2):String(e),Oh=(e,t)=>Nh(t)?Oh(e,t.value):ar(t)?{[`Map(${t.size})`]:[...t.entries()].reduce((n,[r,s],i)=>(n[bo(r,i)+" =>"]=s,n),{})}:Sh(t)?{[`Set(${t.size})`]:[...t.values()].map(n=>bo(n))}:Cn(t)?bo(t):Pt(t)&&!at(t)&&!Vh(t)?String(t):t,bo=(e,t="")=>{var n;return Cn(e)?`Symbol(${(n=e.description)!=null?n:t})`:e};/**
* @vue/reactivity v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let ve;class Mh{constructor(t=!1){this.detached=t,this._active=!0,this.effects=[],this.cleanups=[],this._isPaused=!1,this.parent=ve,!t&&ve&&(this.index=(ve.scopes||(ve.scopes=[])).push(this)-1)}get active(){return this._active}pause(){if(this._active){this._isPaused=!0;let t,n;if(this.scopes)for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].pause();for(t=0,n=this.effects.length;t<n;t++)this.effects[t].pause()}}resume(){if(this._active&&this._isPaused){this._isPaused=!1;let t,n;if(this.scopes)for(t=0,n=this.scopes.length;t<n;t++)this.scopes[t].resume();for(t=0,n=this.effects.length;t<n;t++)this.effects[t].resume()}}run(t){if(this._active){const n=ve;try{return ve=this,t()}finally{ve=n}}}on(){ve=this}off(){ve=this.parent}stop(t){if(this._active){this._active=!1;let n,r;for(n=0,r=this.effects.length;n<r;n++)this.effects[n].stop();for(this.effects.length=0,n=0,r=this.cleanups.length;n<r;n++)this.cleanups[n]();if(this.cleanups.length=0,this.scopes){for(n=0,r=this.scopes.length;n<r;n++)this.scopes[n].stop(!0);this.scopes.length=0}if(!this.detached&&this.parent&&!t){const s=this.parent.scopes.pop();s&&s!==this&&(this.parent.scopes[this.index]=s,s.index=this.index)}this.parent=void 0}}}function cg(e){return new Mh(e)}function hg(){return ve}let bt;const So=new WeakSet;class kh{constructor(t){this.fn=t,this.deps=void 0,this.depsTail=void 0,this.flags=5,this.next=void 0,this.cleanup=void 0,this.scheduler=void 0,ve&&ve.active&&ve.effects.push(this)}pause(){this.flags|=64}resume(){this.flags&64&&(this.flags&=-65,So.has(this)&&(So.delete(this),this.trigger()))}notify(){this.flags&2&&!(this.flags&32)||this.flags&8||Fh(this)}run(){if(!(this.flags&1))return this.fn();this.flags|=2,Ru(this),Uh(this);const t=bt,n=xe;bt=this,xe=!0;try{return this.fn()}finally{Bh(this),bt=t,xe=n,this.flags&=-3}}stop(){if(this.flags&1){for(let t=this.deps;t;t=t.nextDep)Ba(t);this.deps=this.depsTail=void 0,Ru(this),this.onStop&&this.onStop(),this.flags&=-2}}trigger(){this.flags&64?So.add(this):this.scheduler?this.scheduler():this.runIfDirty()}runIfDirty(){Go(this)&&this.run()}get dirty(){return Go(this)}}let Lh=0,Zr,ts;function Fh(e,t=!1){if(e.flags|=8,t){e.next=ts,ts=e;return}e.next=Zr,Zr=e}function Fa(){Lh++}function Ua(){if(--Lh>0)return;if(ts){let t=ts;for(ts=void 0;t;){const n=t.next;t.next=void 0,t.flags&=-9,t=n}}let e;for(;Zr;){let t=Zr;for(Zr=void 0;t;){const n=t.next;if(t.next=void 0,t.flags&=-9,t.flags&1)try{t.trigger()}catch(r){e||(e=r)}t=n}}if(e)throw e}function Uh(e){for(let t=e.deps;t;t=t.nextDep)t.version=-1,t.prevActiveLink=t.dep.activeLink,t.dep.activeLink=t}function Bh(e){let t,n=e.depsTail,r=n;for(;r;){const s=r.prevDep;r.version===-1?(r===n&&(n=s),Ba(r),fg(r)):t=r,r.dep.activeLink=r.prevActiveLink,r.prevActiveLink=void 0,r=s}e.deps=t,e.depsTail=n}function Go(e){for(let t=e.deps;t;t=t.nextDep)if(t.dep.version!==t.version||t.dep.computed&&($h(t.dep.computed)||t.dep.version!==t.version))return!0;return!!e._dirty}function $h(e){if(e.flags&4&&!(e.flags&16)||(e.flags&=-17,e.globalVersion===fs))return;e.globalVersion=fs;const t=e.dep;if(e.flags|=2,t.version>0&&!e.isSSR&&e.deps&&!Go(e)){e.flags&=-3;return}const n=bt,r=xe;bt=e,xe=!0;try{Uh(e);const s=e.fn(e._value);(t.version===0||_n(s,e._value))&&(e._value=s,t.version++)}catch(s){throw t.version++,s}finally{bt=n,xe=r,Bh(e),e.flags&=-3}}function Ba(e,t=!1){const{dep:n,prevSub:r,nextSub:s}=e;if(r&&(r.nextSub=s,e.prevSub=void 0),s&&(s.prevSub=r,e.nextSub=void 0),n.subs===e&&(n.subs=r,!r&&n.computed)){n.computed.flags&=-5;for(let i=n.computed.deps;i;i=i.nextDep)Ba(i,!0)}!t&&!--n.sc&&n.map&&n.map.delete(n.key)}function fg(e){const{prevDep:t,nextDep:n}=e;t&&(t.nextDep=n,e.prevDep=void 0),n&&(n.prevDep=t,e.nextDep=void 0)}let xe=!0;const jh=[];function Pn(){jh.push(xe),xe=!1}function Vn(){const e=jh.pop();xe=e===void 0?!0:e}function Ru(e){const{cleanup:t}=e;if(e.cleanup=void 0,t){const n=bt;bt=void 0;try{t()}finally{bt=n}}}let fs=0;class dg{constructor(t,n){this.sub=t,this.dep=n,this.version=n.version,this.nextDep=this.prevDep=this.nextSub=this.prevSub=this.prevActiveLink=void 0}}class $a{constructor(t){this.computed=t,this.version=0,this.activeLink=void 0,this.subs=void 0,this.map=void 0,this.key=void 0,this.sc=0}track(t){if(!bt||!xe||bt===this.computed)return;let n=this.activeLink;if(n===void 0||n.sub!==bt)n=this.activeLink=new dg(bt,this),bt.deps?(n.prevDep=bt.depsTail,bt.depsTail.nextDep=n,bt.depsTail=n):bt.deps=bt.depsTail=n,qh(n);else if(n.version===-1&&(n.version=this.version,n.nextDep)){const r=n.nextDep;r.prevDep=n.prevDep,n.prevDep&&(n.prevDep.nextDep=r),n.prevDep=bt.depsTail,n.nextDep=void 0,bt.depsTail.nextDep=n,bt.depsTail=n,bt.deps===n&&(bt.deps=r)}return n}trigger(t){this.version++,fs++,this.notify(t)}notify(t){Fa();try{for(let n=this.subs;n;n=n.prevSub)n.sub.notify()&&n.sub.dep.notify()}finally{Ua()}}}function qh(e){if(e.dep.sc++,e.sub.flags&4){const t=e.dep.computed;if(t&&!e.dep.subs){t.flags|=20;for(let r=t.deps;r;r=r.nextDep)qh(r)}const n=e.dep.subs;n!==e&&(e.prevSub=n,n&&(n.nextSub=e)),e.dep.subs=e}}const Wo=new WeakMap,$n=Symbol(""),Qo=Symbol(""),ds=Symbol("");function ne(e,t,n){if(xe&&bt){let r=Wo.get(e);r||Wo.set(e,r=new Map);let s=r.get(n);s||(r.set(n,s=new $a),s.map=r,s.key=n),s.track()}}function Je(e,t,n,r,s,i){const a=Wo.get(e);if(!a){fs++;return}const l=c=>{c&&c.trigger()};if(Fa(),t==="clear")a.forEach(l);else{const c=at(e),f=c&&Ma(n);if(c&&n==="length"){const d=Number(r);a.forEach((p,m)=>{(m==="length"||m===ds||!Cn(m)&&m>=d)&&l(p)})}else switch((n!==void 0||a.has(void 0))&&l(a.get(n)),f&&l(a.get(ds)),t){case"add":c?f&&l(a.get("length")):(l(a.get($n)),ar(e)&&l(a.get(Qo)));break;case"delete":c||(l(a.get($n)),ar(e)&&l(a.get(Qo)));break;case"set":ar(e)&&l(a.get($n));break}}Ua()}function Zn(e){const t=It(e);return t===e?t:(ne(t,"iterate",ds),Re(e)?t:t.map(re))}function $i(e){return ne(e=It(e),"iterate",ds),e}const pg={__proto__:null,[Symbol.iterator](){return Co(this,Symbol.iterator,re)},concat(...e){return Zn(this).concat(...e.map(t=>at(t)?Zn(t):t))},entries(){return Co(this,"entries",e=>(e[1]=re(e[1]),e))},every(e,t){return Qe(this,"every",e,t,void 0,arguments)},filter(e,t){return Qe(this,"filter",e,t,n=>n.map(re),arguments)},find(e,t){return Qe(this,"find",e,t,re,arguments)},findIndex(e,t){return Qe(this,"findIndex",e,t,void 0,arguments)},findLast(e,t){return Qe(this,"findLast",e,t,re,arguments)},findLastIndex(e,t){return Qe(this,"findLastIndex",e,t,void 0,arguments)},forEach(e,t){return Qe(this,"forEach",e,t,void 0,arguments)},includes(...e){return Po(this,"includes",e)},indexOf(...e){return Po(this,"indexOf",e)},join(e){return Zn(this).join(e)},lastIndexOf(...e){return Po(this,"lastIndexOf",e)},map(e,t){return Qe(this,"map",e,t,void 0,arguments)},pop(){return zr(this,"pop")},push(...e){return zr(this,"push",e)},reduce(e,...t){return bu(this,"reduce",e,t)},reduceRight(e,...t){return bu(this,"reduceRight",e,t)},shift(){return zr(this,"shift")},some(e,t){return Qe(this,"some",e,t,void 0,arguments)},splice(...e){return zr(this,"splice",e)},toReversed(){return Zn(this).toReversed()},toSorted(e){return Zn(this).toSorted(e)},toSpliced(...e){return Zn(this).toSpliced(...e)},unshift(...e){return zr(this,"unshift",e)},values(){return Co(this,"values",re)}};function Co(e,t,n){const r=$i(e),s=r[t]();return r!==e&&!Re(e)&&(s._next=s.next,s.next=()=>{const i=s._next();return i.value&&(i.value=n(i.value)),i}),s}const gg=Array.prototype;function Qe(e,t,n,r,s,i){const a=$i(e),l=a!==e&&!Re(e),c=a[t];if(c!==gg[t]){const p=c.apply(e,i);return l?re(p):p}let f=n;a!==e&&(l?f=function(p,m){return n.call(this,re(p),m,e)}:n.length>2&&(f=function(p,m){return n.call(this,p,m,e)}));const d=c.call(a,f,r);return l&&s?s(d):d}function bu(e,t,n,r){const s=$i(e);let i=n;return s!==e&&(Re(e)?n.length>3&&(i=function(a,l,c){return n.call(this,a,l,c,e)}):i=function(a,l,c){return n.call(this,a,re(l),c,e)}),s[t](i,...r)}function Po(e,t,n){const r=It(e);ne(r,"iterate",ds);const s=r[t](...n);return(s===-1||s===!1)&&Ha(n[0])?(n[0]=It(n[0]),r[t](...n)):s}function zr(e,t,n=[]){Pn(),Fa();const r=It(e)[t].apply(e,n);return Ua(),Vn(),r}const mg=xa("__proto__,__v_isRef,__isVue"),Hh=new Set(Object.getOwnPropertyNames(Symbol).filter(e=>e!=="arguments"&&e!=="caller").map(e=>Symbol[e]).filter(Cn));function _g(e){Cn(e)||(e=String(e));const t=It(this);return ne(t,"has",e),t.hasOwnProperty(e)}class zh{constructor(t=!1,n=!1){this._isReadonly=t,this._isShallow=n}get(t,n,r){if(n==="__v_skip")return t.__v_skip;const s=this._isReadonly,i=this._isShallow;if(n==="__v_isReactive")return!s;if(n==="__v_isReadonly")return s;if(n==="__v_isShallow")return i;if(n==="__v_raw")return r===(s?i?Sg:Qh:i?Wh:Gh).get(t)||Object.getPrototypeOf(t)===Object.getPrototypeOf(r)?t:void 0;const a=at(t);if(!s){let c;if(a&&(c=pg[n]))return c;if(n==="hasOwnProperty")return _g}const l=Reflect.get(t,n,ae(t)?t:r);return(Cn(n)?Hh.has(n):mg(n))||(s||ne(t,"get",n),i)?l:ae(l)?a&&Ma(n)?l:l.value:Pt(l)?s?Xh(l):ji(l):l}}class Kh extends zh{constructor(t=!1){super(!1,t)}set(t,n,r,s){let i=t[n];if(!this._isShallow){const c=Hn(i);if(!Re(r)&&!Hn(r)&&(i=It(i),r=It(r)),!at(t)&&ae(i)&&!ae(r))return c?!1:(i.value=r,!0)}const a=at(t)&&Ma(n)?Number(n)<t.length:At(t,n),l=Reflect.set(t,n,r,ae(t)?t:s);return t===It(s)&&(a?_n(r,i)&&Je(t,"set",n,r):Je(t,"add",n,r)),l}deleteProperty(t,n){const r=At(t,n);t[n];const s=Reflect.deleteProperty(t,n);return s&&r&&Je(t,"delete",n,void 0),s}has(t,n){const r=Reflect.has(t,n);return(!Cn(n)||!Hh.has(n))&&ne(t,"has",n),r}ownKeys(t){return ne(t,"iterate",at(t)?"length":$n),Reflect.ownKeys(t)}}class yg extends zh{constructor(t=!1){super(!0,t)}set(t,n){return!0}deleteProperty(t,n){return!0}}const vg=new Kh,Eg=new yg,Tg=new Kh(!0);const Yo=e=>e,Qs=e=>Reflect.getPrototypeOf(e);function wg(e,t,n){return function(...r){const s=this.__v_raw,i=It(s),a=ar(i),l=e==="entries"||e===Symbol.iterator&&a,c=e==="keys"&&a,f=s[e](...r),d=n?Yo:t?Xo:re;return!t&&ne(i,"iterate",c?Qo:$n),{next(){const{value:p,done:m}=f.next();return m?{value:p,done:m}:{value:l?[d(p[0]),d(p[1])]:d(p),done:m}},[Symbol.iterator](){return this}}}}function Ys(e){return function(...t){return e==="delete"?!1:e==="clear"?void 0:this}}function Ig(e,t){const n={get(s){const i=this.__v_raw,a=It(i),l=It(s);e||(_n(s,l)&&ne(a,"get",s),ne(a,"get",l));const{has:c}=Qs(a),f=t?Yo:e?Xo:re;if(c.call(a,s))return f(i.get(s));if(c.call(a,l))return f(i.get(l));i!==a&&i.get(s)},get size(){const s=this.__v_raw;return!e&&ne(It(s),"iterate",$n),Reflect.get(s,"size",s)},has(s){const i=this.__v_raw,a=It(i),l=It(s);return e||(_n(s,l)&&ne(a,"has",s),ne(a,"has",l)),s===l?i.has(s):i.has(s)||i.has(l)},forEach(s,i){const a=this,l=a.__v_raw,c=It(l),f=t?Yo:e?Xo:re;return!e&&ne(c,"iterate",$n),l.forEach((d,p)=>s.call(i,f(d),f(p),a))}};return le(n,e?{add:Ys("add"),set:Ys("set"),delete:Ys("delete"),clear:Ys("clear")}:{add(s){!t&&!Re(s)&&!Hn(s)&&(s=It(s));const i=It(this);return Qs(i).has.call(i,s)||(i.add(s),Je(i,"add",s,s)),this},set(s,i){!t&&!Re(i)&&!Hn(i)&&(i=It(i));const a=It(this),{has:l,get:c}=Qs(a);let f=l.call(a,s);f||(s=It(s),f=l.call(a,s));const d=c.call(a,s);return a.set(s,i),f?_n(i,d)&&Je(a,"set",s,i):Je(a,"add",s,i),this},delete(s){const i=It(this),{has:a,get:l}=Qs(i);let c=a.call(i,s);c||(s=It(s),c=a.call(i,s)),l&&l.call(i,s);const f=i.delete(s);return c&&Je(i,"delete",s,void 0),f},clear(){const s=It(this),i=s.size!==0,a=s.clear();return i&&Je(s,"clear",void 0,void 0),a}}),["keys","values","entries",Symbol.iterator].forEach(s=>{n[s]=wg(s,e,t)}),n}function ja(e,t){const n=Ig(e,t);return(r,s,i)=>s==="__v_isReactive"?!e:s==="__v_isReadonly"?e:s==="__v_raw"?r:Reflect.get(At(n,s)&&s in r?n:r,s,i)}const Ag={get:ja(!1,!1)},Rg={get:ja(!1,!0)},bg={get:ja(!0,!1)};const Gh=new WeakMap,Wh=new WeakMap,Qh=new WeakMap,Sg=new WeakMap;function Cg(e){switch(e){case"Object":case"Array":return 1;case"Map":case"Set":case"WeakMap":case"WeakSet":return 2;default:return 0}}function Pg(e){return e.__v_skip||!Object.isExtensible(e)?0:Cg(tg(e))}function ji(e){return Hn(e)?e:qa(e,!1,vg,Ag,Gh)}function Yh(e){return qa(e,!1,Tg,Rg,Wh)}function Xh(e){return qa(e,!0,Eg,bg,Qh)}function qa(e,t,n,r,s){if(!Pt(e)||e.__v_raw&&!(t&&e.__v_isReactive))return e;const i=s.get(e);if(i)return i;const a=Pg(e);if(a===0)return e;const l=new Proxy(e,a===2?r:n);return s.set(e,l),l}function lr(e){return Hn(e)?lr(e.__v_raw):!!(e&&e.__v_isReactive)}function Hn(e){return!!(e&&e.__v_isReadonly)}function Re(e){return!!(e&&e.__v_isShallow)}function Ha(e){return e?!!e.__v_raw:!1}function It(e){const t=e&&e.__v_raw;return t?It(t):e}function Jh(e){return!At(e,"__v_skip")&&Object.isExtensible(e)&&Dh(e,"__v_skip",!0),e}const re=e=>Pt(e)?ji(e):e,Xo=e=>Pt(e)?Xh(e):e;function ae(e){return e?e.__v_isRef===!0:!1}function qi(e){return Zh(e,!1)}function Vg(e){return Zh(e,!0)}function Zh(e,t){return ae(e)?e:new Dg(e,t)}class Dg{constructor(t,n){this.dep=new $a,this.__v_isRef=!0,this.__v_isShallow=!1,this._rawValue=n?t:It(t),this._value=n?t:re(t),this.__v_isShallow=n}get value(){return this.dep.track(),this._value}set value(t){const n=this._rawValue,r=this.__v_isShallow||Re(t)||Hn(t);t=r?t:It(t),_n(t,n)&&(this._rawValue=t,this._value=r?t:re(t),this.dep.trigger())}}function Ze(e){return ae(e)?e.value:e}const xg={get:(e,t,n)=>t==="__v_raw"?e:Ze(Reflect.get(e,t,n)),set:(e,t,n,r)=>{const s=e[t];return ae(s)&&!ae(n)?(s.value=n,!0):Reflect.set(e,t,n,r)}};function tf(e){return lr(e)?e:new Proxy(e,xg)}class Ng{constructor(t,n,r){this.fn=t,this.setter=n,this._value=void 0,this.dep=new $a(this),this.__v_isRef=!0,this.deps=void 0,this.depsTail=void 0,this.flags=16,this.globalVersion=fs-1,this.next=void 0,this.effect=this,this.__v_isReadonly=!n,this.isSSR=r}notify(){if(this.flags|=16,!(this.flags&8)&&bt!==this)return Fh(this,!0),!0}get value(){const t=this.dep.track();return $h(this),t&&(t.version=this.dep.version),this._value}set value(t){this.setter&&this.setter(t)}}function Og(e,t,n=!1){let r,s;return ut(e)?r=e:(r=e.get,s=e.set),new Ng(r,s,n)}const Xs={},gi=new WeakMap;let Ln;function Mg(e,t=!1,n=Ln){if(n){let r=gi.get(n);r||gi.set(n,r=[]),r.push(e)}}function kg(e,t,n=St){const{immediate:r,deep:s,once:i,scheduler:a,augmentJob:l,call:c}=n,f=z=>s?z:Re(z)||s===!1||s===0?pn(z,1):pn(z);let d,p,m,T,V=!1,N=!1;if(ae(e)?(p=()=>e.value,V=Re(e)):lr(e)?(p=()=>f(e),V=!0):at(e)?(N=!0,V=e.some(z=>lr(z)||Re(z)),p=()=>e.map(z=>{if(ae(z))return z.value;if(lr(z))return f(z);if(ut(z))return c?c(z,2):z()})):ut(e)?t?p=c?()=>c(e,2):e:p=()=>{if(m){Pn();try{m()}finally{Vn()}}const z=Ln;Ln=d;try{return c?c(e,3,[T]):e(T)}finally{Ln=z}}:p=$e,t&&s){const z=p,ht=s===!0?1/0:s;p=()=>pn(z(),ht)}const L=hg(),G=()=>{d.stop(),L&&L.active&&Oa(L.effects,d)};if(i&&t){const z=t;t=(...ht)=>{z(...ht),G()}}let U=N?new Array(e.length).fill(Xs):Xs;const H=z=>{if(!(!(d.flags&1)||!d.dirty&&!z))if(t){const ht=d.run();if(s||V||(N?ht.some((dt,I)=>_n(dt,U[I])):_n(ht,U))){m&&m();const dt=Ln;Ln=d;try{const I=[ht,U===Xs?void 0:N&&U[0]===Xs?[]:U,T];c?c(t,3,I):t(...I),U=ht}finally{Ln=dt}}}else d.run()};return l&&l(H),d=new kh(p),d.scheduler=a?()=>a(H,!1):H,T=z=>Mg(z,!1,d),m=d.onStop=()=>{const z=gi.get(d);if(z){if(c)c(z,4);else for(const ht of z)ht();gi.delete(d)}},t?r?H(!0):U=d.run():a?a(H.bind(null,!0),!0):d.run(),G.pause=d.pause.bind(d),G.resume=d.resume.bind(d),G.stop=G,G}function pn(e,t=1/0,n){if(t<=0||!Pt(e)||e.__v_skip||(n=n||new Set,n.has(e)))return e;if(n.add(e),t--,ae(e))pn(e.value,t,n);else if(at(e))for(let r=0;r<e.length;r++)pn(e[r],t,n);else if(Sh(e)||ar(e))e.forEach(r=>{pn(r,t,n)});else if(Vh(e)){for(const r in e)pn(e[r],t,n);for(const r of Object.getOwnPropertySymbols(e))Object.prototype.propertyIsEnumerable.call(e,r)&&pn(e[r],t,n)}return e}/**
* @vue/runtime-core v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/function bs(e,t,n,r){try{return r?e(...r):e()}catch(s){Hi(s,t,n)}}function ze(e,t,n,r){if(ut(e)){const s=bs(e,t,n,r);return s&&Ch(s)&&s.catch(i=>{Hi(i,t,n)}),s}if(at(e)){const s=[];for(let i=0;i<e.length;i++)s.push(ze(e[i],t,n,r));return s}}function Hi(e,t,n,r=!0){const s=t?t.vnode:null,{errorHandler:i,throwUnhandledErrorInProduction:a}=t&&t.appContext.config||St;if(t){let l=t.parent;const c=t.proxy,f=`https://vuejs.org/error-reference/#runtime-${n}`;for(;l;){const d=l.ec;if(d){for(let p=0;p<d.length;p++)if(d[p](e,c,f)===!1)return}l=l.parent}if(i){Pn(),bs(i,null,10,[e,c,f]),Vn();return}}Lg(e,n,s,r,a)}function Lg(e,t,n,r=!0,s=!1){if(s)throw e;console.error(e)}const de=[];let Le=-1;const ur=[];let hn=null,tr=0;const ef=Promise.resolve();let mi=null;function nf(e){const t=mi||ef;return e?t.then(this?e.bind(this):e):t}function Fg(e){let t=Le+1,n=de.length;for(;t<n;){const r=t+n>>>1,s=de[r],i=ps(s);i<e||i===e&&s.flags&2?t=r+1:n=r}return t}function za(e){if(!(e.flags&1)){const t=ps(e),n=de[de.length-1];!n||!(e.flags&2)&&t>=ps(n)?de.push(e):de.splice(Fg(t),0,e),e.flags|=1,rf()}}function rf(){mi||(mi=ef.then(of))}function Ug(e){at(e)?ur.push(...e):hn&&e.id===-1?hn.splice(tr+1,0,e):e.flags&1||(ur.push(e),e.flags|=1),rf()}function Su(e,t,n=Le+1){for(;n<de.length;n++){const r=de[n];if(r&&r.flags&2){if(e&&r.id!==e.uid)continue;de.splice(n,1),n--,r.flags&4&&(r.flags&=-2),r(),r.flags&4||(r.flags&=-2)}}}function sf(e){if(ur.length){const t=[...new Set(ur)].sort((n,r)=>ps(n)-ps(r));if(ur.length=0,hn){hn.push(...t);return}for(hn=t,tr=0;tr<hn.length;tr++){const n=hn[tr];n.flags&4&&(n.flags&=-2),n.flags&8||n(),n.flags&=-2}hn=null,tr=0}}const ps=e=>e.id==null?e.flags&2?-1:1/0:e.id;function of(e){try{for(Le=0;Le<de.length;Le++){const t=de[Le];t&&!(t.flags&8)&&(t.flags&4&&(t.flags&=-2),bs(t,t.i,t.i?15:14),t.flags&4||(t.flags&=-2))}}finally{for(;Le<de.length;Le++){const t=de[Le];t&&(t.flags&=-2)}Le=-1,de.length=0,sf(),mi=null,(de.length||ur.length)&&of()}}let De=null,af=null;function _i(e){const t=De;return De=e,af=e&&e.type.__scopeId||null,t}function es(e,t=De,n){if(!t||e._n)return e;const r=(...s)=>{r._d&&Lu(-1);const i=_i(t);let a;try{a=e(...s)}finally{_i(i),r._d&&Lu(1)}return a};return r._n=!0,r._c=!0,r._d=!0,r}function Mn(e,t,n,r){const s=e.dirs,i=t&&t.dirs;for(let a=0;a<s.length;a++){const l=s[a];i&&(l.oldValue=i[a].value);let c=l.dir[r];c&&(Pn(),ze(c,n,8,[e.el,l,e,t]),Vn())}}const Bg=Symbol("_vte"),$g=e=>e.__isTeleport;function Ka(e,t){e.shapeFlag&6&&e.component?(e.transition=t,Ka(e.component.subTree,t)):e.shapeFlag&128?(e.ssContent.transition=t.clone(e.ssContent),e.ssFallback.transition=t.clone(e.ssFallback)):e.transition=t}/*! #__NO_SIDE_EFFECTS__ */function Gn(e,t){return ut(e)?le({name:e.name},t,{setup:e}):e}function lf(e){e.ids=[e.ids[0]+e.ids[2]+++"-",0,0]}function yi(e,t,n,r,s=!1){if(at(e)){e.forEach((V,N)=>yi(V,t&&(at(t)?t[N]:t),n,r,s));return}if(ns(r)&&!s){r.shapeFlag&512&&r.type.__asyncResolved&&r.component.subTree.component&&yi(e,t,n,r.component.subTree);return}const i=r.shapeFlag&4?Ya(r.component):r.el,a=s?null:i,{i:l,r:c}=e,f=t&&t.r,d=l.refs===St?l.refs={}:l.refs,p=l.setupState,m=It(p),T=p===St?()=>!1:V=>At(m,V);if(f!=null&&f!==c&&(Bt(f)?(d[f]=null,T(f)&&(p[f]=null)):ae(f)&&(f.value=null)),ut(c))bs(c,l,12,[a,d]);else{const V=Bt(c),N=ae(c);if(V||N){const L=()=>{if(e.f){const G=V?T(c)?p[c]:d[c]:c.value;s?at(G)&&Oa(G,i):at(G)?G.includes(i)||G.push(i):V?(d[c]=[i],T(c)&&(p[c]=d[c])):(c.value=[i],e.k&&(d[e.k]=c.value))}else V?(d[c]=a,T(c)&&(p[c]=a)):N&&(c.value=a,e.k&&(d[e.k]=a))};a?(L.id=-1,ye(L,n)):L()}}}Bi().requestIdleCallback;Bi().cancelIdleCallback;const ns=e=>!!e.type.__asyncLoader,uf=e=>e.type.__isKeepAlive;function jg(e,t){cf(e,"a",t)}function qg(e,t){cf(e,"da",t)}function cf(e,t,n=ie){const r=e.__wdc||(e.__wdc=()=>{let s=n;for(;s;){if(s.isDeactivated)return;s=s.parent}return e()});if(zi(t,r,n),n){let s=n.parent;for(;s&&s.parent;)uf(s.parent.vnode)&&Hg(r,t,n,s),s=s.parent}}function Hg(e,t,n,r){const s=zi(t,e,r,!0);hf(()=>{Oa(r[t],s)},n)}function zi(e,t,n=ie,r=!1){if(n){const s=n[e]||(n[e]=[]),i=t.__weh||(t.__weh=(...a)=>{Pn();const l=Ss(n),c=ze(t,n,e,a);return l(),Vn(),c});return r?s.unshift(i):s.push(i),i}}const nn=e=>(t,n=ie)=>{(!_s||e==="sp")&&zi(e,(...r)=>t(...r),n)},zg=nn("bm"),Ga=nn("m"),Kg=nn("bu"),Gg=nn("u"),Wg=nn("bum"),hf=nn("um"),Qg=nn("sp"),Yg=nn("rtg"),Xg=nn("rtc");function Jg(e,t=ie){zi("ec",e,t)}const Zg="components";function ff(e,t){return em(Zg,e,!0,t)||e}const tm=Symbol.for("v-ndc");function em(e,t,n=!0,r=!1){const s=De||ie;if(s){const i=s.type;{const l=jm(i,!1);if(l&&(l===t||l===be(t)||l===Ui(be(t))))return i}const a=Cu(s[e]||i[e],t)||Cu(s.appContext[e],t);return!a&&r?i:a}}function Cu(e,t){return e&&(e[t]||e[be(t)]||e[Ui(be(t))])}function nm(e,t,n,r){let s;const i=n,a=at(e);if(a||Bt(e)){const l=a&&lr(e);let c=!1;l&&(c=!Re(e),e=$i(e)),s=new Array(e.length);for(let f=0,d=e.length;f<d;f++)s[f]=t(c?re(e[f]):e[f],f,void 0,i)}else if(typeof e=="number"){s=new Array(e);for(let l=0;l<e;l++)s[l]=t(l+1,l,void 0,i)}else if(Pt(e))if(e[Symbol.iterator])s=Array.from(e,(l,c)=>t(l,c,void 0,i));else{const l=Object.keys(e);s=new Array(l.length);for(let c=0,f=l.length;c<f;c++){const d=l[c];s[c]=t(e[d],d,c,i)}}else s=[];return s}const Jo=e=>e?Of(e)?Ya(e):Jo(e.parent):null,rs=le(Object.create(null),{$:e=>e,$el:e=>e.vnode.el,$data:e=>e.data,$props:e=>e.props,$attrs:e=>e.attrs,$slots:e=>e.slots,$refs:e=>e.refs,$parent:e=>Jo(e.parent),$root:e=>Jo(e.root),$host:e=>e.ce,$emit:e=>e.emit,$options:e=>pf(e),$forceUpdate:e=>e.f||(e.f=()=>{za(e.update)}),$nextTick:e=>e.n||(e.n=nf.bind(e.proxy)),$watch:e=>Im.bind(e)}),Vo=(e,t)=>e!==St&&!e.__isScriptSetup&&At(e,t),rm={get({_:e},t){if(t==="__v_skip")return!0;const{ctx:n,setupState:r,data:s,props:i,accessCache:a,type:l,appContext:c}=e;let f;if(t[0]!=="$"){const T=a[t];if(T!==void 0)switch(T){case 1:return r[t];case 2:return s[t];case 4:return n[t];case 3:return i[t]}else{if(Vo(r,t))return a[t]=1,r[t];if(s!==St&&At(s,t))return a[t]=2,s[t];if((f=e.propsOptions[0])&&At(f,t))return a[t]=3,i[t];if(n!==St&&At(n,t))return a[t]=4,n[t];Zo&&(a[t]=0)}}const d=rs[t];let p,m;if(d)return t==="$attrs"&&ne(e.attrs,"get",""),d(e);if((p=l.__cssModules)&&(p=p[t]))return p;if(n!==St&&At(n,t))return a[t]=4,n[t];if(m=c.config.globalProperties,At(m,t))return m[t]},set({_:e},t,n){const{data:r,setupState:s,ctx:i}=e;return Vo(s,t)?(s[t]=n,!0):r!==St&&At(r,t)?(r[t]=n,!0):At(e.props,t)||t[0]==="$"&&t.slice(1)in e?!1:(i[t]=n,!0)},has({_:{data:e,setupState:t,accessCache:n,ctx:r,appContext:s,propsOptions:i}},a){let l;return!!n[a]||e!==St&&At(e,a)||Vo(t,a)||(l=i[0])&&At(l,a)||At(r,a)||At(rs,a)||At(s.config.globalProperties,a)},defineProperty(e,t,n){return n.get!=null?e._.accessCache[t]=0:At(n,"value")&&this.set(e,t,n.value,null),Reflect.defineProperty(e,t,n)}};function Pu(e){return at(e)?e.reduce((t,n)=>(t[n]=null,t),{}):e}let Zo=!0;function sm(e){const t=pf(e),n=e.proxy,r=e.ctx;Zo=!1,t.beforeCreate&&Vu(t.beforeCreate,e,"bc");const{data:s,computed:i,methods:a,watch:l,provide:c,inject:f,created:d,beforeMount:p,mounted:m,beforeUpdate:T,updated:V,activated:N,deactivated:L,beforeDestroy:G,beforeUnmount:U,destroyed:H,unmounted:z,render:ht,renderTracked:dt,renderTriggered:I,errorCaptured:y,serverPrefetch:w,expose:A,inheritAttrs:R,components:S,directives:E,filters:ue}=t;if(f&&im(f,r,null),a)for(const pt in a){const ft=a[pt];ut(ft)&&(r[pt]=ft.bind(n))}if(s){const pt=s.call(n,n);Pt(pt)&&(e.data=ji(pt))}if(Zo=!0,i)for(const pt in i){const ft=i[pt],me=ut(ft)?ft.bind(n,n):ut(ft.get)?ft.get.bind(n,n):$e,Se=!ut(ft)&&ut(ft.set)?ft.set.bind(n):$e,we=Ve({get:me,set:Se});Object.defineProperty(r,pt,{enumerable:!0,configurable:!0,get:()=>we.value,set:Vt=>we.value=Vt})}if(l)for(const pt in l)df(l[pt],r,n,pt);if(c){const pt=ut(c)?c.call(n):c;Reflect.ownKeys(pt).forEach(ft=>{si(ft,pt[ft])})}d&&Vu(d,e,"c");function Lt(pt,ft){at(ft)?ft.forEach(me=>pt(me.bind(n))):ft&&pt(ft.bind(n))}if(Lt(zg,p),Lt(Ga,m),Lt(Kg,T),Lt(Gg,V),Lt(jg,N),Lt(qg,L),Lt(Jg,y),Lt(Xg,dt),Lt(Yg,I),Lt(Wg,U),Lt(hf,z),Lt(Qg,w),at(A))if(A.length){const pt=e.exposed||(e.exposed={});A.forEach(ft=>{Object.defineProperty(pt,ft,{get:()=>n[ft],set:me=>n[ft]=me})})}else e.exposed||(e.exposed={});ht&&e.render===$e&&(e.render=ht),R!=null&&(e.inheritAttrs=R),S&&(e.components=S),E&&(e.directives=E),w&&lf(e)}function im(e,t,n=$e){at(e)&&(e=ta(e));for(const r in e){const s=e[r];let i;Pt(s)?"default"in s?i=je(s.from||r,s.default,!0):i=je(s.from||r):i=je(s),ae(i)?Object.defineProperty(t,r,{enumerable:!0,configurable:!0,get:()=>i.value,set:a=>i.value=a}):t[r]=i}}function Vu(e,t,n){ze(at(e)?e.map(r=>r.bind(t.proxy)):e.bind(t.proxy),t,n)}function df(e,t,n,r){let s=r.includes(".")?Cf(n,r):()=>n[r];if(Bt(e)){const i=t[e];ut(i)&&ii(s,i)}else if(ut(e))ii(s,e.bind(n));else if(Pt(e))if(at(e))e.forEach(i=>df(i,t,n,r));else{const i=ut(e.handler)?e.handler.bind(n):t[e.handler];ut(i)&&ii(s,i,e)}}function pf(e){const t=e.type,{mixins:n,extends:r}=t,{mixins:s,optionsCache:i,config:{optionMergeStrategies:a}}=e.appContext,l=i.get(t);let c;return l?c=l:!s.length&&!n&&!r?c=t:(c={},s.length&&s.forEach(f=>vi(c,f,a,!0)),vi(c,t,a)),Pt(t)&&i.set(t,c),c}function vi(e,t,n,r=!1){const{mixins:s,extends:i}=t;i&&vi(e,i,n,!0),s&&s.forEach(a=>vi(e,a,n,!0));for(const a in t)if(!(r&&a==="expose")){const l=om[a]||n&&n[a];e[a]=l?l(e[a],t[a]):t[a]}return e}const om={data:Du,props:xu,emits:xu,methods:Wr,computed:Wr,beforeCreate:he,created:he,beforeMount:he,mounted:he,beforeUpdate:he,updated:he,beforeDestroy:he,beforeUnmount:he,destroyed:he,unmounted:he,activated:he,deactivated:he,errorCaptured:he,serverPrefetch:he,components:Wr,directives:Wr,watch:lm,provide:Du,inject:am};function Du(e,t){return t?e?function(){return le(ut(e)?e.call(this,this):e,ut(t)?t.call(this,this):t)}:t:e}function am(e,t){return Wr(ta(e),ta(t))}function ta(e){if(at(e)){const t={};for(let n=0;n<e.length;n++)t[e[n]]=e[n];return t}return e}function he(e,t){return e?[...new Set([].concat(e,t))]:t}function Wr(e,t){return e?le(Object.create(null),e,t):t}function xu(e,t){return e?at(e)&&at(t)?[...new Set([...e,...t])]:le(Object.create(null),Pu(e),Pu(t??{})):t}function lm(e,t){if(!e)return t;if(!t)return e;const n=le(Object.create(null),e);for(const r in t)n[r]=he(e[r],t[r]);return n}function gf(){return{app:null,config:{isNativeTag:Jp,performance:!1,globalProperties:{},optionMergeStrategies:{},errorHandler:void 0,warnHandler:void 0,compilerOptions:{}},mixins:[],components:{},directives:{},provides:Object.create(null),optionsCache:new WeakMap,propsCache:new WeakMap,emitsCache:new WeakMap}}let um=0;function cm(e,t){return function(r,s=null){ut(r)||(r=le({},r)),s!=null&&!Pt(s)&&(s=null);const i=gf(),a=new WeakSet,l=[];let c=!1;const f=i.app={_uid:um++,_component:r,_props:s,_container:null,_context:i,_instance:null,version:Hm,get config(){return i.config},set config(d){},use(d,...p){return a.has(d)||(d&&ut(d.install)?(a.add(d),d.install(f,...p)):ut(d)&&(a.add(d),d(f,...p))),f},mixin(d){return i.mixins.includes(d)||i.mixins.push(d),f},component(d,p){return p?(i.components[d]=p,f):i.components[d]},directive(d,p){return p?(i.directives[d]=p,f):i.directives[d]},mount(d,p,m){if(!c){const T=f._ceVNode||qt(r,s);return T.appContext=i,m===!0?m="svg":m===!1&&(m=void 0),e(T,d,m),c=!0,f._container=d,d.__vue_app__=f,Ya(T.component)}},onUnmount(d){l.push(d)},unmount(){c&&(ze(l,f._instance,16),e(null,f._container),delete f._container.__vue_app__)},provide(d,p){return i.provides[d]=p,f},runWithContext(d){const p=cr;cr=f;try{return d()}finally{cr=p}}};return f}}let cr=null;function si(e,t){if(ie){let n=ie.provides;const r=ie.parent&&ie.parent.provides;r===n&&(n=ie.provides=Object.create(r)),n[e]=t}}function je(e,t,n=!1){const r=ie||De;if(r||cr){const s=cr?cr._context.provides:r?r.parent==null?r.vnode.appContext&&r.vnode.appContext.provides:r.parent.provides:void 0;if(s&&e in s)return s[e];if(arguments.length>1)return n&&ut(t)?t.call(r&&r.proxy):t}}const mf={},_f=()=>Object.create(mf),yf=e=>Object.getPrototypeOf(e)===mf;function hm(e,t,n,r=!1){const s={},i=_f();e.propsDefaults=Object.create(null),vf(e,t,s,i);for(const a in e.propsOptions[0])a in s||(s[a]=void 0);n?e.props=r?s:Yh(s):e.type.props?e.props=s:e.props=i,e.attrs=i}function fm(e,t,n,r){const{props:s,attrs:i,vnode:{patchFlag:a}}=e,l=It(s),[c]=e.propsOptions;let f=!1;if((r||a>0)&&!(a&16)){if(a&8){const d=e.vnode.dynamicProps;for(let p=0;p<d.length;p++){let m=d[p];if(Ki(e.emitsOptions,m))continue;const T=t[m];if(c)if(At(i,m))T!==i[m]&&(i[m]=T,f=!0);else{const V=be(m);s[V]=ea(c,l,V,T,e,!1)}else T!==i[m]&&(i[m]=T,f=!0)}}}else{vf(e,t,s,i)&&(f=!0);let d;for(const p in l)(!t||!At(t,p)&&((d=Kn(p))===p||!At(t,d)))&&(c?n&&(n[p]!==void 0||n[d]!==void 0)&&(s[p]=ea(c,l,p,void 0,e,!0)):delete s[p]);if(i!==l)for(const p in i)(!t||!At(t,p))&&(delete i[p],f=!0)}f&&Je(e.attrs,"set","")}function vf(e,t,n,r){const[s,i]=e.propsOptions;let a=!1,l;if(t)for(let c in t){if(Jr(c))continue;const f=t[c];let d;s&&At(s,d=be(c))?!i||!i.includes(d)?n[d]=f:(l||(l={}))[d]=f:Ki(e.emitsOptions,c)||(!(c in r)||f!==r[c])&&(r[c]=f,a=!0)}if(i){const c=It(n),f=l||St;for(let d=0;d<i.length;d++){const p=i[d];n[p]=ea(s,c,p,f[p],e,!At(f,p))}}return a}function ea(e,t,n,r,s,i){const a=e[n];if(a!=null){const l=At(a,"default");if(l&&r===void 0){const c=a.default;if(a.type!==Function&&!a.skipFactory&&ut(c)){const{propsDefaults:f}=s;if(n in f)r=f[n];else{const d=Ss(s);r=f[n]=c.call(null,t),d()}}else r=c;s.ce&&s.ce._setProp(n,r)}a[0]&&(i&&!l?r=!1:a[1]&&(r===""||r===Kn(n))&&(r=!0))}return r}const dm=new WeakMap;function Ef(e,t,n=!1){const r=n?dm:t.propsCache,s=r.get(e);if(s)return s;const i=e.props,a={},l=[];let c=!1;if(!ut(e)){const d=p=>{c=!0;const[m,T]=Ef(p,t,!0);le(a,m),T&&l.push(...T)};!n&&t.mixins.length&&t.mixins.forEach(d),e.extends&&d(e.extends),e.mixins&&e.mixins.forEach(d)}if(!i&&!c)return Pt(e)&&r.set(e,or),or;if(at(i))for(let d=0;d<i.length;d++){const p=be(i[d]);Nu(p)&&(a[p]=St)}else if(i)for(const d in i){const p=be(d);if(Nu(p)){const m=i[d],T=a[p]=at(m)||ut(m)?{type:m}:le({},m),V=T.type;let N=!1,L=!0;if(at(V))for(let G=0;G<V.length;++G){const U=V[G],H=ut(U)&&U.name;if(H==="Boolean"){N=!0;break}else H==="String"&&(L=!1)}else N=ut(V)&&V.name==="Boolean";T[0]=N,T[1]=L,(N||At(T,"default"))&&l.push(p)}}const f=[a,l];return Pt(e)&&r.set(e,f),f}function Nu(e){return e[0]!=="$"&&!Jr(e)}const Tf=e=>e[0]==="_"||e==="$stable",Wa=e=>at(e)?e.map(Ue):[Ue(e)],pm=(e,t,n)=>{if(t._n)return t;const r=es((...s)=>Wa(t(...s)),n);return r._c=!1,r},wf=(e,t,n)=>{const r=e._ctx;for(const s in e){if(Tf(s))continue;const i=e[s];if(ut(i))t[s]=pm(s,i,r);else if(i!=null){const a=Wa(i);t[s]=()=>a}}},If=(e,t)=>{const n=Wa(t);e.slots.default=()=>n},Af=(e,t,n)=>{for(const r in t)(n||r!=="_")&&(e[r]=t[r])},gm=(e,t,n)=>{const r=e.slots=_f();if(e.vnode.shapeFlag&32){const s=t._;s?(Af(r,t,n),n&&Dh(r,"_",s,!0)):wf(t,r)}else t&&If(e,t)},mm=(e,t,n)=>{const{vnode:r,slots:s}=e;let i=!0,a=St;if(r.shapeFlag&32){const l=t._;l?n&&l===1?i=!1:Af(s,t,n):(i=!t.$stable,wf(t,s)),a=t}else t&&(If(e,t),a={default:1});if(i)for(const l in s)!Tf(l)&&a[l]==null&&delete s[l]},ye=Vm;function _m(e){return ym(e)}function ym(e,t){const n=Bi();n.__VUE__=!0;const{insert:r,remove:s,patchProp:i,createElement:a,createText:l,createComment:c,setText:f,setElementText:d,parentNode:p,nextSibling:m,setScopeId:T=$e,insertStaticContent:V}=e,N=(_,v,b,x=null,k=null,O=null,K=void 0,j=null,$=!!v.dynamicChildren)=>{if(_===v)return;_&&!Kr(_,v)&&(x=D(_),Vt(_,k,O,!0),_=null),v.patchFlag===-2&&($=!1,v.dynamicChildren=null);const{type:F,ref:et,shapeFlag:Q}=v;switch(F){case Gi:L(_,v,b,x);break;case gs:G(_,v,b,x);break;case xo:_==null&&U(v,b,x,K);break;case Pe:S(_,v,b,x,k,O,K,j,$);break;default:Q&1?ht(_,v,b,x,k,O,K,j,$):Q&6?E(_,v,b,x,k,O,K,j,$):(Q&64||Q&128)&&F.process(_,v,b,x,k,O,K,j,$,J)}et!=null&&k&&yi(et,_&&_.ref,O,v||_,!v)},L=(_,v,b,x)=>{if(_==null)r(v.el=l(v.children),b,x);else{const k=v.el=_.el;v.children!==_.children&&f(k,v.children)}},G=(_,v,b,x)=>{_==null?r(v.el=c(v.children||""),b,x):v.el=_.el},U=(_,v,b,x)=>{[_.el,_.anchor]=V(_.children,v,b,x,_.el,_.anchor)},H=({el:_,anchor:v},b,x)=>{let k;for(;_&&_!==v;)k=m(_),r(_,b,x),_=k;r(v,b,x)},z=({el:_,anchor:v})=>{let b;for(;_&&_!==v;)b=m(_),s(_),_=b;s(v)},ht=(_,v,b,x,k,O,K,j,$)=>{v.type==="svg"?K="svg":v.type==="math"&&(K="mathml"),_==null?dt(v,b,x,k,O,K,j,$):w(_,v,k,O,K,j,$)},dt=(_,v,b,x,k,O,K,j)=>{let $,F;const{props:et,shapeFlag:Q,transition:tt,dirs:st}=_;if($=_.el=a(_.type,O,et&&et.is,et),Q&8?d($,_.children):Q&16&&y(_.children,$,null,x,k,Do(_,O),K,j),st&&Mn(_,null,x,"created"),I($,_,_.scopeId,K,x),et){for(const lt in et)lt!=="value"&&!Jr(lt)&&i($,lt,null,et[lt],O,x);"value"in et&&i($,"value",null,et.value,O),(F=et.onVnodeBeforeMount)&&ke(F,x,_)}st&&Mn(_,null,x,"beforeMount");const nt=vm(k,tt);nt&&tt.beforeEnter($),r($,v,b),((F=et&&et.onVnodeMounted)||nt||st)&&ye(()=>{F&&ke(F,x,_),nt&&tt.enter($),st&&Mn(_,null,x,"mounted")},k)},I=(_,v,b,x,k)=>{if(b&&T(_,b),x)for(let O=0;O<x.length;O++)T(_,x[O]);if(k){let O=k.subTree;if(v===O||Vf(O.type)&&(O.ssContent===v||O.ssFallback===v)){const K=k.vnode;I(_,K,K.scopeId,K.slotScopeIds,k.parent)}}},y=(_,v,b,x,k,O,K,j,$=0)=>{for(let F=$;F<_.length;F++){const et=_[F]=j?fn(_[F]):Ue(_[F]);N(null,et,v,b,x,k,O,K,j)}},w=(_,v,b,x,k,O,K)=>{const j=v.el=_.el;let{patchFlag:$,dynamicChildren:F,dirs:et}=v;$|=_.patchFlag&16;const Q=_.props||St,tt=v.props||St;let st;if(b&&kn(b,!1),(st=tt.onVnodeBeforeUpdate)&&ke(st,b,v,_),et&&Mn(v,_,b,"beforeUpdate"),b&&kn(b,!0),(Q.innerHTML&&tt.innerHTML==null||Q.textContent&&tt.textContent==null)&&d(j,""),F?A(_.dynamicChildren,F,j,b,x,Do(v,k),O):K||ft(_,v,j,null,b,x,Do(v,k),O,!1),$>0){if($&16)R(j,Q,tt,b,k);else if($&2&&Q.class!==tt.class&&i(j,"class",null,tt.class,k),$&4&&i(j,"style",Q.style,tt.style,k),$&8){const nt=v.dynamicProps;for(let lt=0;lt<nt.length;lt++){const gt=nt[lt],Yt=Q[gt],zt=tt[gt];(zt!==Yt||gt==="value")&&i(j,gt,Yt,zt,k,b)}}$&1&&_.children!==v.children&&d(j,v.children)}else!K&&F==null&&R(j,Q,tt,b,k);((st=tt.onVnodeUpdated)||et)&&ye(()=>{st&&ke(st,b,v,_),et&&Mn(v,_,b,"updated")},x)},A=(_,v,b,x,k,O,K)=>{for(let j=0;j<v.length;j++){const $=_[j],F=v[j],et=$.el&&($.type===Pe||!Kr($,F)||$.shapeFlag&70)?p($.el):b;N($,F,et,null,x,k,O,K,!0)}},R=(_,v,b,x,k)=>{if(v!==b){if(v!==St)for(const O in v)!Jr(O)&&!(O in b)&&i(_,O,v[O],null,k,x);for(const O in b){if(Jr(O))continue;const K=b[O],j=v[O];K!==j&&O!=="value"&&i(_,O,j,K,k,x)}"value"in b&&i(_,"value",v.value,b.value,k)}},S=(_,v,b,x,k,O,K,j,$)=>{const F=v.el=_?_.el:l(""),et=v.anchor=_?_.anchor:l("");let{patchFlag:Q,dynamicChildren:tt,slotScopeIds:st}=v;st&&(j=j?j.concat(st):st),_==null?(r(F,b,x),r(et,b,x),y(v.children||[],b,et,k,O,K,j,$)):Q>0&&Q&64&&tt&&_.dynamicChildren?(A(_.dynamicChildren,tt,b,k,O,K,j),(v.key!=null||k&&v===k.subTree)&&Rf(_,v,!0)):ft(_,v,b,et,k,O,K,j,$)},E=(_,v,b,x,k,O,K,j,$)=>{v.slotScopeIds=j,_==null?v.shapeFlag&512?k.ctx.activate(v,b,x,K,$):ue(v,b,x,k,O,K,$):Te(_,v,$)},ue=(_,v,b,x,k,O,K)=>{const j=_.component=Lm(_,x,k);if(uf(_)&&(j.ctx.renderer=J),Fm(j,!1,K),j.asyncDep){if(k&&k.registerDep(j,Lt,K),!_.el){const $=j.subTree=qt(gs);G(null,$,v,b)}}else Lt(j,_,v,b,k,O,K)},Te=(_,v,b)=>{const x=v.component=_.component;if(Cm(_,v,b))if(x.asyncDep&&!x.asyncResolved){pt(x,v,b);return}else x.next=v,x.update();else v.el=_.el,x.vnode=v},Lt=(_,v,b,x,k,O,K)=>{const j=()=>{if(_.isMounted){let{next:Q,bu:tt,u:st,parent:nt,vnode:lt}=_;{const Xt=bf(_);if(Xt){Q&&(Q.el=lt.el,pt(_,Q,K)),Xt.asyncDep.then(()=>{_.isUnmounted||j()});return}}let gt=Q,Yt;kn(_,!1),Q?(Q.el=lt.el,pt(_,Q,K)):Q=lt,tt&&Ro(tt),(Yt=Q.props&&Q.props.onVnodeBeforeUpdate)&&ke(Yt,nt,Q,lt),kn(_,!0);const zt=Mu(_),Ie=_.subTree;_.subTree=zt,N(Ie,zt,p(Ie.el),D(Ie),_,k,O),Q.el=zt.el,gt===null&&Pm(_,zt.el),st&&ye(st,k),(Yt=Q.props&&Q.props.onVnodeUpdated)&&ye(()=>ke(Yt,nt,Q,lt),k)}else{let Q;const{el:tt,props:st}=v,{bm:nt,m:lt,parent:gt,root:Yt,type:zt}=_,Ie=ns(v);kn(_,!1),nt&&Ro(nt),!Ie&&(Q=st&&st.onVnodeBeforeMount)&&ke(Q,gt,v),kn(_,!0);{Yt.ce&&Yt.ce._injectChildStyle(zt);const Xt=_.subTree=Mu(_);N(null,Xt,b,x,_,k,O),v.el=Xt.el}if(lt&&ye(lt,k),!Ie&&(Q=st&&st.onVnodeMounted)){const Xt=v;ye(()=>ke(Q,gt,Xt),k)}(v.shapeFlag&256||gt&&ns(gt.vnode)&&gt.vnode.shapeFlag&256)&&_.a&&ye(_.a,k),_.isMounted=!0,v=b=x=null}};_.scope.on();const $=_.effect=new kh(j);_.scope.off();const F=_.update=$.run.bind($),et=_.job=$.runIfDirty.bind($);et.i=_,et.id=_.uid,$.scheduler=()=>za(et),kn(_,!0),F()},pt=(_,v,b)=>{v.component=_;const x=_.vnode.props;_.vnode=v,_.next=null,fm(_,v.props,x,b),mm(_,v.children,b),Pn(),Su(_),Vn()},ft=(_,v,b,x,k,O,K,j,$=!1)=>{const F=_&&_.children,et=_?_.shapeFlag:0,Q=v.children,{patchFlag:tt,shapeFlag:st}=v;if(tt>0){if(tt&128){Se(F,Q,b,x,k,O,K,j,$);return}else if(tt&256){me(F,Q,b,x,k,O,K,j,$);return}}st&8?(et&16&&pe(F,k,O),Q!==F&&d(b,Q)):et&16?st&16?Se(F,Q,b,x,k,O,K,j,$):pe(F,k,O,!0):(et&8&&d(b,""),st&16&&y(Q,b,x,k,O,K,j,$))},me=(_,v,b,x,k,O,K,j,$)=>{_=_||or,v=v||or;const F=_.length,et=v.length,Q=Math.min(F,et);let tt;for(tt=0;tt<Q;tt++){const st=v[tt]=$?fn(v[tt]):Ue(v[tt]);N(_[tt],st,b,null,k,O,K,j,$)}F>et?pe(_,k,O,!0,!1,Q):y(v,b,x,k,O,K,j,$,Q)},Se=(_,v,b,x,k,O,K,j,$)=>{let F=0;const et=v.length;let Q=_.length-1,tt=et-1;for(;F<=Q&&F<=tt;){const st=_[F],nt=v[F]=$?fn(v[F]):Ue(v[F]);if(Kr(st,nt))N(st,nt,b,null,k,O,K,j,$);else break;F++}for(;F<=Q&&F<=tt;){const st=_[Q],nt=v[tt]=$?fn(v[tt]):Ue(v[tt]);if(Kr(st,nt))N(st,nt,b,null,k,O,K,j,$);else break;Q--,tt--}if(F>Q){if(F<=tt){const st=tt+1,nt=st<et?v[st].el:x;for(;F<=tt;)N(null,v[F]=$?fn(v[F]):Ue(v[F]),b,nt,k,O,K,j,$),F++}}else if(F>tt)for(;F<=Q;)Vt(_[F],k,O,!0),F++;else{const st=F,nt=F,lt=new Map;for(F=nt;F<=tt;F++){const Kt=v[F]=$?fn(v[F]):Ue(v[F]);Kt.key!=null&&lt.set(Kt.key,F)}let gt,Yt=0;const zt=tt-nt+1;let Ie=!1,Xt=0;const on=new Array(zt);for(F=0;F<zt;F++)on[F]=0;for(F=st;F<=Q;F++){const Kt=_[F];if(Yt>=zt){Vt(Kt,k,O,!0);continue}let Ae;if(Kt.key!=null)Ae=lt.get(Kt.key);else for(gt=nt;gt<=tt;gt++)if(on[gt-nt]===0&&Kr(Kt,v[gt])){Ae=gt;break}Ae===void 0?Vt(Kt,k,O,!0):(on[Ae-nt]=F+1,Ae>=Xt?Xt=Ae:Ie=!0,N(Kt,v[Ae],b,null,k,O,K,j,$),Yt++)}const xr=Ie?Em(on):or;for(gt=xr.length-1,F=zt-1;F>=0;F--){const Kt=nt+F,Ae=v[Kt],Ns=Kt+1<et?v[Kt+1].el:x;on[F]===0?N(null,Ae,b,Ns,k,O,K,j,$):Ie&&(gt<0||F!==xr[gt]?we(Ae,b,Ns,2):gt--)}}},we=(_,v,b,x,k=null)=>{const{el:O,type:K,transition:j,children:$,shapeFlag:F}=_;if(F&6){we(_.component.subTree,v,b,x);return}if(F&128){_.suspense.move(v,b,x);return}if(F&64){K.move(_,v,b,J);return}if(K===Pe){r(O,v,b);for(let Q=0;Q<$.length;Q++)we($[Q],v,b,x);r(_.anchor,v,b);return}if(K===xo){H(_,v,b);return}if(x!==2&&F&1&&j)if(x===0)j.beforeEnter(O),r(O,v,b),ye(()=>j.enter(O),k);else{const{leave:Q,delayLeave:tt,afterLeave:st}=j,nt=()=>r(O,v,b),lt=()=>{Q(O,()=>{nt(),st&&st()})};tt?tt(O,nt,lt):lt()}else r(O,v,b)},Vt=(_,v,b,x=!1,k=!1)=>{const{type:O,props:K,ref:j,children:$,dynamicChildren:F,shapeFlag:et,patchFlag:Q,dirs:tt,cacheIndex:st}=_;if(Q===-2&&(k=!1),j!=null&&yi(j,null,b,_,!0),st!=null&&(v.renderCache[st]=void 0),et&256){v.ctx.deactivate(_);return}const nt=et&1&&tt,lt=!ns(_);let gt;if(lt&&(gt=K&&K.onVnodeBeforeUnmount)&&ke(gt,v,_),et&6)Me(_.component,b,x);else{if(et&128){_.suspense.unmount(b,x);return}nt&&Mn(_,null,v,"beforeUnmount"),et&64?_.type.remove(_,v,b,J,x):F&&!F.hasOnce&&(O!==Pe||Q>0&&Q&64)?pe(F,v,b,!1,!0):(O===Pe&&Q&384||!k&&et&16)&&pe($,v,b),x&&Dt(_)}(lt&&(gt=K&&K.onVnodeUnmounted)||nt)&&ye(()=>{gt&&ke(gt,v,_),nt&&Mn(_,null,v,"unmounted")},b)},Dt=_=>{const{type:v,el:b,anchor:x,transition:k}=_;if(v===Pe){sn(b,x);return}if(v===xo){z(_);return}const O=()=>{s(b),k&&!k.persisted&&k.afterLeave&&k.afterLeave()};if(_.shapeFlag&1&&k&&!k.persisted){const{leave:K,delayLeave:j}=k,$=()=>K(b,O);j?j(_.el,O,$):$()}else O()},sn=(_,v)=>{let b;for(;_!==v;)b=m(_),s(_),_=b;s(v)},Me=(_,v,b)=>{const{bum:x,scope:k,job:O,subTree:K,um:j,m:$,a:F}=_;Ou($),Ou(F),x&&Ro(x),k.stop(),O&&(O.flags|=8,Vt(K,_,v,b)),j&&ye(j,v),ye(()=>{_.isUnmounted=!0},v),v&&v.pendingBranch&&!v.isUnmounted&&_.asyncDep&&!_.asyncResolved&&_.suspenseId===v.pendingId&&(v.deps--,v.deps===0&&v.resolve())},pe=(_,v,b,x=!1,k=!1,O=0)=>{for(let K=O;K<_.length;K++)Vt(_[K],v,b,x,k)},D=_=>{if(_.shapeFlag&6)return D(_.component.subTree);if(_.shapeFlag&128)return _.suspense.next();const v=m(_.anchor||_.el),b=v&&v[Bg];return b?m(b):v};let Y=!1;const W=(_,v,b)=>{_==null?v._vnode&&Vt(v._vnode,null,null,!0):N(v._vnode||null,_,v,null,null,null,b),v._vnode=_,Y||(Y=!0,Su(),sf(),Y=!1)},J={p:N,um:Vt,m:we,r:Dt,mt:ue,mc:y,pc:ft,pbc:A,n:D,o:e};return{render:W,hydrate:void 0,createApp:cm(W)}}function Do({type:e,props:t},n){return n==="svg"&&e==="foreignObject"||n==="mathml"&&e==="annotation-xml"&&t&&t.encoding&&t.encoding.includes("html")?void 0:n}function kn({effect:e,job:t},n){n?(e.flags|=32,t.flags|=4):(e.flags&=-33,t.flags&=-5)}function vm(e,t){return(!e||e&&!e.pendingBranch)&&t&&!t.persisted}function Rf(e,t,n=!1){const r=e.children,s=t.children;if(at(r)&&at(s))for(let i=0;i<r.length;i++){const a=r[i];let l=s[i];l.shapeFlag&1&&!l.dynamicChildren&&((l.patchFlag<=0||l.patchFlag===32)&&(l=s[i]=fn(s[i]),l.el=a.el),!n&&l.patchFlag!==-2&&Rf(a,l)),l.type===Gi&&(l.el=a.el)}}function Em(e){const t=e.slice(),n=[0];let r,s,i,a,l;const c=e.length;for(r=0;r<c;r++){const f=e[r];if(f!==0){if(s=n[n.length-1],e[s]<f){t[r]=s,n.push(r);continue}for(i=0,a=n.length-1;i<a;)l=i+a>>1,e[n[l]]<f?i=l+1:a=l;f<e[n[i]]&&(i>0&&(t[r]=n[i-1]),n[i]=r)}}for(i=n.length,a=n[i-1];i-- >0;)n[i]=a,a=t[a];return n}function bf(e){const t=e.subTree.component;if(t)return t.asyncDep&&!t.asyncResolved?t:bf(t)}function Ou(e){if(e)for(let t=0;t<e.length;t++)e[t].flags|=8}const Tm=Symbol.for("v-scx"),wm=()=>je(Tm);function ii(e,t,n){return Sf(e,t,n)}function Sf(e,t,n=St){const{immediate:r,deep:s,flush:i,once:a}=n,l=le({},n),c=t&&r||!t&&i!=="post";let f;if(_s){if(i==="sync"){const T=wm();f=T.__watcherHandles||(T.__watcherHandles=[])}else if(!c){const T=()=>{};return T.stop=$e,T.resume=$e,T.pause=$e,T}}const d=ie;l.call=(T,V,N)=>ze(T,d,V,N);let p=!1;i==="post"?l.scheduler=T=>{ye(T,d&&d.suspense)}:i!=="sync"&&(p=!0,l.scheduler=(T,V)=>{V?T():za(T)}),l.augmentJob=T=>{t&&(T.flags|=4),p&&(T.flags|=2,d&&(T.id=d.uid,T.i=d))};const m=kg(e,t,l);return _s&&(f?f.push(m):c&&m()),m}function Im(e,t,n){const r=this.proxy,s=Bt(e)?e.includes(".")?Cf(r,e):()=>r[e]:e.bind(r,r);let i;ut(t)?i=t:(i=t.handler,n=t);const a=Ss(this),l=Sf(s,i.bind(r),n);return a(),l}function Cf(e,t){const n=t.split(".");return()=>{let r=e;for(let s=0;s<n.length&&r;s++)r=r[n[s]];return r}}const Am=(e,t)=>t==="modelValue"||t==="model-value"?e.modelModifiers:e[`${t}Modifiers`]||e[`${be(t)}Modifiers`]||e[`${Kn(t)}Modifiers`];function Rm(e,t,...n){if(e.isUnmounted)return;const r=e.vnode.props||St;let s=n;const i=t.startsWith("update:"),a=i&&Am(r,t.slice(7));a&&(a.trim&&(s=n.map(d=>Bt(d)?d.trim():d)),a.number&&(s=n.map(rg)));let l,c=r[l=Ao(t)]||r[l=Ao(be(t))];!c&&i&&(c=r[l=Ao(Kn(t))]),c&&ze(c,e,6,s);const f=r[l+"Once"];if(f){if(!e.emitted)e.emitted={};else if(e.emitted[l])return;e.emitted[l]=!0,ze(f,e,6,s)}}function Pf(e,t,n=!1){const r=t.emitsCache,s=r.get(e);if(s!==void 0)return s;const i=e.emits;let a={},l=!1;if(!ut(e)){const c=f=>{const d=Pf(f,t,!0);d&&(l=!0,le(a,d))};!n&&t.mixins.length&&t.mixins.forEach(c),e.extends&&c(e.extends),e.mixins&&e.mixins.forEach(c)}return!i&&!l?(Pt(e)&&r.set(e,null),null):(at(i)?i.forEach(c=>a[c]=null):le(a,i),Pt(e)&&r.set(e,a),a)}function Ki(e,t){return!e||!ki(t)?!1:(t=t.slice(2).replace(/Once$/,""),At(e,t[0].toLowerCase()+t.slice(1))||At(e,Kn(t))||At(e,t))}function Mu(e){const{type:t,vnode:n,proxy:r,withProxy:s,propsOptions:[i],slots:a,attrs:l,emit:c,render:f,renderCache:d,props:p,data:m,setupState:T,ctx:V,inheritAttrs:N}=e,L=_i(e);let G,U;try{if(n.shapeFlag&4){const z=s||r,ht=z;G=Ue(f.call(ht,z,d,p,T,m,V)),U=l}else{const z=t;G=Ue(z.length>1?z(p,{attrs:l,slots:a,emit:c}):z(p,null)),U=t.props?l:bm(l)}}catch(z){ss.length=0,Hi(z,e,1),G=qt(gs)}let H=G;if(U&&N!==!1){const z=Object.keys(U),{shapeFlag:ht}=H;z.length&&ht&7&&(i&&z.some(Na)&&(U=Sm(U,i)),H=gr(H,U,!1,!0))}return n.dirs&&(H=gr(H,null,!1,!0),H.dirs=H.dirs?H.dirs.concat(n.dirs):n.dirs),n.transition&&Ka(H,n.transition),G=H,_i(L),G}const bm=e=>{let t;for(const n in e)(n==="class"||n==="style"||ki(n))&&((t||(t={}))[n]=e[n]);return t},Sm=(e,t)=>{const n={};for(const r in e)(!Na(r)||!(r.slice(9)in t))&&(n[r]=e[r]);return n};function Cm(e,t,n){const{props:r,children:s,component:i}=e,{props:a,children:l,patchFlag:c}=t,f=i.emitsOptions;if(t.dirs||t.transition)return!0;if(n&&c>=0){if(c&1024)return!0;if(c&16)return r?ku(r,a,f):!!a;if(c&8){const d=t.dynamicProps;for(let p=0;p<d.length;p++){const m=d[p];if(a[m]!==r[m]&&!Ki(f,m))return!0}}}else return(s||l)&&(!l||!l.$stable)?!0:r===a?!1:r?a?ku(r,a,f):!0:!!a;return!1}function ku(e,t,n){const r=Object.keys(t);if(r.length!==Object.keys(e).length)return!0;for(let s=0;s<r.length;s++){const i=r[s];if(t[i]!==e[i]&&!Ki(n,i))return!0}return!1}function Pm({vnode:e,parent:t},n){for(;t;){const r=t.subTree;if(r.suspense&&r.suspense.activeBranch===e&&(r.el=e.el),r===e)(e=t.vnode).el=n,t=t.parent;else break}}const Vf=e=>e.__isSuspense;function Vm(e,t){t&&t.pendingBranch?at(e)?t.effects.push(...e):t.effects.push(e):Ug(e)}const Pe=Symbol.for("v-fgt"),Gi=Symbol.for("v-txt"),gs=Symbol.for("v-cmt"),xo=Symbol.for("v-stc"),ss=[];let Ee=null;function qe(e=!1){ss.push(Ee=e?null:[])}function Dm(){ss.pop(),Ee=ss[ss.length-1]||null}let ms=1;function Lu(e,t=!1){ms+=e,e<0&&Ee&&t&&(Ee.hasOnce=!0)}function Df(e){return e.dynamicChildren=ms>0?Ee||or:null,Dm(),ms>0&&Ee&&Ee.push(e),e}function Tn(e,t,n,r,s,i){return Df(fe(e,t,n,r,s,i,!0))}function xf(e,t,n,r,s){return Df(qt(e,t,n,r,s,!0))}function Ei(e){return e?e.__v_isVNode===!0:!1}function Kr(e,t){return e.type===t.type&&e.key===t.key}const Nf=({key:e})=>e??null,oi=({ref:e,ref_key:t,ref_for:n})=>(typeof e=="number"&&(e=""+e),e!=null?Bt(e)||ae(e)||ut(e)?{i:De,r:e,k:t,f:!!n}:e:null);function fe(e,t=null,n=null,r=0,s=null,i=e===Pe?0:1,a=!1,l=!1){const c={__v_isVNode:!0,__v_skip:!0,type:e,props:t,key:t&&Nf(t),ref:t&&oi(t),scopeId:af,slotScopeIds:null,children:n,component:null,suspense:null,ssContent:null,ssFallback:null,dirs:null,transition:null,el:null,anchor:null,target:null,targetStart:null,targetAnchor:null,staticCount:0,shapeFlag:i,patchFlag:r,dynamicProps:s,dynamicChildren:null,appContext:null,ctx:De};return l?(Qa(c,n),i&128&&e.normalize(c)):n&&(c.shapeFlag|=Bt(n)?8:16),ms>0&&!a&&Ee&&(c.patchFlag>0||i&6)&&c.patchFlag!==32&&Ee.push(c),c}const qt=xm;function xm(e,t=null,n=null,r=0,s=null,i=!1){if((!e||e===tm)&&(e=gs),Ei(e)){const l=gr(e,t,!0);return n&&Qa(l,n),ms>0&&!i&&Ee&&(l.shapeFlag&6?Ee[Ee.indexOf(e)]=l:Ee.push(l)),l.patchFlag=-2,l}if(qm(e)&&(e=e.__vccOpts),t){t=Nm(t);let{class:l,style:c}=t;l&&!Bt(l)&&(t.class=La(l)),Pt(c)&&(Ha(c)&&!at(c)&&(c=le({},c)),t.style=ka(c))}const a=Bt(e)?1:Vf(e)?128:$g(e)?64:Pt(e)?4:ut(e)?2:0;return fe(e,t,n,r,s,a,i,!0)}function Nm(e){return e?Ha(e)||yf(e)?le({},e):e:null}function gr(e,t,n=!1,r=!1){const{props:s,ref:i,patchFlag:a,children:l,transition:c}=e,f=t?Om(s||{},t):s,d={__v_isVNode:!0,__v_skip:!0,type:e.type,props:f,key:f&&Nf(f),ref:t&&t.ref?n&&i?at(i)?i.concat(oi(t)):[i,oi(t)]:oi(t):i,scopeId:e.scopeId,slotScopeIds:e.slotScopeIds,children:l,target:e.target,targetStart:e.targetStart,targetAnchor:e.targetAnchor,staticCount:e.staticCount,shapeFlag:e.shapeFlag,patchFlag:t&&e.type!==Pe?a===-1?16:a|16:a,dynamicProps:e.dynamicProps,dynamicChildren:e.dynamicChildren,appContext:e.appContext,dirs:e.dirs,transition:c,component:e.component,suspense:e.suspense,ssContent:e.ssContent&&gr(e.ssContent),ssFallback:e.ssFallback&&gr(e.ssFallback),el:e.el,anchor:e.anchor,ctx:e.ctx,ce:e.ce};return c&&r&&Ka(d,c.clone(d)),d}function ai(e=" ",t=0){return qt(Gi,null,e,t)}function Ue(e){return e==null||typeof e=="boolean"?qt(gs):at(e)?qt(Pe,null,e.slice()):Ei(e)?fn(e):qt(Gi,null,String(e))}function fn(e){return e.el===null&&e.patchFlag!==-1||e.memo?e:gr(e)}function Qa(e,t){let n=0;const{shapeFlag:r}=e;if(t==null)t=null;else if(at(t))n=16;else if(typeof t=="object")if(r&65){const s=t.default;s&&(s._c&&(s._d=!1),Qa(e,s()),s._c&&(s._d=!0));return}else{n=32;const s=t._;!s&&!yf(t)?t._ctx=De:s===3&&De&&(De.slots._===1?t._=1:(t._=2,e.patchFlag|=1024))}else ut(t)?(t={default:t,_ctx:De},n=32):(t=String(t),r&64?(n=16,t=[ai(t)]):n=8);e.children=t,e.shapeFlag|=n}function Om(...e){const t={};for(let n=0;n<e.length;n++){const r=e[n];for(const s in r)if(s==="class")t.class!==r.class&&(t.class=La([t.class,r.class]));else if(s==="style")t.style=ka([t.style,r.style]);else if(ki(s)){const i=t[s],a=r[s];a&&i!==a&&!(at(i)&&i.includes(a))&&(t[s]=i?[].concat(i,a):a)}else s!==""&&(t[s]=r[s])}return t}function ke(e,t,n,r=null){ze(e,t,7,[n,r])}const Mm=gf();let km=0;function Lm(e,t,n){const r=e.type,s=(t?t.appContext:e.appContext)||Mm,i={uid:km++,vnode:e,type:r,parent:t,appContext:s,root:null,next:null,subTree:null,effect:null,update:null,job:null,scope:new Mh(!0),render:null,proxy:null,exposed:null,exposeProxy:null,withProxy:null,provides:t?t.provides:Object.create(s.provides),ids:t?t.ids:["",0,0],accessCache:null,renderCache:[],components:null,directives:null,propsOptions:Ef(r,s),emitsOptions:Pf(r,s),emit:null,emitted:null,propsDefaults:St,inheritAttrs:r.inheritAttrs,ctx:St,data:St,props:St,attrs:St,slots:St,refs:St,setupState:St,setupContext:null,suspense:n,suspenseId:n?n.pendingId:0,asyncDep:null,asyncResolved:!1,isMounted:!1,isUnmounted:!1,isDeactivated:!1,bc:null,c:null,bm:null,m:null,bu:null,u:null,um:null,bum:null,da:null,a:null,rtg:null,rtc:null,ec:null,sp:null};return i.ctx={_:i},i.root=t?t.root:i,i.emit=Rm.bind(null,i),e.ce&&e.ce(i),i}let ie=null,Ti,na;{const e=Bi(),t=(n,r)=>{let s;return(s=e[n])||(s=e[n]=[]),s.push(r),i=>{s.length>1?s.forEach(a=>a(i)):s[0](i)}};Ti=t("__VUE_INSTANCE_SETTERS__",n=>ie=n),na=t("__VUE_SSR_SETTERS__",n=>_s=n)}const Ss=e=>{const t=ie;return Ti(e),e.scope.on(),()=>{e.scope.off(),Ti(t)}},Fu=()=>{ie&&ie.scope.off(),Ti(null)};function Of(e){return e.vnode.shapeFlag&4}let _s=!1;function Fm(e,t=!1,n=!1){t&&na(t);const{props:r,children:s}=e.vnode,i=Of(e);hm(e,r,i,t),gm(e,s,n);const a=i?Um(e,t):void 0;return t&&na(!1),a}function Um(e,t){const n=e.type;e.accessCache=Object.create(null),e.proxy=new Proxy(e.ctx,rm);const{setup:r}=n;if(r){Pn();const s=e.setupContext=r.length>1?$m(e):null,i=Ss(e),a=bs(r,e,0,[e.props,s]),l=Ch(a);if(Vn(),i(),(l||e.sp)&&!ns(e)&&lf(e),l){if(a.then(Fu,Fu),t)return a.then(c=>{Uu(e,c)}).catch(c=>{Hi(c,e,0)});e.asyncDep=a}else Uu(e,a)}else Mf(e)}function Uu(e,t,n){ut(t)?e.type.__ssrInlineRender?e.ssrRender=t:e.render=t:Pt(t)&&(e.setupState=tf(t)),Mf(e)}function Mf(e,t,n){const r=e.type;e.render||(e.render=r.render||$e);{const s=Ss(e);Pn();try{sm(e)}finally{Vn(),s()}}}const Bm={get(e,t){return ne(e,"get",""),e[t]}};function $m(e){const t=n=>{e.exposed=n||{}};return{attrs:new Proxy(e.attrs,Bm),slots:e.slots,emit:e.emit,expose:t}}function Ya(e){return e.exposed?e.exposeProxy||(e.exposeProxy=new Proxy(tf(Jh(e.exposed)),{get(t,n){if(n in t)return t[n];if(n in rs)return rs[n](e)},has(t,n){return n in t||n in rs}})):e.proxy}function jm(e,t=!0){return ut(e)?e.displayName||e.name:e.name||t&&e.__name}function qm(e){return ut(e)&&"__vccOpts"in e}const Ve=(e,t)=>Og(e,t,_s);function kf(e,t,n){const r=arguments.length;return r===2?Pt(t)&&!at(t)?Ei(t)?qt(e,null,[t]):qt(e,t):qt(e,null,t):(r>3?n=Array.prototype.slice.call(arguments,2):r===3&&Ei(n)&&(n=[n]),qt(e,t,n))}const Hm="3.5.13";/**
* @vue/runtime-dom v3.5.13
* (c) 2018-present Yuxi (Evan) You and Vue contributors
* @license MIT
**/let ra;const Bu=typeof window<"u"&&window.trustedTypes;if(Bu)try{ra=Bu.createPolicy("vue",{createHTML:e=>e})}catch{}const Lf=ra?e=>ra.createHTML(e):e=>e,zm="http://www.w3.org/2000/svg",Km="http://www.w3.org/1998/Math/MathML",Xe=typeof document<"u"?document:null,$u=Xe&&Xe.createElement("template"),Gm={insert:(e,t,n)=>{t.insertBefore(e,n||null)},remove:e=>{const t=e.parentNode;t&&t.removeChild(e)},createElement:(e,t,n,r)=>{const s=t==="svg"?Xe.createElementNS(zm,e):t==="mathml"?Xe.createElementNS(Km,e):n?Xe.createElement(e,{is:n}):Xe.createElement(e);return e==="select"&&r&&r.multiple!=null&&s.setAttribute("multiple",r.multiple),s},createText:e=>Xe.createTextNode(e),createComment:e=>Xe.createComment(e),setText:(e,t)=>{e.nodeValue=t},setElementText:(e,t)=>{e.textContent=t},parentNode:e=>e.parentNode,nextSibling:e=>e.nextSibling,querySelector:e=>Xe.querySelector(e),setScopeId(e,t){e.setAttribute(t,"")},insertStaticContent(e,t,n,r,s,i){const a=n?n.previousSibling:t.lastChild;if(s&&(s===i||s.nextSibling))for(;t.insertBefore(s.cloneNode(!0),n),!(s===i||!(s=s.nextSibling)););else{$u.innerHTML=Lf(r==="svg"?`<svg>${e}</svg>`:r==="mathml"?`<math>${e}</math>`:e);const l=$u.content;if(r==="svg"||r==="mathml"){const c=l.firstChild;for(;c.firstChild;)l.appendChild(c.firstChild);l.removeChild(c)}t.insertBefore(l,n)}return[a?a.nextSibling:t.firstChild,n?n.previousSibling:t.lastChild]}},Wm=Symbol("_vtc");function Qm(e,t,n){const r=e[Wm];r&&(t=(t?[t,...r]:[...r]).join(" ")),t==null?e.removeAttribute("class"):n?e.setAttribute("class",t):e.className=t}const ju=Symbol("_vod"),Ym=Symbol("_vsh"),Xm=Symbol(""),Jm=/(^|;)\s*display\s*:/;function Zm(e,t,n){const r=e.style,s=Bt(n);let i=!1;if(n&&!s){if(t)if(Bt(t))for(const a of t.split(";")){const l=a.slice(0,a.indexOf(":")).trim();n[l]==null&&li(r,l,"")}else for(const a in t)n[a]==null&&li(r,a,"");for(const a in n)a==="display"&&(i=!0),li(r,a,n[a])}else if(s){if(t!==n){const a=r[Xm];a&&(n+=";"+a),r.cssText=n,i=Jm.test(n)}}else t&&e.removeAttribute("style");ju in e&&(e[ju]=i?r.display:"",e[Ym]&&(r.display="none"))}const qu=/\s*!important$/;function li(e,t,n){if(at(n))n.forEach(r=>li(e,t,r));else if(n==null&&(n=""),t.startsWith("--"))e.setProperty(t,n);else{const r=t_(e,t);qu.test(n)?e.setProperty(Kn(r),n.replace(qu,""),"important"):e[r]=n}}const Hu=["Webkit","Moz","ms"],No={};function t_(e,t){const n=No[t];if(n)return n;let r=be(t);if(r!=="filter"&&r in e)return No[t]=r;r=Ui(r);for(let s=0;s<Hu.length;s++){const i=Hu[s]+r;if(i in e)return No[t]=i}return t}const zu="http://www.w3.org/1999/xlink";function Ku(e,t,n,r,s,i=ug(t)){r&&t.startsWith("xlink:")?n==null?e.removeAttributeNS(zu,t.slice(6,t.length)):e.setAttributeNS(zu,t,n):n==null||i&&!xh(n)?e.removeAttribute(t):e.setAttribute(t,i?"":Cn(n)?String(n):n)}function Gu(e,t,n,r,s){if(t==="innerHTML"||t==="textContent"){n!=null&&(e[t]=t==="innerHTML"?Lf(n):n);return}const i=e.tagName;if(t==="value"&&i!=="PROGRESS"&&!i.includes("-")){const l=i==="OPTION"?e.getAttribute("value")||"":e.value,c=n==null?e.type==="checkbox"?"on":"":String(n);(l!==c||!("_value"in e))&&(e.value=c),n==null&&e.removeAttribute(t),e._value=n;return}let a=!1;if(n===""||n==null){const l=typeof e[t];l==="boolean"?n=xh(n):n==null&&l==="string"?(n="",a=!0):l==="number"&&(n=0,a=!0)}try{e[t]=n}catch{}a&&e.removeAttribute(s||t)}function e_(e,t,n,r){e.addEventListener(t,n,r)}function n_(e,t,n,r){e.removeEventListener(t,n,r)}const Wu=Symbol("_vei");function r_(e,t,n,r,s=null){const i=e[Wu]||(e[Wu]={}),a=i[t];if(r&&a)a.value=r;else{const[l,c]=s_(t);if(r){const f=i[t]=a_(r,s);e_(e,l,f,c)}else a&&(n_(e,l,a,c),i[t]=void 0)}}const Qu=/(?:Once|Passive|Capture)$/;function s_(e){let t;if(Qu.test(e)){t={};let r;for(;r=e.match(Qu);)e=e.slice(0,e.length-r[0].length),t[r[0].toLowerCase()]=!0}return[e[2]===":"?e.slice(3):Kn(e.slice(2)),t]}let Oo=0;const i_=Promise.resolve(),o_=()=>Oo||(i_.then(()=>Oo=0),Oo=Date.now());function a_(e,t){const n=r=>{if(!r._vts)r._vts=Date.now();else if(r._vts<=n.attached)return;ze(l_(r,n.value),t,5,[r])};return n.value=e,n.attached=o_(),n}function l_(e,t){if(at(t)){const n=e.stopImmediatePropagation;return e.stopImmediatePropagation=()=>{n.call(e),e._stopped=!0},t.map(r=>s=>!s._stopped&&r&&r(s))}else return t}const Yu=e=>e.charCodeAt(0)===111&&e.charCodeAt(1)===110&&e.charCodeAt(2)>96&&e.charCodeAt(2)<123,u_=(e,t,n,r,s,i)=>{const a=s==="svg";t==="class"?Qm(e,r,a):t==="style"?Zm(e,n,r):ki(t)?Na(t)||r_(e,t,n,r,i):(t[0]==="."?(t=t.slice(1),!0):t[0]==="^"?(t=t.slice(1),!1):c_(e,t,r,a))?(Gu(e,t,r),!e.tagName.includes("-")&&(t==="value"||t==="checked"||t==="selected")&&Ku(e,t,r,a,i,t!=="value")):e._isVueCE&&(/[A-Z]/.test(t)||!Bt(r))?Gu(e,be(t),r,i,t):(t==="true-value"?e._trueValue=r:t==="false-value"&&(e._falseValue=r),Ku(e,t,r,a))};function c_(e,t,n,r){if(r)return!!(t==="innerHTML"||t==="textContent"||t in e&&Yu(t)&&ut(n));if(t==="spellcheck"||t==="draggable"||t==="translate"||t==="form"||t==="list"&&e.tagName==="INPUT"||t==="type"&&e.tagName==="TEXTAREA")return!1;if(t==="width"||t==="height"){const s=e.tagName;if(s==="IMG"||s==="VIDEO"||s==="CANVAS"||s==="SOURCE")return!1}return Yu(t)&&Bt(n)?!1:t in e}const h_=le({patchProp:u_},Gm);let Xu;function f_(){return Xu||(Xu=_m(h_))}const d_=(...e)=>{const t=f_().createApp(...e),{mount:n}=t;return t.mount=r=>{const s=g_(r);if(!s)return;const i=t._component;!ut(i)&&!i.render&&!i.template&&(i.template=s.innerHTML),s.nodeType===1&&(s.textContent="");const a=n(s,!1,p_(s));return s instanceof Element&&(s.removeAttribute("v-cloak"),s.setAttribute("data-v-app","")),a},t};function p_(e){if(e instanceof SVGElement)return"svg";if(typeof MathMLElement=="function"&&e instanceof MathMLElement)return"mathml"}function g_(e){return Bt(e)?document.querySelector(e):e}/*!
 * pinia v3.0.2
 * (c) 2025 Eduardo San Martin Morote
 * @license MIT
 */const m_=Symbol();var Ju;(function(e){e.direct="direct",e.patchObject="patch object",e.patchFunction="patch function"})(Ju||(Ju={}));function __(){const e=cg(!0),t=e.run(()=>qi({}));let n=[],r=[];const s=Jh({install(i){s._a=i,i.provide(m_,s),i.config.globalProperties.$pinia=s,r.forEach(a=>n.push(a)),r=[]},use(i){return this._a?n.push(i):r.push(i),this},_p:n,_a:null,_e:e,_s:new Map,state:t});return s}const Cs=(e,t)=>{const n=e.__vccOpts||e;for(const[r,s]of t)n[r]=s;return n},y_={};function v_(e,t){const n=ff("router-view");return qe(),xf(n)}const E_=Cs(y_,[["render",v_]]);/*!
  * vue-router v4.5.1
  * (c) 2025 Eduardo San Martin Morote
  * @license MIT
  */const er=typeof document<"u";function Ff(e){return typeof e=="object"||"displayName"in e||"props"in e||"__vccOpts"in e}function T_(e){return e.__esModule||e[Symbol.toStringTag]==="Module"||e.default&&Ff(e.default)}const wt=Object.assign;function Mo(e,t){const n={};for(const r in t){const s=t[r];n[r]=Ne(s)?s.map(e):e(s)}return n}const is=()=>{},Ne=Array.isArray,Uf=/#/g,w_=/&/g,I_=/\//g,A_=/=/g,R_=/\?/g,Bf=/\+/g,b_=/%5B/g,S_=/%5D/g,$f=/%5E/g,C_=/%60/g,jf=/%7B/g,P_=/%7C/g,qf=/%7D/g,V_=/%20/g;function Xa(e){return encodeURI(""+e).replace(P_,"|").replace(b_,"[").replace(S_,"]")}function D_(e){return Xa(e).replace(jf,"{").replace(qf,"}").replace($f,"^")}function sa(e){return Xa(e).replace(Bf,"%2B").replace(V_,"+").replace(Uf,"%23").replace(w_,"%26").replace(C_,"`").replace(jf,"{").replace(qf,"}").replace($f,"^")}function x_(e){return sa(e).replace(A_,"%3D")}function N_(e){return Xa(e).replace(Uf,"%23").replace(R_,"%3F")}function O_(e){return e==null?"":N_(e).replace(I_,"%2F")}function ys(e){try{return decodeURIComponent(""+e)}catch{}return""+e}const M_=/\/$/,k_=e=>e.replace(M_,"");function ko(e,t,n="/"){let r,s={},i="",a="";const l=t.indexOf("#");let c=t.indexOf("?");return l<c&&l>=0&&(c=-1),c>-1&&(r=t.slice(0,c),i=t.slice(c+1,l>-1?l:t.length),s=e(i)),l>-1&&(r=r||t.slice(0,l),a=t.slice(l,t.length)),r=B_(r??t,n),{fullPath:r+(i&&"?")+i+a,path:r,query:s,hash:ys(a)}}function L_(e,t){const n=t.query?e(t.query):"";return t.path+(n&&"?")+n+(t.hash||"")}function Zu(e,t){return!t||!e.toLowerCase().startsWith(t.toLowerCase())?e:e.slice(t.length)||"/"}function F_(e,t,n){const r=t.matched.length-1,s=n.matched.length-1;return r>-1&&r===s&&mr(t.matched[r],n.matched[s])&&Hf(t.params,n.params)&&e(t.query)===e(n.query)&&t.hash===n.hash}function mr(e,t){return(e.aliasOf||e)===(t.aliasOf||t)}function Hf(e,t){if(Object.keys(e).length!==Object.keys(t).length)return!1;for(const n in e)if(!U_(e[n],t[n]))return!1;return!0}function U_(e,t){return Ne(e)?tc(e,t):Ne(t)?tc(t,e):e===t}function tc(e,t){return Ne(t)?e.length===t.length&&e.every((n,r)=>n===t[r]):e.length===1&&e[0]===t}function B_(e,t){if(e.startsWith("/"))return e;if(!e)return t;const n=t.split("/"),r=e.split("/"),s=r[r.length-1];(s===".."||s===".")&&r.push("");let i=n.length-1,a,l;for(a=0;a<r.length;a++)if(l=r[a],l!==".")if(l==="..")i>1&&i--;else break;return n.slice(0,i).join("/")+"/"+r.slice(a).join("/")}const cn={path:"/",name:void 0,params:{},query:{},hash:"",fullPath:"/",matched:[],meta:{},redirectedFrom:void 0};var vs;(function(e){e.pop="pop",e.push="push"})(vs||(vs={}));var os;(function(e){e.back="back",e.forward="forward",e.unknown=""})(os||(os={}));function $_(e){if(!e)if(er){const t=document.querySelector("base");e=t&&t.getAttribute("href")||"/",e=e.replace(/^\w+:\/\/[^\/]+/,"")}else e="/";return e[0]!=="/"&&e[0]!=="#"&&(e="/"+e),k_(e)}const j_=/^[^#]+#/;function q_(e,t){return e.replace(j_,"#")+t}function H_(e,t){const n=document.documentElement.getBoundingClientRect(),r=e.getBoundingClientRect();return{behavior:t.behavior,left:r.left-n.left-(t.left||0),top:r.top-n.top-(t.top||0)}}const Wi=()=>({left:window.scrollX,top:window.scrollY});function z_(e){let t;if("el"in e){const n=e.el,r=typeof n=="string"&&n.startsWith("#"),s=typeof n=="string"?r?document.getElementById(n.slice(1)):document.querySelector(n):n;if(!s)return;t=H_(s,e)}else t=e;"scrollBehavior"in document.documentElement.style?window.scrollTo(t):window.scrollTo(t.left!=null?t.left:window.scrollX,t.top!=null?t.top:window.scrollY)}function ec(e,t){return(history.state?history.state.position-t:-1)+e}const ia=new Map;function K_(e,t){ia.set(e,t)}function G_(e){const t=ia.get(e);return ia.delete(e),t}let W_=()=>location.protocol+"//"+location.host;function zf(e,t){const{pathname:n,search:r,hash:s}=t,i=e.indexOf("#");if(i>-1){let l=s.includes(e.slice(i))?e.slice(i).length:1,c=s.slice(l);return c[0]!=="/"&&(c="/"+c),Zu(c,"")}return Zu(n,e)+r+s}function Q_(e,t,n,r){let s=[],i=[],a=null;const l=({state:m})=>{const T=zf(e,location),V=n.value,N=t.value;let L=0;if(m){if(n.value=T,t.value=m,a&&a===V){a=null;return}L=N?m.position-N.position:0}else r(T);s.forEach(G=>{G(n.value,V,{delta:L,type:vs.pop,direction:L?L>0?os.forward:os.back:os.unknown})})};function c(){a=n.value}function f(m){s.push(m);const T=()=>{const V=s.indexOf(m);V>-1&&s.splice(V,1)};return i.push(T),T}function d(){const{history:m}=window;m.state&&m.replaceState(wt({},m.state,{scroll:Wi()}),"")}function p(){for(const m of i)m();i=[],window.removeEventListener("popstate",l),window.removeEventListener("beforeunload",d)}return window.addEventListener("popstate",l),window.addEventListener("beforeunload",d,{passive:!0}),{pauseListeners:c,listen:f,destroy:p}}function nc(e,t,n,r=!1,s=!1){return{back:e,current:t,forward:n,replaced:r,position:window.history.length,scroll:s?Wi():null}}function Y_(e){const{history:t,location:n}=window,r={value:zf(e,n)},s={value:t.state};s.value||i(r.value,{back:null,current:r.value,forward:null,position:t.length-1,replaced:!0,scroll:null},!0);function i(c,f,d){const p=e.indexOf("#"),m=p>-1?(n.host&&document.querySelector("base")?e:e.slice(p))+c:W_()+e+c;try{t[d?"replaceState":"pushState"](f,"",m),s.value=f}catch(T){console.error(T),n[d?"replace":"assign"](m)}}function a(c,f){const d=wt({},t.state,nc(s.value.back,c,s.value.forward,!0),f,{position:s.value.position});i(c,d,!0),r.value=c}function l(c,f){const d=wt({},s.value,t.state,{forward:c,scroll:Wi()});i(d.current,d,!0);const p=wt({},nc(r.value,c,null),{position:d.position+1},f);i(c,p,!1),r.value=c}return{location:r,state:s,push:l,replace:a}}function X_(e){e=$_(e);const t=Y_(e),n=Q_(e,t.state,t.location,t.replace);function r(i,a=!0){a||n.pauseListeners(),history.go(i)}const s=wt({location:"",base:e,go:r,createHref:q_.bind(null,e)},t,n);return Object.defineProperty(s,"location",{enumerable:!0,get:()=>t.location.value}),Object.defineProperty(s,"state",{enumerable:!0,get:()=>t.state.value}),s}function J_(e){return typeof e=="string"||e&&typeof e=="object"}function Kf(e){return typeof e=="string"||typeof e=="symbol"}const Gf=Symbol("");var rc;(function(e){e[e.aborted=4]="aborted",e[e.cancelled=8]="cancelled",e[e.duplicated=16]="duplicated"})(rc||(rc={}));function _r(e,t){return wt(new Error,{type:e,[Gf]:!0},t)}function Ye(e,t){return e instanceof Error&&Gf in e&&(t==null||!!(e.type&t))}const sc="[^/]+?",Z_={sensitive:!1,strict:!1,start:!0,end:!0},ty=/[.+*?^${}()[\]/\\]/g;function ey(e,t){const n=wt({},Z_,t),r=[];let s=n.start?"^":"";const i=[];for(const f of e){const d=f.length?[]:[90];n.strict&&!f.length&&(s+="/");for(let p=0;p<f.length;p++){const m=f[p];let T=40+(n.sensitive?.25:0);if(m.type===0)p||(s+="/"),s+=m.value.replace(ty,"\\$&"),T+=40;else if(m.type===1){const{value:V,repeatable:N,optional:L,regexp:G}=m;i.push({name:V,repeatable:N,optional:L});const U=G||sc;if(U!==sc){T+=10;try{new RegExp(`(${U})`)}catch(z){throw new Error(`Invalid custom RegExp for param "${V}" (${U}): `+z.message)}}let H=N?`((?:${U})(?:/(?:${U}))*)`:`(${U})`;p||(H=L&&f.length<2?`(?:/${H})`:"/"+H),L&&(H+="?"),s+=H,T+=20,L&&(T+=-8),N&&(T+=-20),U===".*"&&(T+=-50)}d.push(T)}r.push(d)}if(n.strict&&n.end){const f=r.length-1;r[f][r[f].length-1]+=.7000000000000001}n.strict||(s+="/?"),n.end?s+="$":n.strict&&!s.endsWith("/")&&(s+="(?:/|$)");const a=new RegExp(s,n.sensitive?"":"i");function l(f){const d=f.match(a),p={};if(!d)return null;for(let m=1;m<d.length;m++){const T=d[m]||"",V=i[m-1];p[V.name]=T&&V.repeatable?T.split("/"):T}return p}function c(f){let d="",p=!1;for(const m of e){(!p||!d.endsWith("/"))&&(d+="/"),p=!1;for(const T of m)if(T.type===0)d+=T.value;else if(T.type===1){const{value:V,repeatable:N,optional:L}=T,G=V in f?f[V]:"";if(Ne(G)&&!N)throw new Error(`Provided param "${V}" is an array but it is not repeatable (* or + modifiers)`);const U=Ne(G)?G.join("/"):G;if(!U)if(L)m.length<2&&(d.endsWith("/")?d=d.slice(0,-1):p=!0);else throw new Error(`Missing required param "${V}"`);d+=U}}return d||"/"}return{re:a,score:r,keys:i,parse:l,stringify:c}}function ny(e,t){let n=0;for(;n<e.length&&n<t.length;){const r=t[n]-e[n];if(r)return r;n++}return e.length<t.length?e.length===1&&e[0]===80?-1:1:e.length>t.length?t.length===1&&t[0]===80?1:-1:0}function Wf(e,t){let n=0;const r=e.score,s=t.score;for(;n<r.length&&n<s.length;){const i=ny(r[n],s[n]);if(i)return i;n++}if(Math.abs(s.length-r.length)===1){if(ic(r))return 1;if(ic(s))return-1}return s.length-r.length}function ic(e){const t=e[e.length-1];return e.length>0&&t[t.length-1]<0}const ry={type:0,value:""},sy=/[a-zA-Z0-9_]/;function iy(e){if(!e)return[[]];if(e==="/")return[[ry]];if(!e.startsWith("/"))throw new Error(`Invalid path "${e}"`);function t(T){throw new Error(`ERR (${n})/"${f}": ${T}`)}let n=0,r=n;const s=[];let i;function a(){i&&s.push(i),i=[]}let l=0,c,f="",d="";function p(){f&&(n===0?i.push({type:0,value:f}):n===1||n===2||n===3?(i.length>1&&(c==="*"||c==="+")&&t(`A repeatable param (${f}) must be alone in its segment. eg: '/:ids+.`),i.push({type:1,value:f,regexp:d,repeatable:c==="*"||c==="+",optional:c==="*"||c==="?"})):t("Invalid state to consume buffer"),f="")}function m(){f+=c}for(;l<e.length;){if(c=e[l++],c==="\\"&&n!==2){r=n,n=4;continue}switch(n){case 0:c==="/"?(f&&p(),a()):c===":"?(p(),n=1):m();break;case 4:m(),n=r;break;case 1:c==="("?n=2:sy.test(c)?m():(p(),n=0,c!=="*"&&c!=="?"&&c!=="+"&&l--);break;case 2:c===")"?d[d.length-1]=="\\"?d=d.slice(0,-1)+c:n=3:d+=c;break;case 3:p(),n=0,c!=="*"&&c!=="?"&&c!=="+"&&l--,d="";break;default:t("Unknown state");break}}return n===2&&t(`Unfinished custom RegExp for param "${f}"`),p(),a(),s}function oy(e,t,n){const r=ey(iy(e.path),n),s=wt(r,{record:e,parent:t,children:[],alias:[]});return t&&!s.record.aliasOf==!t.record.aliasOf&&t.children.push(s),s}function ay(e,t){const n=[],r=new Map;t=uc({strict:!1,end:!0,sensitive:!1},t);function s(p){return r.get(p)}function i(p,m,T){const V=!T,N=ac(p);N.aliasOf=T&&T.record;const L=uc(t,p),G=[N];if("alias"in p){const z=typeof p.alias=="string"?[p.alias]:p.alias;for(const ht of z)G.push(ac(wt({},N,{components:T?T.record.components:N.components,path:ht,aliasOf:T?T.record:N})))}let U,H;for(const z of G){const{path:ht}=z;if(m&&ht[0]!=="/"){const dt=m.record.path,I=dt[dt.length-1]==="/"?"":"/";z.path=m.record.path+(ht&&I+ht)}if(U=oy(z,m,L),T?T.alias.push(U):(H=H||U,H!==U&&H.alias.push(U),V&&p.name&&!lc(U)&&a(p.name)),Qf(U)&&c(U),N.children){const dt=N.children;for(let I=0;I<dt.length;I++)i(dt[I],U,T&&T.children[I])}T=T||U}return H?()=>{a(H)}:is}function a(p){if(Kf(p)){const m=r.get(p);m&&(r.delete(p),n.splice(n.indexOf(m),1),m.children.forEach(a),m.alias.forEach(a))}else{const m=n.indexOf(p);m>-1&&(n.splice(m,1),p.record.name&&r.delete(p.record.name),p.children.forEach(a),p.alias.forEach(a))}}function l(){return n}function c(p){const m=cy(p,n);n.splice(m,0,p),p.record.name&&!lc(p)&&r.set(p.record.name,p)}function f(p,m){let T,V={},N,L;if("name"in p&&p.name){if(T=r.get(p.name),!T)throw _r(1,{location:p});L=T.record.name,V=wt(oc(m.params,T.keys.filter(H=>!H.optional).concat(T.parent?T.parent.keys.filter(H=>H.optional):[]).map(H=>H.name)),p.params&&oc(p.params,T.keys.map(H=>H.name))),N=T.stringify(V)}else if(p.path!=null)N=p.path,T=n.find(H=>H.re.test(N)),T&&(V=T.parse(N),L=T.record.name);else{if(T=m.name?r.get(m.name):n.find(H=>H.re.test(m.path)),!T)throw _r(1,{location:p,currentLocation:m});L=T.record.name,V=wt({},m.params,p.params),N=T.stringify(V)}const G=[];let U=T;for(;U;)G.unshift(U.record),U=U.parent;return{name:L,path:N,params:V,matched:G,meta:uy(G)}}e.forEach(p=>i(p));function d(){n.length=0,r.clear()}return{addRoute:i,resolve:f,removeRoute:a,clearRoutes:d,getRoutes:l,getRecordMatcher:s}}function oc(e,t){const n={};for(const r of t)r in e&&(n[r]=e[r]);return n}function ac(e){const t={path:e.path,redirect:e.redirect,name:e.name,meta:e.meta||{},aliasOf:e.aliasOf,beforeEnter:e.beforeEnter,props:ly(e),children:e.children||[],instances:{},leaveGuards:new Set,updateGuards:new Set,enterCallbacks:{},components:"components"in e?e.components||null:e.component&&{default:e.component}};return Object.defineProperty(t,"mods",{value:{}}),t}function ly(e){const t={},n=e.props||!1;if("component"in e)t.default=n;else for(const r in e.components)t[r]=typeof n=="object"?n[r]:n;return t}function lc(e){for(;e;){if(e.record.aliasOf)return!0;e=e.parent}return!1}function uy(e){return e.reduce((t,n)=>wt(t,n.meta),{})}function uc(e,t){const n={};for(const r in e)n[r]=r in t?t[r]:e[r];return n}function cy(e,t){let n=0,r=t.length;for(;n!==r;){const i=n+r>>1;Wf(e,t[i])<0?r=i:n=i+1}const s=hy(e);return s&&(r=t.lastIndexOf(s,r-1)),r}function hy(e){let t=e;for(;t=t.parent;)if(Qf(t)&&Wf(e,t)===0)return t}function Qf({record:e}){return!!(e.name||e.components&&Object.keys(e.components).length||e.redirect)}function fy(e){const t={};if(e===""||e==="?")return t;const r=(e[0]==="?"?e.slice(1):e).split("&");for(let s=0;s<r.length;++s){const i=r[s].replace(Bf," "),a=i.indexOf("="),l=ys(a<0?i:i.slice(0,a)),c=a<0?null:ys(i.slice(a+1));if(l in t){let f=t[l];Ne(f)||(f=t[l]=[f]),f.push(c)}else t[l]=c}return t}function cc(e){let t="";for(let n in e){const r=e[n];if(n=x_(n),r==null){r!==void 0&&(t+=(t.length?"&":"")+n);continue}(Ne(r)?r.map(i=>i&&sa(i)):[r&&sa(r)]).forEach(i=>{i!==void 0&&(t+=(t.length?"&":"")+n,i!=null&&(t+="="+i))})}return t}function dy(e){const t={};for(const n in e){const r=e[n];r!==void 0&&(t[n]=Ne(r)?r.map(s=>s==null?null:""+s):r==null?r:""+r)}return t}const py=Symbol(""),hc=Symbol(""),Ja=Symbol(""),Za=Symbol(""),oa=Symbol("");function Gr(){let e=[];function t(r){return e.push(r),()=>{const s=e.indexOf(r);s>-1&&e.splice(s,1)}}function n(){e=[]}return{add:t,list:()=>e.slice(),reset:n}}function dn(e,t,n,r,s,i=a=>a()){const a=r&&(r.enterCallbacks[s]=r.enterCallbacks[s]||[]);return()=>new Promise((l,c)=>{const f=m=>{m===!1?c(_r(4,{from:n,to:t})):m instanceof Error?c(m):J_(m)?c(_r(2,{from:t,to:m})):(a&&r.enterCallbacks[s]===a&&typeof m=="function"&&a.push(m),l())},d=i(()=>e.call(r&&r.instances[s],t,n,f));let p=Promise.resolve(d);e.length<3&&(p=p.then(f)),p.catch(m=>c(m))})}function Lo(e,t,n,r,s=i=>i()){const i=[];for(const a of e)for(const l in a.components){let c=a.components[l];if(!(t!=="beforeRouteEnter"&&!a.instances[l]))if(Ff(c)){const d=(c.__vccOpts||c)[t];d&&i.push(dn(d,n,r,a,l,s))}else{let f=c();i.push(()=>f.then(d=>{if(!d)throw new Error(`Couldn't resolve component "${l}" at "${a.path}"`);const p=T_(d)?d.default:d;a.mods[l]=d,a.components[l]=p;const T=(p.__vccOpts||p)[t];return T&&dn(T,n,r,a,l,s)()}))}}return i}function fc(e){const t=je(Ja),n=je(Za),r=Ve(()=>{const c=Ze(e.to);return t.resolve(c)}),s=Ve(()=>{const{matched:c}=r.value,{length:f}=c,d=c[f-1],p=n.matched;if(!d||!p.length)return-1;const m=p.findIndex(mr.bind(null,d));if(m>-1)return m;const T=dc(c[f-2]);return f>1&&dc(d)===T&&p[p.length-1].path!==T?p.findIndex(mr.bind(null,c[f-2])):m}),i=Ve(()=>s.value>-1&&yy(n.params,r.value.params)),a=Ve(()=>s.value>-1&&s.value===n.matched.length-1&&Hf(n.params,r.value.params));function l(c={}){if(_y(c)){const f=t[Ze(e.replace)?"replace":"push"](Ze(e.to)).catch(is);return e.viewTransition&&typeof document<"u"&&"startViewTransition"in document&&document.startViewTransition(()=>f),f}return Promise.resolve()}return{route:r,href:Ve(()=>r.value.href),isActive:i,isExactActive:a,navigate:l}}function gy(e){return e.length===1?e[0]:e}const my=Gn({name:"RouterLink",compatConfig:{MODE:3},props:{to:{type:[String,Object],required:!0},replace:Boolean,activeClass:String,exactActiveClass:String,custom:Boolean,ariaCurrentValue:{type:String,default:"page"},viewTransition:Boolean},useLink:fc,setup(e,{slots:t}){const n=ji(fc(e)),{options:r}=je(Ja),s=Ve(()=>({[pc(e.activeClass,r.linkActiveClass,"router-link-active")]:n.isActive,[pc(e.exactActiveClass,r.linkExactActiveClass,"router-link-exact-active")]:n.isExactActive}));return()=>{const i=t.default&&gy(t.default(n));return e.custom?i:kf("a",{"aria-current":n.isExactActive?e.ariaCurrentValue:null,href:n.href,onClick:n.navigate,class:s.value},i)}}}),ui=my;function _y(e){if(!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)&&!e.defaultPrevented&&!(e.button!==void 0&&e.button!==0)){if(e.currentTarget&&e.currentTarget.getAttribute){const t=e.currentTarget.getAttribute("target");if(/\b_blank\b/i.test(t))return}return e.preventDefault&&e.preventDefault(),!0}}function yy(e,t){for(const n in t){const r=t[n],s=e[n];if(typeof r=="string"){if(r!==s)return!1}else if(!Ne(s)||s.length!==r.length||r.some((i,a)=>i!==s[a]))return!1}return!0}function dc(e){return e?e.aliasOf?e.aliasOf.path:e.path:""}const pc=(e,t,n)=>e??t??n,vy=Gn({name:"RouterView",inheritAttrs:!1,props:{name:{type:String,default:"default"},route:Object},compatConfig:{MODE:3},setup(e,{attrs:t,slots:n}){const r=je(oa),s=Ve(()=>e.route||r.value),i=je(hc,0),a=Ve(()=>{let f=Ze(i);const{matched:d}=s.value;let p;for(;(p=d[f])&&!p.components;)f++;return f}),l=Ve(()=>s.value.matched[a.value]);si(hc,Ve(()=>a.value+1)),si(py,l),si(oa,s);const c=qi();return ii(()=>[c.value,l.value,e.name],([f,d,p],[m,T,V])=>{d&&(d.instances[p]=f,T&&T!==d&&f&&f===m&&(d.leaveGuards.size||(d.leaveGuards=T.leaveGuards),d.updateGuards.size||(d.updateGuards=T.updateGuards))),f&&d&&(!T||!mr(d,T)||!m)&&(d.enterCallbacks[p]||[]).forEach(N=>N(f))},{flush:"post"}),()=>{const f=s.value,d=e.name,p=l.value,m=p&&p.components[d];if(!m)return gc(n.default,{Component:m,route:f});const T=p.props[d],V=T?T===!0?f.params:typeof T=="function"?T(f):T:null,L=kf(m,wt({},V,t,{onVnodeUnmounted:G=>{G.component.isUnmounted&&(p.instances[d]=null)},ref:c}));return gc(n.default,{Component:L,route:f})||L}}});function gc(e,t){if(!e)return null;const n=e(t);return n.length===1?n[0]:n}const Ey=vy;function Ty(e){const t=ay(e.routes,e),n=e.parseQuery||fy,r=e.stringifyQuery||cc,s=e.history,i=Gr(),a=Gr(),l=Gr(),c=Vg(cn);let f=cn;er&&e.scrollBehavior&&"scrollRestoration"in history&&(history.scrollRestoration="manual");const d=Mo.bind(null,D=>""+D),p=Mo.bind(null,O_),m=Mo.bind(null,ys);function T(D,Y){let W,J;return Kf(D)?(W=t.getRecordMatcher(D),J=Y):J=D,t.addRoute(J,W)}function V(D){const Y=t.getRecordMatcher(D);Y&&t.removeRoute(Y)}function N(){return t.getRoutes().map(D=>D.record)}function L(D){return!!t.getRecordMatcher(D)}function G(D,Y){if(Y=wt({},Y||c.value),typeof D=="string"){const b=ko(n,D,Y.path),x=t.resolve({path:b.path},Y),k=s.createHref(b.fullPath);return wt(b,x,{params:m(x.params),hash:ys(b.hash),redirectedFrom:void 0,href:k})}let W;if(D.path!=null)W=wt({},D,{path:ko(n,D.path,Y.path).path});else{const b=wt({},D.params);for(const x in b)b[x]==null&&delete b[x];W=wt({},D,{params:p(b)}),Y.params=p(Y.params)}const J=t.resolve(W,Y),Et=D.hash||"";J.params=d(m(J.params));const _=L_(r,wt({},D,{hash:D_(Et),path:J.path})),v=s.createHref(_);return wt({fullPath:_,hash:Et,query:r===cc?dy(D.query):D.query||{}},J,{redirectedFrom:void 0,href:v})}function U(D){return typeof D=="string"?ko(n,D,c.value.path):wt({},D)}function H(D,Y){if(f!==D)return _r(8,{from:Y,to:D})}function z(D){return I(D)}function ht(D){return z(wt(U(D),{replace:!0}))}function dt(D){const Y=D.matched[D.matched.length-1];if(Y&&Y.redirect){const{redirect:W}=Y;let J=typeof W=="function"?W(D):W;return typeof J=="string"&&(J=J.includes("?")||J.includes("#")?J=U(J):{path:J},J.params={}),wt({query:D.query,hash:D.hash,params:J.path!=null?{}:D.params},J)}}function I(D,Y){const W=f=G(D),J=c.value,Et=D.state,_=D.force,v=D.replace===!0,b=dt(W);if(b)return I(wt(U(b),{state:typeof b=="object"?wt({},Et,b.state):Et,force:_,replace:v}),Y||W);const x=W;x.redirectedFrom=Y;let k;return!_&&F_(r,J,W)&&(k=_r(16,{to:x,from:J}),we(J,J,!0,!1)),(k?Promise.resolve(k):A(x,J)).catch(O=>Ye(O)?Ye(O,2)?O:Se(O):ft(O,x,J)).then(O=>{if(O){if(Ye(O,2))return I(wt({replace:v},U(O.to),{state:typeof O.to=="object"?wt({},Et,O.to.state):Et,force:_}),Y||x)}else O=S(x,J,!0,v,Et);return R(x,J,O),O})}function y(D,Y){const W=H(D,Y);return W?Promise.reject(W):Promise.resolve()}function w(D){const Y=sn.values().next().value;return Y&&typeof Y.runWithContext=="function"?Y.runWithContext(D):D()}function A(D,Y){let W;const[J,Et,_]=wy(D,Y);W=Lo(J.reverse(),"beforeRouteLeave",D,Y);for(const b of J)b.leaveGuards.forEach(x=>{W.push(dn(x,D,Y))});const v=y.bind(null,D,Y);return W.push(v),pe(W).then(()=>{W=[];for(const b of i.list())W.push(dn(b,D,Y));return W.push(v),pe(W)}).then(()=>{W=Lo(Et,"beforeRouteUpdate",D,Y);for(const b of Et)b.updateGuards.forEach(x=>{W.push(dn(x,D,Y))});return W.push(v),pe(W)}).then(()=>{W=[];for(const b of _)if(b.beforeEnter)if(Ne(b.beforeEnter))for(const x of b.beforeEnter)W.push(dn(x,D,Y));else W.push(dn(b.beforeEnter,D,Y));return W.push(v),pe(W)}).then(()=>(D.matched.forEach(b=>b.enterCallbacks={}),W=Lo(_,"beforeRouteEnter",D,Y,w),W.push(v),pe(W))).then(()=>{W=[];for(const b of a.list())W.push(dn(b,D,Y));return W.push(v),pe(W)}).catch(b=>Ye(b,8)?b:Promise.reject(b))}function R(D,Y,W){l.list().forEach(J=>w(()=>J(D,Y,W)))}function S(D,Y,W,J,Et){const _=H(D,Y);if(_)return _;const v=Y===cn,b=er?history.state:{};W&&(J||v?s.replace(D.fullPath,wt({scroll:v&&b&&b.scroll},Et)):s.push(D.fullPath,Et)),c.value=D,we(D,Y,W,v),Se()}let E;function ue(){E||(E=s.listen((D,Y,W)=>{if(!Me.listening)return;const J=G(D),Et=dt(J);if(Et){I(wt(Et,{replace:!0,force:!0}),J).catch(is);return}f=J;const _=c.value;er&&K_(ec(_.fullPath,W.delta),Wi()),A(J,_).catch(v=>Ye(v,12)?v:Ye(v,2)?(I(wt(U(v.to),{force:!0}),J).then(b=>{Ye(b,20)&&!W.delta&&W.type===vs.pop&&s.go(-1,!1)}).catch(is),Promise.reject()):(W.delta&&s.go(-W.delta,!1),ft(v,J,_))).then(v=>{v=v||S(J,_,!1),v&&(W.delta&&!Ye(v,8)?s.go(-W.delta,!1):W.type===vs.pop&&Ye(v,20)&&s.go(-1,!1)),R(J,_,v)}).catch(is)}))}let Te=Gr(),Lt=Gr(),pt;function ft(D,Y,W){Se(D);const J=Lt.list();return J.length?J.forEach(Et=>Et(D,Y,W)):console.error(D),Promise.reject(D)}function me(){return pt&&c.value!==cn?Promise.resolve():new Promise((D,Y)=>{Te.add([D,Y])})}function Se(D){return pt||(pt=!D,ue(),Te.list().forEach(([Y,W])=>D?W(D):Y()),Te.reset()),D}function we(D,Y,W,J){const{scrollBehavior:Et}=e;if(!er||!Et)return Promise.resolve();const _=!W&&G_(ec(D.fullPath,0))||(J||!W)&&history.state&&history.state.scroll||null;return nf().then(()=>Et(D,Y,_)).then(v=>v&&z_(v)).catch(v=>ft(v,D,Y))}const Vt=D=>s.go(D);let Dt;const sn=new Set,Me={currentRoute:c,listening:!0,addRoute:T,removeRoute:V,clearRoutes:t.clearRoutes,hasRoute:L,getRoutes:N,resolve:G,options:e,push:z,replace:ht,go:Vt,back:()=>Vt(-1),forward:()=>Vt(1),beforeEach:i.add,beforeResolve:a.add,afterEach:l.add,onError:Lt.add,isReady:me,install(D){const Y=this;D.component("RouterLink",ui),D.component("RouterView",Ey),D.config.globalProperties.$router=Y,Object.defineProperty(D.config.globalProperties,"$route",{enumerable:!0,get:()=>Ze(c)}),er&&!Dt&&c.value===cn&&(Dt=!0,z(s.location).catch(Et=>{}));const W={};for(const Et in cn)Object.defineProperty(W,Et,{get:()=>c.value[Et],enumerable:!0});D.provide(Ja,Y),D.provide(Za,Yh(W)),D.provide(oa,c);const J=D.unmount;sn.add(D),D.unmount=function(){sn.delete(D),sn.size<1&&(f=cn,E&&E(),E=null,c.value=cn,Dt=!1,pt=!1),J()}}};function pe(D){return D.reduce((Y,W)=>Y.then(()=>w(W)),Promise.resolve())}return Me}function wy(e,t){const n=[],r=[],s=[],i=Math.max(t.matched.length,e.matched.length);for(let a=0;a<i;a++){const l=t.matched[a];l&&(e.matched.find(f=>mr(f,l))?r.push(l):n.push(l));const c=e.matched[a];c&&(t.matched.find(f=>mr(f,c))||s.push(c))}return[n,r,s]}function Iy(e){return je(Za)}const Ay="data:image/svg+xml,%3csvg%20xmlns='http://www.w3.org/2000/svg'%20viewBox='0%200%20261.76%20226.69'%3e%3cpath%20d='M161.096.001l-30.225%2052.351L100.647.001H-.005l130.877%20226.688L261.749.001z'%20fill='%2341b883'/%3e%3cpath%20d='M161.096.001l-30.225%2052.351L100.647.001H52.346l78.526%20136.01L209.398.001z'%20fill='%2334495e'/%3e%3c/svg%3e",Ry={class:"navigation-list"},by=Gn({__name:"Navigation",setup(e){return(t,n)=>(qe(),Tn("nav",Ry,[qt(Ze(ui),{class:"navigation-link",to:"/"},{default:es(()=>n[0]||(n[0]=[ai("Home")])),_:1}),qt(Ze(ui),{class:"navigation-link",to:"/products"},{default:es(()=>n[1]||(n[1]=[ai("Products")])),_:1}),qt(Ze(ui),{class:"navigation-link",to:"/about-us"},{default:es(()=>n[2]||(n[2]=[ai("About Us")])),_:1})]))}}),Yf=Cs(by,[["__scopeId","data-v-7205d5bc"]]),Sy={class:"navigation"},Cy=Gn({__name:"HomeView",setup(e){return(t,n)=>(qe(),Tn("section",Sy,[n[0]||(n[0]=fe("img",{alt:"Vue logo",class:"logo",src:Ay,width:"125",height:"125"},null,-1)),qt(Yf)]))}}),Py=Cs(Cy,[["__scopeId","data-v-754f2416"]]),Vy=()=>{};var mc={};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xf=function(e){const t=[];let n=0;for(let r=0;r<e.length;r++){let s=e.charCodeAt(r);s<128?t[n++]=s:s<2048?(t[n++]=s>>6|192,t[n++]=s&63|128):(s&64512)===55296&&r+1<e.length&&(e.charCodeAt(r+1)&64512)===56320?(s=65536+((s&1023)<<10)+(e.charCodeAt(++r)&1023),t[n++]=s>>18|240,t[n++]=s>>12&63|128,t[n++]=s>>6&63|128,t[n++]=s&63|128):(t[n++]=s>>12|224,t[n++]=s>>6&63|128,t[n++]=s&63|128)}return t},Dy=function(e){const t=[];let n=0,r=0;for(;n<e.length;){const s=e[n++];if(s<128)t[r++]=String.fromCharCode(s);else if(s>191&&s<224){const i=e[n++];t[r++]=String.fromCharCode((s&31)<<6|i&63)}else if(s>239&&s<365){const i=e[n++],a=e[n++],l=e[n++],c=((s&7)<<18|(i&63)<<12|(a&63)<<6|l&63)-65536;t[r++]=String.fromCharCode(55296+(c>>10)),t[r++]=String.fromCharCode(56320+(c&1023))}else{const i=e[n++],a=e[n++];t[r++]=String.fromCharCode((s&15)<<12|(i&63)<<6|a&63)}}return t.join("")},Jf={byteToCharMap_:null,charToByteMap_:null,byteToCharMapWebSafe_:null,charToByteMapWebSafe_:null,ENCODED_VALS_BASE:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",get ENCODED_VALS(){return this.ENCODED_VALS_BASE+"+/="},get ENCODED_VALS_WEBSAFE(){return this.ENCODED_VALS_BASE+"-_."},HAS_NATIVE_SUPPORT:typeof atob=="function",encodeByteArray(e,t){if(!Array.isArray(e))throw Error("encodeByteArray takes an array as a parameter");this.init_();const n=t?this.byteToCharMapWebSafe_:this.byteToCharMap_,r=[];for(let s=0;s<e.length;s+=3){const i=e[s],a=s+1<e.length,l=a?e[s+1]:0,c=s+2<e.length,f=c?e[s+2]:0,d=i>>2,p=(i&3)<<4|l>>4;let m=(l&15)<<2|f>>6,T=f&63;c||(T=64,a||(m=64)),r.push(n[d],n[p],n[m],n[T])}return r.join("")},encodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?btoa(e):this.encodeByteArray(Xf(e),t)},decodeString(e,t){return this.HAS_NATIVE_SUPPORT&&!t?atob(e):Dy(this.decodeStringToByteArray(e,t))},decodeStringToByteArray(e,t){this.init_();const n=t?this.charToByteMapWebSafe_:this.charToByteMap_,r=[];for(let s=0;s<e.length;){const i=n[e.charAt(s++)],l=s<e.length?n[e.charAt(s)]:0;++s;const f=s<e.length?n[e.charAt(s)]:64;++s;const p=s<e.length?n[e.charAt(s)]:64;if(++s,i==null||l==null||f==null||p==null)throw new xy;const m=i<<2|l>>4;if(r.push(m),f!==64){const T=l<<4&240|f>>2;if(r.push(T),p!==64){const V=f<<6&192|p;r.push(V)}}}return r},init_(){if(!this.byteToCharMap_){this.byteToCharMap_={},this.charToByteMap_={},this.byteToCharMapWebSafe_={},this.charToByteMapWebSafe_={};for(let e=0;e<this.ENCODED_VALS.length;e++)this.byteToCharMap_[e]=this.ENCODED_VALS.charAt(e),this.charToByteMap_[this.byteToCharMap_[e]]=e,this.byteToCharMapWebSafe_[e]=this.ENCODED_VALS_WEBSAFE.charAt(e),this.charToByteMapWebSafe_[this.byteToCharMapWebSafe_[e]]=e,e>=this.ENCODED_VALS_BASE.length&&(this.charToByteMap_[this.ENCODED_VALS_WEBSAFE.charAt(e)]=e,this.charToByteMapWebSafe_[this.ENCODED_VALS.charAt(e)]=e)}}};class xy extends Error{constructor(){super(...arguments),this.name="DecodeBase64StringError"}}const Ny=function(e){const t=Xf(e);return Jf.encodeByteArray(t,!0)},wi=function(e){return Ny(e).replace(/\./g,"")},Oy=function(e){try{return Jf.decodeString(e,!0)}catch(t){console.error("base64Decode failed: ",t)}return null};/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function My(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("Unable to locate global object.")}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ky=()=>My().__FIREBASE_DEFAULTS__,Ly=()=>{if(typeof process>"u"||typeof mc>"u")return;const e=mc.__FIREBASE_DEFAULTS__;if(e)return JSON.parse(e)},Fy=()=>{if(typeof document>"u")return;let e;try{e=document.cookie.match(/__FIREBASE_DEFAULTS__=([^;]+)/)}catch{return}const t=e&&Oy(e[1]);return t&&JSON.parse(t)},tl=()=>{try{return Vy()||ky()||Ly()||Fy()}catch(e){console.info(`Unable to get __FIREBASE_DEFAULTS__ due to: ${e}`);return}},Uy=e=>{var t,n;return(n=(t=tl())===null||t===void 0?void 0:t.emulatorHosts)===null||n===void 0?void 0:n[e]},By=e=>{const t=Uy(e);if(!t)return;const n=t.lastIndexOf(":");if(n<=0||n+1===t.length)throw new Error(`Invalid host ${t} with no separate hostname and port!`);const r=parseInt(t.substring(n+1),10);return t[0]==="["?[t.substring(1,n-1),r]:[t.substring(0,n),r]},Zf=()=>{var e;return(e=tl())===null||e===void 0?void 0:e.config};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $y{constructor(){this.reject=()=>{},this.resolve=()=>{},this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}wrapCallback(t){return(n,r)=>{n?this.reject(n):this.resolve(r),typeof t=="function"&&(this.promise.catch(()=>{}),t.length===1?t(n):t(n,r))}}}/**
 * @license
 * Copyright 2025 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function el(e){return e.endsWith(".cloudworkstations.dev")}async function jy(e){return(await fetch(e,{credentials:"include"})).ok}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function qy(e,t){if(e.uid)throw new Error('The "uid" field is no longer supported by mockUserToken. Please use "sub" instead for Firebase Auth User ID.');const n={alg:"none",type:"JWT"},r=t||"demo-project",s=e.iat||0,i=e.sub||e.user_id;if(!i)throw new Error("mockUserToken must contain 'sub' or 'user_id' field!");const a=Object.assign({iss:`https://securetoken.google.com/${r}`,aud:r,iat:s,exp:s+3600,auth_time:s,sub:i,user_id:i,firebase:{sign_in_provider:"custom",identities:{}}},e);return[wi(JSON.stringify(n)),wi(JSON.stringify(a)),""].join(".")}const as={};function Hy(){const e={prod:[],emulator:[]};for(const t of Object.keys(as))as[t]?e.emulator.push(t):e.prod.push(t);return e}function zy(e){let t=document.getElementById(e),n=!1;return t||(t=document.createElement("div"),t.setAttribute("id",e),n=!0),{created:n,element:t}}let _c=!1;function td(e,t){if(typeof window>"u"||typeof document>"u"||!el(window.location.host)||as[e]===t||as[e]||_c)return;as[e]=t;function n(m){return`__firebase__banner__${m}`}const r="__firebase__banner",i=Hy().prod.length>0;function a(){const m=document.getElementById(r);m&&m.remove()}function l(m){m.style.display="flex",m.style.background="#7faaf0",m.style.position="fixed",m.style.bottom="5px",m.style.left="5px",m.style.padding=".5em",m.style.borderRadius="5px",m.style.alignItems="center"}function c(m,T){m.setAttribute("width","24"),m.setAttribute("id",T),m.setAttribute("height","24"),m.setAttribute("viewBox","0 0 24 24"),m.setAttribute("fill","none"),m.style.marginLeft="-6px"}function f(){const m=document.createElement("span");return m.style.cursor="pointer",m.style.marginLeft="16px",m.style.fontSize="24px",m.innerHTML=" &times;",m.onclick=()=>{_c=!0,a()},m}function d(m,T){m.setAttribute("id",T),m.innerText="Learn more",m.href="https://firebase.google.com/docs/studio/preview-apps#preview-backend",m.setAttribute("target","__blank"),m.style.paddingLeft="5px",m.style.textDecoration="underline"}function p(){const m=zy(r),T=n("text"),V=document.getElementById(T)||document.createElement("span"),N=n("learnmore"),L=document.getElementById(N)||document.createElement("a"),G=n("preprendIcon"),U=document.getElementById(G)||document.createElementNS("http://www.w3.org/2000/svg","svg");if(m.created){const H=m.element;l(H),d(L,N);const z=f();c(U,G),H.append(U,V,L,z),document.body.appendChild(H)}i?(V.innerText="Preview backend disconnected.",U.innerHTML=`<g clip-path="url(#clip0_6013_33858)">
<path d="M4.8 17.6L12 5.6L19.2 17.6H4.8ZM6.91667 16.4H17.0833L12 7.93333L6.91667 16.4ZM12 15.6C12.1667 15.6 12.3056 15.5444 12.4167 15.4333C12.5389 15.3111 12.6 15.1667 12.6 15C12.6 14.8333 12.5389 14.6944 12.4167 14.5833C12.3056 14.4611 12.1667 14.4 12 14.4C11.8333 14.4 11.6889 14.4611 11.5667 14.5833C11.4556 14.6944 11.4 14.8333 11.4 15C11.4 15.1667 11.4556 15.3111 11.5667 15.4333C11.6889 15.5444 11.8333 15.6 12 15.6ZM11.4 13.6H12.6V10.4H11.4V13.6Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6013_33858">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`):(U.innerHTML=`<g clip-path="url(#clip0_6083_34804)">
<path d="M11.4 15.2H12.6V11.2H11.4V15.2ZM12 10C12.1667 10 12.3056 9.94444 12.4167 9.83333C12.5389 9.71111 12.6 9.56667 12.6 9.4C12.6 9.23333 12.5389 9.09444 12.4167 8.98333C12.3056 8.86111 12.1667 8.8 12 8.8C11.8333 8.8 11.6889 8.86111 11.5667 8.98333C11.4556 9.09444 11.4 9.23333 11.4 9.4C11.4 9.56667 11.4556 9.71111 11.5667 9.83333C11.6889 9.94444 11.8333 10 12 10ZM12 18.4C11.1222 18.4 10.2944 18.2333 9.51667 17.9C8.73889 17.5667 8.05556 17.1111 7.46667 16.5333C6.88889 15.9444 6.43333 15.2611 6.1 14.4833C5.76667 13.7056 5.6 12.8778 5.6 12C5.6 11.1111 5.76667 10.2833 6.1 9.51667C6.43333 8.73889 6.88889 8.06111 7.46667 7.48333C8.05556 6.89444 8.73889 6.43333 9.51667 6.1C10.2944 5.76667 11.1222 5.6 12 5.6C12.8889 5.6 13.7167 5.76667 14.4833 6.1C15.2611 6.43333 15.9389 6.89444 16.5167 7.48333C17.1056 8.06111 17.5667 8.73889 17.9 9.51667C18.2333 10.2833 18.4 11.1111 18.4 12C18.4 12.8778 18.2333 13.7056 17.9 14.4833C17.5667 15.2611 17.1056 15.9444 16.5167 16.5333C15.9389 17.1111 15.2611 17.5667 14.4833 17.9C13.7167 18.2333 12.8889 18.4 12 18.4ZM12 17.2C13.4444 17.2 14.6722 16.6944 15.6833 15.6833C16.6944 14.6722 17.2 13.4444 17.2 12C17.2 10.5556 16.6944 9.32778 15.6833 8.31667C14.6722 7.30555 13.4444 6.8 12 6.8C10.5556 6.8 9.32778 7.30555 8.31667 8.31667C7.30556 9.32778 6.8 10.5556 6.8 12C6.8 13.4444 7.30556 14.6722 8.31667 15.6833C9.32778 16.6944 10.5556 17.2 12 17.2Z" fill="#212121"/>
</g>
<defs>
<clipPath id="clip0_6083_34804">
<rect width="24" height="24" fill="white"/>
</clipPath>
</defs>`,V.innerText="Preview backend running in this workspace."),V.setAttribute("id",T)}document.readyState==="loading"?window.addEventListener("DOMContentLoaded",p):p()}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ky(){return typeof navigator<"u"&&typeof navigator.userAgent=="string"?navigator.userAgent:""}function Gy(){var e;const t=(e=tl())===null||e===void 0?void 0:e.forceEnvironment;if(t==="node")return!0;if(t==="browser")return!1;try{return Object.prototype.toString.call(global.process)==="[object process]"}catch{return!1}}function Wy(){return!Gy()&&!!navigator.userAgent&&navigator.userAgent.includes("Safari")&&!navigator.userAgent.includes("Chrome")}function Qy(){try{return typeof indexedDB=="object"}catch{return!1}}function Yy(){return new Promise((e,t)=>{try{let n=!0;const r="validate-browser-context-for-indexeddb-analytics-module",s=self.indexedDB.open(r);s.onsuccess=()=>{s.result.close(),n||self.indexedDB.deleteDatabase(r),e(!0)},s.onupgradeneeded=()=>{n=!1},s.onerror=()=>{var i;t(((i=s.error)===null||i===void 0?void 0:i.message)||"")}}catch(n){t(n)}})}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Xy="FirebaseError";class br extends Error{constructor(t,n,r){super(n),this.code=t,this.customData=r,this.name=Xy,Object.setPrototypeOf(this,br.prototype),Error.captureStackTrace&&Error.captureStackTrace(this,ed.prototype.create)}}class ed{constructor(t,n,r){this.service=t,this.serviceName=n,this.errors=r}create(t,...n){const r=n[0]||{},s=`${this.service}/${t}`,i=this.errors[t],a=i?Jy(i,r):"Error",l=`${this.serviceName}: ${a} (${s}).`;return new br(s,l,r)}}function Jy(e,t){return e.replace(Zy,(n,r)=>{const s=t[r];return s!=null?String(s):`<${r}?>`})}const Zy=/\{\$([^}]+)}/g;function Ii(e,t){if(e===t)return!0;const n=Object.keys(e),r=Object.keys(t);for(const s of n){if(!r.includes(s))return!1;const i=e[s],a=t[s];if(yc(i)&&yc(a)){if(!Ii(i,a))return!1}else if(i!==a)return!1}for(const s of r)if(!n.includes(s))return!1;return!0}function yc(e){return e!==null&&typeof e=="object"}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function Ai(e){return e&&e._delegate?e._delegate:e}class Es{constructor(t,n,r){this.name=t,this.instanceFactory=n,this.type=r,this.multipleInstances=!1,this.serviceProps={},this.instantiationMode="LAZY",this.onInstanceCreated=null}setInstantiationMode(t){return this.instantiationMode=t,this}setMultipleInstances(t){return this.multipleInstances=t,this}setServiceProps(t){return this.serviceProps=t,this}setInstanceCreatedCallback(t){return this.onInstanceCreated=t,this}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Fn="[DEFAULT]";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class tv{constructor(t,n){this.name=t,this.container=n,this.component=null,this.instances=new Map,this.instancesDeferred=new Map,this.instancesOptions=new Map,this.onInitCallbacks=new Map}get(t){const n=this.normalizeInstanceIdentifier(t);if(!this.instancesDeferred.has(n)){const r=new $y;if(this.instancesDeferred.set(n,r),this.isInitialized(n)||this.shouldAutoInitialize())try{const s=this.getOrInitializeService({instanceIdentifier:n});s&&r.resolve(s)}catch{}}return this.instancesDeferred.get(n).promise}getImmediate(t){var n;const r=this.normalizeInstanceIdentifier(t==null?void 0:t.identifier),s=(n=t==null?void 0:t.optional)!==null&&n!==void 0?n:!1;if(this.isInitialized(r)||this.shouldAutoInitialize())try{return this.getOrInitializeService({instanceIdentifier:r})}catch(i){if(s)return null;throw i}else{if(s)return null;throw Error(`Service ${this.name} is not available`)}}getComponent(){return this.component}setComponent(t){if(t.name!==this.name)throw Error(`Mismatching Component ${t.name} for Provider ${this.name}.`);if(this.component)throw Error(`Component for ${this.name} has already been provided`);if(this.component=t,!!this.shouldAutoInitialize()){if(nv(t))try{this.getOrInitializeService({instanceIdentifier:Fn})}catch{}for(const[n,r]of this.instancesDeferred.entries()){const s=this.normalizeInstanceIdentifier(n);try{const i=this.getOrInitializeService({instanceIdentifier:s});r.resolve(i)}catch{}}}}clearInstance(t=Fn){this.instancesDeferred.delete(t),this.instancesOptions.delete(t),this.instances.delete(t)}async delete(){const t=Array.from(this.instances.values());await Promise.all([...t.filter(n=>"INTERNAL"in n).map(n=>n.INTERNAL.delete()),...t.filter(n=>"_delete"in n).map(n=>n._delete())])}isComponentSet(){return this.component!=null}isInitialized(t=Fn){return this.instances.has(t)}getOptions(t=Fn){return this.instancesOptions.get(t)||{}}initialize(t={}){const{options:n={}}=t,r=this.normalizeInstanceIdentifier(t.instanceIdentifier);if(this.isInitialized(r))throw Error(`${this.name}(${r}) has already been initialized`);if(!this.isComponentSet())throw Error(`Component ${this.name} has not been registered yet`);const s=this.getOrInitializeService({instanceIdentifier:r,options:n});for(const[i,a]of this.instancesDeferred.entries()){const l=this.normalizeInstanceIdentifier(i);r===l&&a.resolve(s)}return s}onInit(t,n){var r;const s=this.normalizeInstanceIdentifier(n),i=(r=this.onInitCallbacks.get(s))!==null&&r!==void 0?r:new Set;i.add(t),this.onInitCallbacks.set(s,i);const a=this.instances.get(s);return a&&t(a,s),()=>{i.delete(t)}}invokeOnInitCallbacks(t,n){const r=this.onInitCallbacks.get(n);if(r)for(const s of r)try{s(t,n)}catch{}}getOrInitializeService({instanceIdentifier:t,options:n={}}){let r=this.instances.get(t);if(!r&&this.component&&(r=this.component.instanceFactory(this.container,{instanceIdentifier:ev(t),options:n}),this.instances.set(t,r),this.instancesOptions.set(t,n),this.invokeOnInitCallbacks(r,t),this.component.onInstanceCreated))try{this.component.onInstanceCreated(this.container,t,r)}catch{}return r||null}normalizeInstanceIdentifier(t=Fn){return this.component?this.component.multipleInstances?t:Fn:t}shouldAutoInitialize(){return!!this.component&&this.component.instantiationMode!=="EXPLICIT"}}function ev(e){return e===Fn?void 0:e}function nv(e){return e.instantiationMode==="EAGER"}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rv{constructor(t){this.name=t,this.providers=new Map}addComponent(t){const n=this.getProvider(t.name);if(n.isComponentSet())throw new Error(`Component ${t.name} has already been registered with ${this.name}`);n.setComponent(t)}addOrOverwriteComponent(t){this.getProvider(t.name).isComponentSet()&&this.providers.delete(t.name),this.addComponent(t)}getProvider(t){if(this.providers.has(t))return this.providers.get(t);const n=new tv(t,this);return this.providers.set(t,n),n}getProviders(){return Array.from(this.providers.values())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var _t;(function(e){e[e.DEBUG=0]="DEBUG",e[e.VERBOSE=1]="VERBOSE",e[e.INFO=2]="INFO",e[e.WARN=3]="WARN",e[e.ERROR=4]="ERROR",e[e.SILENT=5]="SILENT"})(_t||(_t={}));const sv={debug:_t.DEBUG,verbose:_t.VERBOSE,info:_t.INFO,warn:_t.WARN,error:_t.ERROR,silent:_t.SILENT},iv=_t.INFO,ov={[_t.DEBUG]:"log",[_t.VERBOSE]:"log",[_t.INFO]:"info",[_t.WARN]:"warn",[_t.ERROR]:"error"},av=(e,t,...n)=>{if(t<e.logLevel)return;const r=new Date().toISOString(),s=ov[t];if(s)console[s](`[${r}]  ${e.name}:`,...n);else throw new Error(`Attempted to log a message with an invalid logType (value: ${t})`)};class nd{constructor(t){this.name=t,this._logLevel=iv,this._logHandler=av,this._userLogHandler=null}get logLevel(){return this._logLevel}set logLevel(t){if(!(t in _t))throw new TypeError(`Invalid value "${t}" assigned to \`logLevel\``);this._logLevel=t}setLogLevel(t){this._logLevel=typeof t=="string"?sv[t]:t}get logHandler(){return this._logHandler}set logHandler(t){if(typeof t!="function")throw new TypeError("Value assigned to `logHandler` must be a function");this._logHandler=t}get userLogHandler(){return this._userLogHandler}set userLogHandler(t){this._userLogHandler=t}debug(...t){this._userLogHandler&&this._userLogHandler(this,_t.DEBUG,...t),this._logHandler(this,_t.DEBUG,...t)}log(...t){this._userLogHandler&&this._userLogHandler(this,_t.VERBOSE,...t),this._logHandler(this,_t.VERBOSE,...t)}info(...t){this._userLogHandler&&this._userLogHandler(this,_t.INFO,...t),this._logHandler(this,_t.INFO,...t)}warn(...t){this._userLogHandler&&this._userLogHandler(this,_t.WARN,...t),this._logHandler(this,_t.WARN,...t)}error(...t){this._userLogHandler&&this._userLogHandler(this,_t.ERROR,...t),this._logHandler(this,_t.ERROR,...t)}}const lv=(e,t)=>t.some(n=>e instanceof n);let vc,Ec;function uv(){return vc||(vc=[IDBDatabase,IDBObjectStore,IDBIndex,IDBCursor,IDBTransaction])}function cv(){return Ec||(Ec=[IDBCursor.prototype.advance,IDBCursor.prototype.continue,IDBCursor.prototype.continuePrimaryKey])}const rd=new WeakMap,aa=new WeakMap,sd=new WeakMap,Fo=new WeakMap,nl=new WeakMap;function hv(e){const t=new Promise((n,r)=>{const s=()=>{e.removeEventListener("success",i),e.removeEventListener("error",a)},i=()=>{n(yn(e.result)),s()},a=()=>{r(e.error),s()};e.addEventListener("success",i),e.addEventListener("error",a)});return t.then(n=>{n instanceof IDBCursor&&rd.set(n,e)}).catch(()=>{}),nl.set(t,e),t}function fv(e){if(aa.has(e))return;const t=new Promise((n,r)=>{const s=()=>{e.removeEventListener("complete",i),e.removeEventListener("error",a),e.removeEventListener("abort",a)},i=()=>{n(),s()},a=()=>{r(e.error||new DOMException("AbortError","AbortError")),s()};e.addEventListener("complete",i),e.addEventListener("error",a),e.addEventListener("abort",a)});aa.set(e,t)}let la={get(e,t,n){if(e instanceof IDBTransaction){if(t==="done")return aa.get(e);if(t==="objectStoreNames")return e.objectStoreNames||sd.get(e);if(t==="store")return n.objectStoreNames[1]?void 0:n.objectStore(n.objectStoreNames[0])}return yn(e[t])},set(e,t,n){return e[t]=n,!0},has(e,t){return e instanceof IDBTransaction&&(t==="done"||t==="store")?!0:t in e}};function dv(e){la=e(la)}function pv(e){return e===IDBDatabase.prototype.transaction&&!("objectStoreNames"in IDBTransaction.prototype)?function(t,...n){const r=e.call(Uo(this),t,...n);return sd.set(r,t.sort?t.sort():[t]),yn(r)}:cv().includes(e)?function(...t){return e.apply(Uo(this),t),yn(rd.get(this))}:function(...t){return yn(e.apply(Uo(this),t))}}function gv(e){return typeof e=="function"?pv(e):(e instanceof IDBTransaction&&fv(e),lv(e,uv())?new Proxy(e,la):e)}function yn(e){if(e instanceof IDBRequest)return hv(e);if(Fo.has(e))return Fo.get(e);const t=gv(e);return t!==e&&(Fo.set(e,t),nl.set(t,e)),t}const Uo=e=>nl.get(e);function mv(e,t,{blocked:n,upgrade:r,blocking:s,terminated:i}={}){const a=indexedDB.open(e,t),l=yn(a);return r&&a.addEventListener("upgradeneeded",c=>{r(yn(a.result),c.oldVersion,c.newVersion,yn(a.transaction),c)}),n&&a.addEventListener("blocked",c=>n(c.oldVersion,c.newVersion,c)),l.then(c=>{i&&c.addEventListener("close",()=>i()),s&&c.addEventListener("versionchange",f=>s(f.oldVersion,f.newVersion,f))}).catch(()=>{}),l}const _v=["get","getKey","getAll","getAllKeys","count"],yv=["put","add","delete","clear"],Bo=new Map;function Tc(e,t){if(!(e instanceof IDBDatabase&&!(t in e)&&typeof t=="string"))return;if(Bo.get(t))return Bo.get(t);const n=t.replace(/FromIndex$/,""),r=t!==n,s=yv.includes(n);if(!(n in(r?IDBIndex:IDBObjectStore).prototype)||!(s||_v.includes(n)))return;const i=async function(a,...l){const c=this.transaction(a,s?"readwrite":"readonly");let f=c.store;return r&&(f=f.index(l.shift())),(await Promise.all([f[n](...l),s&&c.done]))[0]};return Bo.set(t,i),i}dv(e=>({...e,get:(t,n,r)=>Tc(t,n)||e.get(t,n,r),has:(t,n)=>!!Tc(t,n)||e.has(t,n)}));/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vv{constructor(t){this.container=t}getPlatformInfoString(){return this.container.getProviders().map(n=>{if(Ev(n)){const r=n.getImmediate();return`${r.library}/${r.version}`}else return null}).filter(n=>n).join(" ")}}function Ev(e){const t=e.getComponent();return(t==null?void 0:t.type)==="VERSION"}const ua="@firebase/app",wc="0.12.3";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tn=new nd("@firebase/app"),Tv="@firebase/app-compat",wv="@firebase/analytics-compat",Iv="@firebase/analytics",Av="@firebase/app-check-compat",Rv="@firebase/app-check",bv="@firebase/auth",Sv="@firebase/auth-compat",Cv="@firebase/database",Pv="@firebase/data-connect",Vv="@firebase/database-compat",Dv="@firebase/functions",xv="@firebase/functions-compat",Nv="@firebase/installations",Ov="@firebase/installations-compat",Mv="@firebase/messaging",kv="@firebase/messaging-compat",Lv="@firebase/performance",Fv="@firebase/performance-compat",Uv="@firebase/remote-config",Bv="@firebase/remote-config-compat",$v="@firebase/storage",jv="@firebase/storage-compat",qv="@firebase/firestore",Hv="@firebase/vertexai",zv="@firebase/firestore-compat",Kv="firebase",Gv="11.7.3";/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ca="[DEFAULT]",Wv={[ua]:"fire-core",[Tv]:"fire-core-compat",[Iv]:"fire-analytics",[wv]:"fire-analytics-compat",[Rv]:"fire-app-check",[Av]:"fire-app-check-compat",[bv]:"fire-auth",[Sv]:"fire-auth-compat",[Cv]:"fire-rtdb",[Pv]:"fire-data-connect",[Vv]:"fire-rtdb-compat",[Dv]:"fire-fn",[xv]:"fire-fn-compat",[Nv]:"fire-iid",[Ov]:"fire-iid-compat",[Mv]:"fire-fcm",[kv]:"fire-fcm-compat",[Lv]:"fire-perf",[Fv]:"fire-perf-compat",[Uv]:"fire-rc",[Bv]:"fire-rc-compat",[$v]:"fire-gcs",[jv]:"fire-gcs-compat",[qv]:"fire-fst",[zv]:"fire-fst-compat",[Hv]:"fire-vertex","fire-js":"fire-js",[Kv]:"fire-js-all"};/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ri=new Map,Qv=new Map,ha=new Map;function Ic(e,t){try{e.container.addComponent(t)}catch(n){tn.debug(`Component ${t.name} failed to register with FirebaseApp ${e.name}`,n)}}function bi(e){const t=e.name;if(ha.has(t))return tn.debug(`There were multiple attempts to register component ${t}.`),!1;ha.set(t,e);for(const n of Ri.values())Ic(n,e);for(const n of Qv.values())Ic(n,e);return!0}function Yv(e,t){const n=e.container.getProvider("heartbeat").getImmediate({optional:!0});return n&&n.triggerHeartbeat(),e.container.getProvider(t)}function Xv(e){return e==null?!1:e.settings!==void 0}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Jv={"no-app":"No Firebase App '{$appName}' has been created - call initializeApp() first","bad-app-name":"Illegal App name: '{$appName}'","duplicate-app":"Firebase App named '{$appName}' already exists with different options or config","app-deleted":"Firebase App named '{$appName}' already deleted","server-app-deleted":"Firebase Server App has been deleted","no-options":"Need to provide options, when not being deployed to hosting via source.","invalid-app-argument":"firebase.{$appName}() takes either no argument or a Firebase App instance.","invalid-log-argument":"First argument to `onLog` must be null or a function.","idb-open":"Error thrown when opening IndexedDB. Original error: {$originalErrorMessage}.","idb-get":"Error thrown when reading from IndexedDB. Original error: {$originalErrorMessage}.","idb-set":"Error thrown when writing to IndexedDB. Original error: {$originalErrorMessage}.","idb-delete":"Error thrown when deleting from IndexedDB. Original error: {$originalErrorMessage}.","finalization-registry-not-supported":"FirebaseServerApp deleteOnDeref field defined but the JS runtime does not support FinalizationRegistry.","invalid-server-app-environment":"FirebaseServerApp is not for use in browser environments."},vn=new ed("app","Firebase",Jv);/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Zv{constructor(t,n,r){this._isDeleted=!1,this._options=Object.assign({},t),this._config=Object.assign({},n),this._name=n.name,this._automaticDataCollectionEnabled=n.automaticDataCollectionEnabled,this._container=r,this.container.addComponent(new Es("app",()=>this,"PUBLIC"))}get automaticDataCollectionEnabled(){return this.checkDestroyed(),this._automaticDataCollectionEnabled}set automaticDataCollectionEnabled(t){this.checkDestroyed(),this._automaticDataCollectionEnabled=t}get name(){return this.checkDestroyed(),this._name}get options(){return this.checkDestroyed(),this._options}get config(){return this.checkDestroyed(),this._config}get container(){return this._container}get isDeleted(){return this._isDeleted}set isDeleted(t){this._isDeleted=t}checkDestroyed(){if(this.isDeleted)throw vn.create("app-deleted",{appName:this._name})}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const tE=Gv;function id(e,t={}){let n=e;typeof t!="object"&&(t={name:t});const r=Object.assign({name:ca,automaticDataCollectionEnabled:!1},t),s=r.name;if(typeof s!="string"||!s)throw vn.create("bad-app-name",{appName:String(s)});if(n||(n=Zf()),!n)throw vn.create("no-options");const i=Ri.get(s);if(i){if(Ii(n,i.options)&&Ii(r,i.config))return i;throw vn.create("duplicate-app",{appName:s})}const a=new rv(s);for(const c of ha.values())a.addComponent(c);const l=new Zv(n,r,a);return Ri.set(s,l),l}function eE(e=ca){const t=Ri.get(e);if(!t&&e===ca&&Zf())return id();if(!t)throw vn.create("no-app",{appName:e});return t}function hr(e,t,n){var r;let s=(r=Wv[e])!==null&&r!==void 0?r:e;n&&(s+=`-${n}`);const i=s.match(/\s|\//),a=t.match(/\s|\//);if(i||a){const l=[`Unable to register library "${s}" with version "${t}":`];i&&l.push(`library name "${s}" contains illegal characters (whitespace or "/")`),i&&a&&l.push("and"),a&&l.push(`version name "${t}" contains illegal characters (whitespace or "/")`),tn.warn(l.join(" "));return}bi(new Es(`${s}-version`,()=>({library:s,version:t}),"VERSION"))}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nE="firebase-heartbeat-database",rE=1,Ts="firebase-heartbeat-store";let $o=null;function od(){return $o||($o=mv(nE,rE,{upgrade:(e,t)=>{switch(t){case 0:try{e.createObjectStore(Ts)}catch(n){console.warn(n)}}}}).catch(e=>{throw vn.create("idb-open",{originalErrorMessage:e.message})})),$o}async function sE(e){try{const n=(await od()).transaction(Ts),r=await n.objectStore(Ts).get(ad(e));return await n.done,r}catch(t){if(t instanceof br)tn.warn(t.message);else{const n=vn.create("idb-get",{originalErrorMessage:t==null?void 0:t.message});tn.warn(n.message)}}}async function Ac(e,t){try{const r=(await od()).transaction(Ts,"readwrite");await r.objectStore(Ts).put(t,ad(e)),await r.done}catch(n){if(n instanceof br)tn.warn(n.message);else{const r=vn.create("idb-set",{originalErrorMessage:n==null?void 0:n.message});tn.warn(r.message)}}}function ad(e){return`${e.name}!${e.options.appId}`}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const iE=1024,oE=30;class aE{constructor(t){this.container=t,this._heartbeatsCache=null;const n=this.container.getProvider("app").getImmediate();this._storage=new uE(n),this._heartbeatsCachePromise=this._storage.read().then(r=>(this._heartbeatsCache=r,r))}async triggerHeartbeat(){var t,n;try{const s=this.container.getProvider("platform-logger").getImmediate().getPlatformInfoString(),i=Rc();if(((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null&&(this._heartbeatsCache=await this._heartbeatsCachePromise,((n=this._heartbeatsCache)===null||n===void 0?void 0:n.heartbeats)==null)||this._heartbeatsCache.lastSentHeartbeatDate===i||this._heartbeatsCache.heartbeats.some(a=>a.date===i))return;if(this._heartbeatsCache.heartbeats.push({date:i,agent:s}),this._heartbeatsCache.heartbeats.length>oE){const a=cE(this._heartbeatsCache.heartbeats);this._heartbeatsCache.heartbeats.splice(a,1)}return this._storage.overwrite(this._heartbeatsCache)}catch(r){tn.warn(r)}}async getHeartbeatsHeader(){var t;try{if(this._heartbeatsCache===null&&await this._heartbeatsCachePromise,((t=this._heartbeatsCache)===null||t===void 0?void 0:t.heartbeats)==null||this._heartbeatsCache.heartbeats.length===0)return"";const n=Rc(),{heartbeatsToSend:r,unsentEntries:s}=lE(this._heartbeatsCache.heartbeats),i=wi(JSON.stringify({version:2,heartbeats:r}));return this._heartbeatsCache.lastSentHeartbeatDate=n,s.length>0?(this._heartbeatsCache.heartbeats=s,await this._storage.overwrite(this._heartbeatsCache)):(this._heartbeatsCache.heartbeats=[],this._storage.overwrite(this._heartbeatsCache)),i}catch(n){return tn.warn(n),""}}}function Rc(){return new Date().toISOString().substring(0,10)}function lE(e,t=iE){const n=[];let r=e.slice();for(const s of e){const i=n.find(a=>a.agent===s.agent);if(i){if(i.dates.push(s.date),bc(n)>t){i.dates.pop();break}}else if(n.push({agent:s.agent,dates:[s.date]}),bc(n)>t){n.pop();break}r=r.slice(1)}return{heartbeatsToSend:n,unsentEntries:r}}class uE{constructor(t){this.app=t,this._canUseIndexedDBPromise=this.runIndexedDBEnvironmentCheck()}async runIndexedDBEnvironmentCheck(){return Qy()?Yy().then(()=>!0).catch(()=>!1):!1}async read(){if(await this._canUseIndexedDBPromise){const n=await sE(this.app);return n!=null&&n.heartbeats?n:{heartbeats:[]}}else return{heartbeats:[]}}async overwrite(t){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return Ac(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:t.heartbeats})}else return}async add(t){var n;if(await this._canUseIndexedDBPromise){const s=await this.read();return Ac(this.app,{lastSentHeartbeatDate:(n=t.lastSentHeartbeatDate)!==null&&n!==void 0?n:s.lastSentHeartbeatDate,heartbeats:[...s.heartbeats,...t.heartbeats]})}else return}}function bc(e){return wi(JSON.stringify({version:2,heartbeats:e})).length}function cE(e){if(e.length===0)return-1;let t=0,n=e[0].date;for(let r=1;r<e.length;r++)e[r].date<n&&(n=e[r].date,t=r);return t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function hE(e){bi(new Es("platform-logger",t=>new vv(t),"PRIVATE")),bi(new Es("heartbeat",t=>new aE(t),"PRIVATE")),hr(ua,wc,e),hr(ua,wc,"esm2017"),hr("fire-js","")}hE("");var fE="firebase",dE="11.7.3";/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */hr(fE,dE,"app");var Sc=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var En,ld;(function(){var e;/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/function t(I,y){function w(){}w.prototype=y.prototype,I.D=y.prototype,I.prototype=new w,I.prototype.constructor=I,I.C=function(A,R,S){for(var E=Array(arguments.length-2),ue=2;ue<arguments.length;ue++)E[ue-2]=arguments[ue];return y.prototype[R].apply(A,E)}}function n(){this.blockSize=-1}function r(){this.blockSize=-1,this.blockSize=64,this.g=Array(4),this.B=Array(this.blockSize),this.o=this.h=0,this.s()}t(r,n),r.prototype.s=function(){this.g[0]=1732584193,this.g[1]=4023233417,this.g[2]=2562383102,this.g[3]=271733878,this.o=this.h=0};function s(I,y,w){w||(w=0);var A=Array(16);if(typeof y=="string")for(var R=0;16>R;++R)A[R]=y.charCodeAt(w++)|y.charCodeAt(w++)<<8|y.charCodeAt(w++)<<16|y.charCodeAt(w++)<<24;else for(R=0;16>R;++R)A[R]=y[w++]|y[w++]<<8|y[w++]<<16|y[w++]<<24;y=I.g[0],w=I.g[1],R=I.g[2];var S=I.g[3],E=y+(S^w&(R^S))+A[0]+3614090360&4294967295;y=w+(E<<7&4294967295|E>>>25),E=S+(R^y&(w^R))+A[1]+3905402710&4294967295,S=y+(E<<12&4294967295|E>>>20),E=R+(w^S&(y^w))+A[2]+606105819&4294967295,R=S+(E<<17&4294967295|E>>>15),E=w+(y^R&(S^y))+A[3]+3250441966&4294967295,w=R+(E<<22&4294967295|E>>>10),E=y+(S^w&(R^S))+A[4]+4118548399&4294967295,y=w+(E<<7&4294967295|E>>>25),E=S+(R^y&(w^R))+A[5]+1200080426&4294967295,S=y+(E<<12&4294967295|E>>>20),E=R+(w^S&(y^w))+A[6]+2821735955&4294967295,R=S+(E<<17&4294967295|E>>>15),E=w+(y^R&(S^y))+A[7]+4249261313&4294967295,w=R+(E<<22&4294967295|E>>>10),E=y+(S^w&(R^S))+A[8]+1770035416&4294967295,y=w+(E<<7&4294967295|E>>>25),E=S+(R^y&(w^R))+A[9]+2336552879&4294967295,S=y+(E<<12&4294967295|E>>>20),E=R+(w^S&(y^w))+A[10]+4294925233&4294967295,R=S+(E<<17&4294967295|E>>>15),E=w+(y^R&(S^y))+A[11]+2304563134&4294967295,w=R+(E<<22&4294967295|E>>>10),E=y+(S^w&(R^S))+A[12]+1804603682&4294967295,y=w+(E<<7&4294967295|E>>>25),E=S+(R^y&(w^R))+A[13]+4254626195&4294967295,S=y+(E<<12&4294967295|E>>>20),E=R+(w^S&(y^w))+A[14]+2792965006&4294967295,R=S+(E<<17&4294967295|E>>>15),E=w+(y^R&(S^y))+A[15]+1236535329&4294967295,w=R+(E<<22&4294967295|E>>>10),E=y+(R^S&(w^R))+A[1]+4129170786&4294967295,y=w+(E<<5&4294967295|E>>>27),E=S+(w^R&(y^w))+A[6]+3225465664&4294967295,S=y+(E<<9&4294967295|E>>>23),E=R+(y^w&(S^y))+A[11]+643717713&4294967295,R=S+(E<<14&4294967295|E>>>18),E=w+(S^y&(R^S))+A[0]+3921069994&4294967295,w=R+(E<<20&4294967295|E>>>12),E=y+(R^S&(w^R))+A[5]+3593408605&4294967295,y=w+(E<<5&4294967295|E>>>27),E=S+(w^R&(y^w))+A[10]+38016083&4294967295,S=y+(E<<9&4294967295|E>>>23),E=R+(y^w&(S^y))+A[15]+3634488961&4294967295,R=S+(E<<14&4294967295|E>>>18),E=w+(S^y&(R^S))+A[4]+3889429448&4294967295,w=R+(E<<20&4294967295|E>>>12),E=y+(R^S&(w^R))+A[9]+568446438&4294967295,y=w+(E<<5&4294967295|E>>>27),E=S+(w^R&(y^w))+A[14]+3275163606&4294967295,S=y+(E<<9&4294967295|E>>>23),E=R+(y^w&(S^y))+A[3]+4107603335&4294967295,R=S+(E<<14&4294967295|E>>>18),E=w+(S^y&(R^S))+A[8]+1163531501&4294967295,w=R+(E<<20&4294967295|E>>>12),E=y+(R^S&(w^R))+A[13]+2850285829&4294967295,y=w+(E<<5&4294967295|E>>>27),E=S+(w^R&(y^w))+A[2]+4243563512&4294967295,S=y+(E<<9&4294967295|E>>>23),E=R+(y^w&(S^y))+A[7]+1735328473&4294967295,R=S+(E<<14&4294967295|E>>>18),E=w+(S^y&(R^S))+A[12]+2368359562&4294967295,w=R+(E<<20&4294967295|E>>>12),E=y+(w^R^S)+A[5]+4294588738&4294967295,y=w+(E<<4&4294967295|E>>>28),E=S+(y^w^R)+A[8]+2272392833&4294967295,S=y+(E<<11&4294967295|E>>>21),E=R+(S^y^w)+A[11]+1839030562&4294967295,R=S+(E<<16&4294967295|E>>>16),E=w+(R^S^y)+A[14]+4259657740&4294967295,w=R+(E<<23&4294967295|E>>>9),E=y+(w^R^S)+A[1]+2763975236&4294967295,y=w+(E<<4&4294967295|E>>>28),E=S+(y^w^R)+A[4]+1272893353&4294967295,S=y+(E<<11&4294967295|E>>>21),E=R+(S^y^w)+A[7]+4139469664&4294967295,R=S+(E<<16&4294967295|E>>>16),E=w+(R^S^y)+A[10]+3200236656&4294967295,w=R+(E<<23&4294967295|E>>>9),E=y+(w^R^S)+A[13]+681279174&4294967295,y=w+(E<<4&4294967295|E>>>28),E=S+(y^w^R)+A[0]+3936430074&4294967295,S=y+(E<<11&4294967295|E>>>21),E=R+(S^y^w)+A[3]+3572445317&4294967295,R=S+(E<<16&4294967295|E>>>16),E=w+(R^S^y)+A[6]+76029189&4294967295,w=R+(E<<23&4294967295|E>>>9),E=y+(w^R^S)+A[9]+3654602809&4294967295,y=w+(E<<4&4294967295|E>>>28),E=S+(y^w^R)+A[12]+3873151461&4294967295,S=y+(E<<11&4294967295|E>>>21),E=R+(S^y^w)+A[15]+530742520&4294967295,R=S+(E<<16&4294967295|E>>>16),E=w+(R^S^y)+A[2]+3299628645&4294967295,w=R+(E<<23&4294967295|E>>>9),E=y+(R^(w|~S))+A[0]+4096336452&4294967295,y=w+(E<<6&4294967295|E>>>26),E=S+(w^(y|~R))+A[7]+1126891415&4294967295,S=y+(E<<10&4294967295|E>>>22),E=R+(y^(S|~w))+A[14]+2878612391&4294967295,R=S+(E<<15&4294967295|E>>>17),E=w+(S^(R|~y))+A[5]+4237533241&4294967295,w=R+(E<<21&4294967295|E>>>11),E=y+(R^(w|~S))+A[12]+1700485571&4294967295,y=w+(E<<6&4294967295|E>>>26),E=S+(w^(y|~R))+A[3]+2399980690&4294967295,S=y+(E<<10&4294967295|E>>>22),E=R+(y^(S|~w))+A[10]+4293915773&4294967295,R=S+(E<<15&4294967295|E>>>17),E=w+(S^(R|~y))+A[1]+2240044497&4294967295,w=R+(E<<21&4294967295|E>>>11),E=y+(R^(w|~S))+A[8]+1873313359&4294967295,y=w+(E<<6&4294967295|E>>>26),E=S+(w^(y|~R))+A[15]+4264355552&4294967295,S=y+(E<<10&4294967295|E>>>22),E=R+(y^(S|~w))+A[6]+2734768916&4294967295,R=S+(E<<15&4294967295|E>>>17),E=w+(S^(R|~y))+A[13]+1309151649&4294967295,w=R+(E<<21&4294967295|E>>>11),E=y+(R^(w|~S))+A[4]+4149444226&4294967295,y=w+(E<<6&4294967295|E>>>26),E=S+(w^(y|~R))+A[11]+3174756917&4294967295,S=y+(E<<10&4294967295|E>>>22),E=R+(y^(S|~w))+A[2]+718787259&4294967295,R=S+(E<<15&4294967295|E>>>17),E=w+(S^(R|~y))+A[9]+3951481745&4294967295,I.g[0]=I.g[0]+y&4294967295,I.g[1]=I.g[1]+(R+(E<<21&4294967295|E>>>11))&4294967295,I.g[2]=I.g[2]+R&4294967295,I.g[3]=I.g[3]+S&4294967295}r.prototype.u=function(I,y){y===void 0&&(y=I.length);for(var w=y-this.blockSize,A=this.B,R=this.h,S=0;S<y;){if(R==0)for(;S<=w;)s(this,I,S),S+=this.blockSize;if(typeof I=="string"){for(;S<y;)if(A[R++]=I.charCodeAt(S++),R==this.blockSize){s(this,A),R=0;break}}else for(;S<y;)if(A[R++]=I[S++],R==this.blockSize){s(this,A),R=0;break}}this.h=R,this.o+=y},r.prototype.v=function(){var I=Array((56>this.h?this.blockSize:2*this.blockSize)-this.h);I[0]=128;for(var y=1;y<I.length-8;++y)I[y]=0;var w=8*this.o;for(y=I.length-8;y<I.length;++y)I[y]=w&255,w/=256;for(this.u(I),I=Array(16),y=w=0;4>y;++y)for(var A=0;32>A;A+=8)I[w++]=this.g[y]>>>A&255;return I};function i(I,y){var w=l;return Object.prototype.hasOwnProperty.call(w,I)?w[I]:w[I]=y(I)}function a(I,y){this.h=y;for(var w=[],A=!0,R=I.length-1;0<=R;R--){var S=I[R]|0;A&&S==y||(w[R]=S,A=!1)}this.g=w}var l={};function c(I){return-128<=I&&128>I?i(I,function(y){return new a([y|0],0>y?-1:0)}):new a([I|0],0>I?-1:0)}function f(I){if(isNaN(I)||!isFinite(I))return p;if(0>I)return L(f(-I));for(var y=[],w=1,A=0;I>=w;A++)y[A]=I/w|0,w*=4294967296;return new a(y,0)}function d(I,y){if(I.length==0)throw Error("number format error: empty string");if(y=y||10,2>y||36<y)throw Error("radix out of range: "+y);if(I.charAt(0)=="-")return L(d(I.substring(1),y));if(0<=I.indexOf("-"))throw Error('number format error: interior "-" character');for(var w=f(Math.pow(y,8)),A=p,R=0;R<I.length;R+=8){var S=Math.min(8,I.length-R),E=parseInt(I.substring(R,R+S),y);8>S?(S=f(Math.pow(y,S)),A=A.j(S).add(f(E))):(A=A.j(w),A=A.add(f(E)))}return A}var p=c(0),m=c(1),T=c(16777216);e=a.prototype,e.m=function(){if(N(this))return-L(this).m();for(var I=0,y=1,w=0;w<this.g.length;w++){var A=this.i(w);I+=(0<=A?A:4294967296+A)*y,y*=4294967296}return I},e.toString=function(I){if(I=I||10,2>I||36<I)throw Error("radix out of range: "+I);if(V(this))return"0";if(N(this))return"-"+L(this).toString(I);for(var y=f(Math.pow(I,6)),w=this,A="";;){var R=z(w,y).g;w=G(w,R.j(y));var S=((0<w.g.length?w.g[0]:w.h)>>>0).toString(I);if(w=R,V(w))return S+A;for(;6>S.length;)S="0"+S;A=S+A}},e.i=function(I){return 0>I?0:I<this.g.length?this.g[I]:this.h};function V(I){if(I.h!=0)return!1;for(var y=0;y<I.g.length;y++)if(I.g[y]!=0)return!1;return!0}function N(I){return I.h==-1}e.l=function(I){return I=G(this,I),N(I)?-1:V(I)?0:1};function L(I){for(var y=I.g.length,w=[],A=0;A<y;A++)w[A]=~I.g[A];return new a(w,~I.h).add(m)}e.abs=function(){return N(this)?L(this):this},e.add=function(I){for(var y=Math.max(this.g.length,I.g.length),w=[],A=0,R=0;R<=y;R++){var S=A+(this.i(R)&65535)+(I.i(R)&65535),E=(S>>>16)+(this.i(R)>>>16)+(I.i(R)>>>16);A=E>>>16,S&=65535,E&=65535,w[R]=E<<16|S}return new a(w,w[w.length-1]&-2147483648?-1:0)};function G(I,y){return I.add(L(y))}e.j=function(I){if(V(this)||V(I))return p;if(N(this))return N(I)?L(this).j(L(I)):L(L(this).j(I));if(N(I))return L(this.j(L(I)));if(0>this.l(T)&&0>I.l(T))return f(this.m()*I.m());for(var y=this.g.length+I.g.length,w=[],A=0;A<2*y;A++)w[A]=0;for(A=0;A<this.g.length;A++)for(var R=0;R<I.g.length;R++){var S=this.i(A)>>>16,E=this.i(A)&65535,ue=I.i(R)>>>16,Te=I.i(R)&65535;w[2*A+2*R]+=E*Te,U(w,2*A+2*R),w[2*A+2*R+1]+=S*Te,U(w,2*A+2*R+1),w[2*A+2*R+1]+=E*ue,U(w,2*A+2*R+1),w[2*A+2*R+2]+=S*ue,U(w,2*A+2*R+2)}for(A=0;A<y;A++)w[A]=w[2*A+1]<<16|w[2*A];for(A=y;A<2*y;A++)w[A]=0;return new a(w,0)};function U(I,y){for(;(I[y]&65535)!=I[y];)I[y+1]+=I[y]>>>16,I[y]&=65535,y++}function H(I,y){this.g=I,this.h=y}function z(I,y){if(V(y))throw Error("division by zero");if(V(I))return new H(p,p);if(N(I))return y=z(L(I),y),new H(L(y.g),L(y.h));if(N(y))return y=z(I,L(y)),new H(L(y.g),y.h);if(30<I.g.length){if(N(I)||N(y))throw Error("slowDivide_ only works with positive integers.");for(var w=m,A=y;0>=A.l(I);)w=ht(w),A=ht(A);var R=dt(w,1),S=dt(A,1);for(A=dt(A,2),w=dt(w,2);!V(A);){var E=S.add(A);0>=E.l(I)&&(R=R.add(w),S=E),A=dt(A,1),w=dt(w,1)}return y=G(I,R.j(y)),new H(R,y)}for(R=p;0<=I.l(y);){for(w=Math.max(1,Math.floor(I.m()/y.m())),A=Math.ceil(Math.log(w)/Math.LN2),A=48>=A?1:Math.pow(2,A-48),S=f(w),E=S.j(y);N(E)||0<E.l(I);)w-=A,S=f(w),E=S.j(y);V(S)&&(S=m),R=R.add(S),I=G(I,E)}return new H(R,I)}e.A=function(I){return z(this,I).h},e.and=function(I){for(var y=Math.max(this.g.length,I.g.length),w=[],A=0;A<y;A++)w[A]=this.i(A)&I.i(A);return new a(w,this.h&I.h)},e.or=function(I){for(var y=Math.max(this.g.length,I.g.length),w=[],A=0;A<y;A++)w[A]=this.i(A)|I.i(A);return new a(w,this.h|I.h)},e.xor=function(I){for(var y=Math.max(this.g.length,I.g.length),w=[],A=0;A<y;A++)w[A]=this.i(A)^I.i(A);return new a(w,this.h^I.h)};function ht(I){for(var y=I.g.length+1,w=[],A=0;A<y;A++)w[A]=I.i(A)<<1|I.i(A-1)>>>31;return new a(w,I.h)}function dt(I,y){var w=y>>5;y%=32;for(var A=I.g.length-w,R=[],S=0;S<A;S++)R[S]=0<y?I.i(S+w)>>>y|I.i(S+w+1)<<32-y:I.i(S+w);return new a(R,I.h)}r.prototype.digest=r.prototype.v,r.prototype.reset=r.prototype.s,r.prototype.update=r.prototype.u,ld=r,a.prototype.add=a.prototype.add,a.prototype.multiply=a.prototype.j,a.prototype.modulo=a.prototype.A,a.prototype.compare=a.prototype.l,a.prototype.toNumber=a.prototype.m,a.prototype.toString=a.prototype.toString,a.prototype.getBits=a.prototype.i,a.fromNumber=f,a.fromString=d,En=a}).apply(typeof Sc<"u"?Sc:typeof self<"u"?self:typeof window<"u"?window:{});var Js=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};/** @license
Copyright The Closure Library Authors.
SPDX-License-Identifier: Apache-2.0
*/var ud,Qr,cd,ci,fa,hd,fd,dd;(function(){var e,t=typeof Object.defineProperties=="function"?Object.defineProperty:function(o,u,h){return o==Array.prototype||o==Object.prototype||(o[u]=h.value),o};function n(o){o=[typeof globalThis=="object"&&globalThis,o,typeof window=="object"&&window,typeof self=="object"&&self,typeof Js=="object"&&Js];for(var u=0;u<o.length;++u){var h=o[u];if(h&&h.Math==Math)return h}throw Error("Cannot find global object")}var r=n(this);function s(o,u){if(u)t:{var h=r;o=o.split(".");for(var g=0;g<o.length-1;g++){var C=o[g];if(!(C in h))break t;h=h[C]}o=o[o.length-1],g=h[o],u=u(g),u!=g&&u!=null&&t(h,o,{configurable:!0,writable:!0,value:u})}}function i(o,u){o instanceof String&&(o+="");var h=0,g=!1,C={next:function(){if(!g&&h<o.length){var P=h++;return{value:u(P,o[P]),done:!1}}return g=!0,{done:!0,value:void 0}}};return C[Symbol.iterator]=function(){return C},C}s("Array.prototype.values",function(o){return o||function(){return i(this,function(u,h){return h})}});/** @license

 Copyright The Closure Library Authors.
 SPDX-License-Identifier: Apache-2.0
*/var a=a||{},l=this||self;function c(o){var u=typeof o;return u=u!="object"?u:o?Array.isArray(o)?"array":u:"null",u=="array"||u=="object"&&typeof o.length=="number"}function f(o){var u=typeof o;return u=="object"&&o!=null||u=="function"}function d(o,u,h){return o.call.apply(o.bind,arguments)}function p(o,u,h){if(!o)throw Error();if(2<arguments.length){var g=Array.prototype.slice.call(arguments,2);return function(){var C=Array.prototype.slice.call(arguments);return Array.prototype.unshift.apply(C,g),o.apply(u,C)}}return function(){return o.apply(u,arguments)}}function m(o,u,h){return m=Function.prototype.bind&&Function.prototype.bind.toString().indexOf("native code")!=-1?d:p,m.apply(null,arguments)}function T(o,u){var h=Array.prototype.slice.call(arguments,1);return function(){var g=h.slice();return g.push.apply(g,arguments),o.apply(this,g)}}function V(o,u){function h(){}h.prototype=u.prototype,o.aa=u.prototype,o.prototype=new h,o.prototype.constructor=o,o.Qb=function(g,C,P){for(var q=Array(arguments.length-2),Rt=2;Rt<arguments.length;Rt++)q[Rt-2]=arguments[Rt];return u.prototype[C].apply(g,q)}}function N(o){const u=o.length;if(0<u){const h=Array(u);for(let g=0;g<u;g++)h[g]=o[g];return h}return[]}function L(o,u){for(let h=1;h<arguments.length;h++){const g=arguments[h];if(c(g)){const C=o.length||0,P=g.length||0;o.length=C+P;for(let q=0;q<P;q++)o[C+q]=g[q]}else o.push(g)}}class G{constructor(u,h){this.i=u,this.j=h,this.h=0,this.g=null}get(){let u;return 0<this.h?(this.h--,u=this.g,this.g=u.next,u.next=null):u=this.i(),u}}function U(o){return/^[\s\xa0]*$/.test(o)}function H(){var o=l.navigator;return o&&(o=o.userAgent)?o:""}function z(o){return z[" "](o),o}z[" "]=function(){};var ht=H().indexOf("Gecko")!=-1&&!(H().toLowerCase().indexOf("webkit")!=-1&&H().indexOf("Edge")==-1)&&!(H().indexOf("Trident")!=-1||H().indexOf("MSIE")!=-1)&&H().indexOf("Edge")==-1;function dt(o,u,h){for(const g in o)u.call(h,o[g],g,o)}function I(o,u){for(const h in o)u.call(void 0,o[h],h,o)}function y(o){const u={};for(const h in o)u[h]=o[h];return u}const w="constructor hasOwnProperty isPrototypeOf propertyIsEnumerable toLocaleString toString valueOf".split(" ");function A(o,u){let h,g;for(let C=1;C<arguments.length;C++){g=arguments[C];for(h in g)o[h]=g[h];for(let P=0;P<w.length;P++)h=w[P],Object.prototype.hasOwnProperty.call(g,h)&&(o[h]=g[h])}}function R(o){var u=1;o=o.split(":");const h=[];for(;0<u&&o.length;)h.push(o.shift()),u--;return o.length&&h.push(o.join(":")),h}function S(o){l.setTimeout(()=>{throw o},0)}function E(){var o=me;let u=null;return o.g&&(u=o.g,o.g=o.g.next,o.g||(o.h=null),u.next=null),u}class ue{constructor(){this.h=this.g=null}add(u,h){const g=Te.get();g.set(u,h),this.h?this.h.next=g:this.g=g,this.h=g}}var Te=new G(()=>new Lt,o=>o.reset());class Lt{constructor(){this.next=this.g=this.h=null}set(u,h){this.h=u,this.g=h,this.next=null}reset(){this.next=this.g=this.h=null}}let pt,ft=!1,me=new ue,Se=()=>{const o=l.Promise.resolve(void 0);pt=()=>{o.then(we)}};var we=()=>{for(var o;o=E();){try{o.h.call(o.g)}catch(h){S(h)}var u=Te;u.j(o),100>u.h&&(u.h++,o.next=u.g,u.g=o)}ft=!1};function Vt(){this.s=this.s,this.C=this.C}Vt.prototype.s=!1,Vt.prototype.ma=function(){this.s||(this.s=!0,this.N())},Vt.prototype.N=function(){if(this.C)for(;this.C.length;)this.C.shift()()};function Dt(o,u){this.type=o,this.g=this.target=u,this.defaultPrevented=!1}Dt.prototype.h=function(){this.defaultPrevented=!0};var sn=function(){if(!l.addEventListener||!Object.defineProperty)return!1;var o=!1,u=Object.defineProperty({},"passive",{get:function(){o=!0}});try{const h=()=>{};l.addEventListener("test",h,u),l.removeEventListener("test",h,u)}catch{}return o}();function Me(o,u){if(Dt.call(this,o?o.type:""),this.relatedTarget=this.g=this.target=null,this.button=this.screenY=this.screenX=this.clientY=this.clientX=0,this.key="",this.metaKey=this.shiftKey=this.altKey=this.ctrlKey=!1,this.state=null,this.pointerId=0,this.pointerType="",this.i=null,o){var h=this.type=o.type,g=o.changedTouches&&o.changedTouches.length?o.changedTouches[0]:null;if(this.target=o.target||o.srcElement,this.g=u,u=o.relatedTarget){if(ht){t:{try{z(u.nodeName);var C=!0;break t}catch{}C=!1}C||(u=null)}}else h=="mouseover"?u=o.fromElement:h=="mouseout"&&(u=o.toElement);this.relatedTarget=u,g?(this.clientX=g.clientX!==void 0?g.clientX:g.pageX,this.clientY=g.clientY!==void 0?g.clientY:g.pageY,this.screenX=g.screenX||0,this.screenY=g.screenY||0):(this.clientX=o.clientX!==void 0?o.clientX:o.pageX,this.clientY=o.clientY!==void 0?o.clientY:o.pageY,this.screenX=o.screenX||0,this.screenY=o.screenY||0),this.button=o.button,this.key=o.key||"",this.ctrlKey=o.ctrlKey,this.altKey=o.altKey,this.shiftKey=o.shiftKey,this.metaKey=o.metaKey,this.pointerId=o.pointerId||0,this.pointerType=typeof o.pointerType=="string"?o.pointerType:pe[o.pointerType]||"",this.state=o.state,this.i=o,o.defaultPrevented&&Me.aa.h.call(this)}}V(Me,Dt);var pe={2:"touch",3:"pen",4:"mouse"};Me.prototype.h=function(){Me.aa.h.call(this);var o=this.i;o.preventDefault?o.preventDefault():o.returnValue=!1};var D="closure_listenable_"+(1e6*Math.random()|0),Y=0;function W(o,u,h,g,C){this.listener=o,this.proxy=null,this.src=u,this.type=h,this.capture=!!g,this.ha=C,this.key=++Y,this.da=this.fa=!1}function J(o){o.da=!0,o.listener=null,o.proxy=null,o.src=null,o.ha=null}function Et(o){this.src=o,this.g={},this.h=0}Et.prototype.add=function(o,u,h,g,C){var P=o.toString();o=this.g[P],o||(o=this.g[P]=[],this.h++);var q=v(o,u,g,C);return-1<q?(u=o[q],h||(u.fa=!1)):(u=new W(u,this.src,P,!!g,C),u.fa=h,o.push(u)),u};function _(o,u){var h=u.type;if(h in o.g){var g=o.g[h],C=Array.prototype.indexOf.call(g,u,void 0),P;(P=0<=C)&&Array.prototype.splice.call(g,C,1),P&&(J(u),o.g[h].length==0&&(delete o.g[h],o.h--))}}function v(o,u,h,g){for(var C=0;C<o.length;++C){var P=o[C];if(!P.da&&P.listener==u&&P.capture==!!h&&P.ha==g)return C}return-1}var b="closure_lm_"+(1e6*Math.random()|0),x={};function k(o,u,h,g,C){if(Array.isArray(u)){for(var P=0;P<u.length;P++)k(o,u[P],h,g,C);return null}return h=st(h),o&&o[D]?o.K(u,h,f(g)?!!g.capture:!1,C):O(o,u,h,!1,g,C)}function O(o,u,h,g,C,P){if(!u)throw Error("Invalid event type");var q=f(C)?!!C.capture:!!C,Rt=Q(o);if(Rt||(o[b]=Rt=new Et(o)),h=Rt.add(u,h,g,q,P),h.proxy)return h;if(g=K(),h.proxy=g,g.src=o,g.listener=h,o.addEventListener)sn||(C=q),C===void 0&&(C=!1),o.addEventListener(u.toString(),g,C);else if(o.attachEvent)o.attachEvent(F(u.toString()),g);else if(o.addListener&&o.removeListener)o.addListener(g);else throw Error("addEventListener and attachEvent are unavailable.");return h}function K(){function o(h){return u.call(o.src,o.listener,h)}const u=et;return o}function j(o,u,h,g,C){if(Array.isArray(u))for(var P=0;P<u.length;P++)j(o,u[P],h,g,C);else g=f(g)?!!g.capture:!!g,h=st(h),o&&o[D]?(o=o.i,u=String(u).toString(),u in o.g&&(P=o.g[u],h=v(P,h,g,C),-1<h&&(J(P[h]),Array.prototype.splice.call(P,h,1),P.length==0&&(delete o.g[u],o.h--)))):o&&(o=Q(o))&&(u=o.g[u.toString()],o=-1,u&&(o=v(u,h,g,C)),(h=-1<o?u[o]:null)&&$(h))}function $(o){if(typeof o!="number"&&o&&!o.da){var u=o.src;if(u&&u[D])_(u.i,o);else{var h=o.type,g=o.proxy;u.removeEventListener?u.removeEventListener(h,g,o.capture):u.detachEvent?u.detachEvent(F(h),g):u.addListener&&u.removeListener&&u.removeListener(g),(h=Q(u))?(_(h,o),h.h==0&&(h.src=null,u[b]=null)):J(o)}}}function F(o){return o in x?x[o]:x[o]="on"+o}function et(o,u){if(o.da)o=!0;else{u=new Me(u,this);var h=o.listener,g=o.ha||o.src;o.fa&&$(o),o=h.call(g,u)}return o}function Q(o){return o=o[b],o instanceof Et?o:null}var tt="__closure_events_fn_"+(1e9*Math.random()>>>0);function st(o){return typeof o=="function"?o:(o[tt]||(o[tt]=function(u){return o.handleEvent(u)}),o[tt])}function nt(){Vt.call(this),this.i=new Et(this),this.M=this,this.F=null}V(nt,Vt),nt.prototype[D]=!0,nt.prototype.removeEventListener=function(o,u,h,g){j(this,o,u,h,g)};function lt(o,u){var h,g=o.F;if(g)for(h=[];g;g=g.F)h.push(g);if(o=o.M,g=u.type||u,typeof u=="string")u=new Dt(u,o);else if(u instanceof Dt)u.target=u.target||o;else{var C=u;u=new Dt(g,o),A(u,C)}if(C=!0,h)for(var P=h.length-1;0<=P;P--){var q=u.g=h[P];C=gt(q,g,!0,u)&&C}if(q=u.g=o,C=gt(q,g,!0,u)&&C,C=gt(q,g,!1,u)&&C,h)for(P=0;P<h.length;P++)q=u.g=h[P],C=gt(q,g,!1,u)&&C}nt.prototype.N=function(){if(nt.aa.N.call(this),this.i){var o=this.i,u;for(u in o.g){for(var h=o.g[u],g=0;g<h.length;g++)J(h[g]);delete o.g[u],o.h--}}this.F=null},nt.prototype.K=function(o,u,h,g){return this.i.add(String(o),u,!1,h,g)},nt.prototype.L=function(o,u,h,g){return this.i.add(String(o),u,!0,h,g)};function gt(o,u,h,g){if(u=o.i.g[String(u)],!u)return!0;u=u.concat();for(var C=!0,P=0;P<u.length;++P){var q=u[P];if(q&&!q.da&&q.capture==h){var Rt=q.listener,Gt=q.ha||q.src;q.fa&&_(o.i,q),C=Rt.call(Gt,g)!==!1&&C}}return C&&!g.defaultPrevented}function Yt(o,u,h){if(typeof o=="function")h&&(o=m(o,h));else if(o&&typeof o.handleEvent=="function")o=m(o.handleEvent,o);else throw Error("Invalid listener argument");return 2147483647<Number(u)?-1:l.setTimeout(o,u||0)}function zt(o){o.g=Yt(()=>{o.g=null,o.i&&(o.i=!1,zt(o))},o.l);const u=o.h;o.h=null,o.m.apply(null,u)}class Ie extends Vt{constructor(u,h){super(),this.m=u,this.l=h,this.h=null,this.i=!1,this.g=null}j(u){this.h=arguments,this.g?this.i=!0:zt(this)}N(){super.N(),this.g&&(l.clearTimeout(this.g),this.g=null,this.i=!1,this.h=null)}}function Xt(o){Vt.call(this),this.h=o,this.g={}}V(Xt,Vt);var on=[];function xr(o){dt(o.g,function(u,h){this.g.hasOwnProperty(h)&&$(u)},o),o.g={}}Xt.prototype.N=function(){Xt.aa.N.call(this),xr(this)},Xt.prototype.handleEvent=function(){throw Error("EventHandler.handleEvent not implemented")};var Kt=l.JSON.stringify,Ae=l.JSON.parse,Ns=class{stringify(o){return l.JSON.stringify(o,void 0)}parse(o){return l.JSON.parse(o,void 0)}};function lo(){}lo.prototype.h=null;function Nl(o){return o.h||(o.h=o.i())}function Ol(){}var Nr={OPEN:"a",kb:"b",Ja:"c",wb:"d"};function uo(){Dt.call(this,"d")}V(uo,Dt);function co(){Dt.call(this,"c")}V(co,Dt);var Dn={},Ml=null;function Os(){return Ml=Ml||new nt}Dn.La="serverreachability";function kl(o){Dt.call(this,Dn.La,o)}V(kl,Dt);function Or(o){const u=Os();lt(u,new kl(u))}Dn.STAT_EVENT="statevent";function Ll(o,u){Dt.call(this,Dn.STAT_EVENT,o),this.stat=u}V(Ll,Dt);function ce(o){const u=Os();lt(u,new Ll(u,o))}Dn.Ma="timingevent";function Fl(o,u){Dt.call(this,Dn.Ma,o),this.size=u}V(Fl,Dt);function Mr(o,u){if(typeof o!="function")throw Error("Fn must not be null and must be a function");return l.setTimeout(function(){o()},u)}function kr(){this.g=!0}kr.prototype.xa=function(){this.g=!1};function Pp(o,u,h,g,C,P){o.info(function(){if(o.g)if(P)for(var q="",Rt=P.split("&"),Gt=0;Gt<Rt.length;Gt++){var Tt=Rt[Gt].split("=");if(1<Tt.length){var Jt=Tt[0];Tt=Tt[1];var Zt=Jt.split("_");q=2<=Zt.length&&Zt[1]=="type"?q+(Jt+"="+Tt+"&"):q+(Jt+"=redacted&")}}else q=null;else q=P;return"XMLHTTP REQ ("+g+") [attempt "+C+"]: "+u+`
`+h+`
`+q})}function Vp(o,u,h,g,C,P,q){o.info(function(){return"XMLHTTP RESP ("+g+") [ attempt "+C+"]: "+u+`
`+h+`
`+P+" "+q})}function Qn(o,u,h,g){o.info(function(){return"XMLHTTP TEXT ("+u+"): "+xp(o,h)+(g?" "+g:"")})}function Dp(o,u){o.info(function(){return"TIMEOUT: "+u})}kr.prototype.info=function(){};function xp(o,u){if(!o.g)return u;if(!u)return null;try{var h=JSON.parse(u);if(h){for(o=0;o<h.length;o++)if(Array.isArray(h[o])){var g=h[o];if(!(2>g.length)){var C=g[1];if(Array.isArray(C)&&!(1>C.length)){var P=C[0];if(P!="noop"&&P!="stop"&&P!="close")for(var q=1;q<C.length;q++)C[q]=""}}}}return Kt(h)}catch{return u}}var Ms={NO_ERROR:0,gb:1,tb:2,sb:3,nb:4,rb:5,ub:6,Ia:7,TIMEOUT:8,xb:9},Ul={lb:"complete",Hb:"success",Ja:"error",Ia:"abort",zb:"ready",Ab:"readystatechange",TIMEOUT:"timeout",vb:"incrementaldata",yb:"progress",ob:"downloadprogress",Pb:"uploadprogress"},ho;function ks(){}V(ks,lo),ks.prototype.g=function(){return new XMLHttpRequest},ks.prototype.i=function(){return{}},ho=new ks;function an(o,u,h,g){this.j=o,this.i=u,this.l=h,this.R=g||1,this.U=new Xt(this),this.I=45e3,this.H=null,this.o=!1,this.m=this.A=this.v=this.L=this.F=this.S=this.B=null,this.D=[],this.g=null,this.C=0,this.s=this.u=null,this.X=-1,this.J=!1,this.O=0,this.M=null,this.W=this.K=this.T=this.P=!1,this.h=new Bl}function Bl(){this.i=null,this.g="",this.h=!1}var $l={},fo={};function po(o,u,h){o.L=1,o.v=Bs(Ge(u)),o.m=h,o.P=!0,jl(o,null)}function jl(o,u){o.F=Date.now(),Ls(o),o.A=Ge(o.v);var h=o.A,g=o.R;Array.isArray(g)||(g=[String(g)]),nu(h.i,"t",g),o.C=0,h=o.j.J,o.h=new Bl,o.g=Eu(o.j,h?u:null,!o.m),0<o.O&&(o.M=new Ie(m(o.Y,o,o.g),o.O)),u=o.U,h=o.g,g=o.ca;var C="readystatechange";Array.isArray(C)||(C&&(on[0]=C.toString()),C=on);for(var P=0;P<C.length;P++){var q=k(h,C[P],g||u.handleEvent,!1,u.h||u);if(!q)break;u.g[q.key]=q}u=o.H?y(o.H):{},o.m?(o.u||(o.u="POST"),u["Content-Type"]="application/x-www-form-urlencoded",o.g.ea(o.A,o.u,o.m,u)):(o.u="GET",o.g.ea(o.A,o.u,null,u)),Or(),Pp(o.i,o.u,o.A,o.l,o.R,o.m)}an.prototype.ca=function(o){o=o.target;const u=this.M;u&&We(o)==3?u.j():this.Y(o)},an.prototype.Y=function(o){try{if(o==this.g)t:{const Zt=We(this.g);var u=this.g.Ba();const Jn=this.g.Z();if(!(3>Zt)&&(Zt!=3||this.g&&(this.h.h||this.g.oa()||uu(this.g)))){this.J||Zt!=4||u==7||(u==8||0>=Jn?Or(3):Or(2)),go(this);var h=this.g.Z();this.X=h;e:if(ql(this)){var g=uu(this.g);o="";var C=g.length,P=We(this.g)==4;if(!this.h.i){if(typeof TextDecoder>"u"){xn(this),Lr(this);var q="";break e}this.h.i=new l.TextDecoder}for(u=0;u<C;u++)this.h.h=!0,o+=this.h.i.decode(g[u],{stream:!(P&&u==C-1)});g.length=0,this.h.g+=o,this.C=0,q=this.h.g}else q=this.g.oa();if(this.o=h==200,Vp(this.i,this.u,this.A,this.l,this.R,Zt,h),this.o){if(this.T&&!this.K){e:{if(this.g){var Rt,Gt=this.g;if((Rt=Gt.g?Gt.g.getResponseHeader("X-HTTP-Initial-Response"):null)&&!U(Rt)){var Tt=Rt;break e}}Tt=null}if(h=Tt)Qn(this.i,this.l,h,"Initial handshake response via X-HTTP-Initial-Response"),this.K=!0,mo(this,h);else{this.o=!1,this.s=3,ce(12),xn(this),Lr(this);break t}}if(this.P){h=!0;let Ce;for(;!this.J&&this.C<q.length;)if(Ce=Np(this,q),Ce==fo){Zt==4&&(this.s=4,ce(14),h=!1),Qn(this.i,this.l,null,"[Incomplete Response]");break}else if(Ce==$l){this.s=4,ce(15),Qn(this.i,this.l,q,"[Invalid Chunk]"),h=!1;break}else Qn(this.i,this.l,Ce,null),mo(this,Ce);if(ql(this)&&this.C!=0&&(this.h.g=this.h.g.slice(this.C),this.C=0),Zt!=4||q.length!=0||this.h.h||(this.s=1,ce(16),h=!1),this.o=this.o&&h,!h)Qn(this.i,this.l,q,"[Invalid Chunked Response]"),xn(this),Lr(this);else if(0<q.length&&!this.W){this.W=!0;var Jt=this.j;Jt.g==this&&Jt.ba&&!Jt.M&&(Jt.j.info("Great, no buffering proxy detected. Bytes received: "+q.length),wo(Jt),Jt.M=!0,ce(11))}}else Qn(this.i,this.l,q,null),mo(this,q);Zt==4&&xn(this),this.o&&!this.J&&(Zt==4?mu(this.j,this):(this.o=!1,Ls(this)))}else Yp(this.g),h==400&&0<q.indexOf("Unknown SID")?(this.s=3,ce(12)):(this.s=0,ce(13)),xn(this),Lr(this)}}}catch{}finally{}};function ql(o){return o.g?o.u=="GET"&&o.L!=2&&o.j.Ca:!1}function Np(o,u){var h=o.C,g=u.indexOf(`
`,h);return g==-1?fo:(h=Number(u.substring(h,g)),isNaN(h)?$l:(g+=1,g+h>u.length?fo:(u=u.slice(g,g+h),o.C=g+h,u)))}an.prototype.cancel=function(){this.J=!0,xn(this)};function Ls(o){o.S=Date.now()+o.I,Hl(o,o.I)}function Hl(o,u){if(o.B!=null)throw Error("WatchDog timer not null");o.B=Mr(m(o.ba,o),u)}function go(o){o.B&&(l.clearTimeout(o.B),o.B=null)}an.prototype.ba=function(){this.B=null;const o=Date.now();0<=o-this.S?(Dp(this.i,this.A),this.L!=2&&(Or(),ce(17)),xn(this),this.s=2,Lr(this)):Hl(this,this.S-o)};function Lr(o){o.j.G==0||o.J||mu(o.j,o)}function xn(o){go(o);var u=o.M;u&&typeof u.ma=="function"&&u.ma(),o.M=null,xr(o.U),o.g&&(u=o.g,o.g=null,u.abort(),u.ma())}function mo(o,u){try{var h=o.j;if(h.G!=0&&(h.g==o||_o(h.h,o))){if(!o.K&&_o(h.h,o)&&h.G==3){try{var g=h.Da.g.parse(u)}catch{g=null}if(Array.isArray(g)&&g.length==3){var C=g;if(C[0]==0){t:if(!h.u){if(h.g)if(h.g.F+3e3<o.F)Ks(h),Hs(h);else break t;To(h),ce(18)}}else h.za=C[1],0<h.za-h.T&&37500>C[2]&&h.F&&h.v==0&&!h.C&&(h.C=Mr(m(h.Za,h),6e3));if(1>=Gl(h.h)&&h.ca){try{h.ca()}catch{}h.ca=void 0}}else On(h,11)}else if((o.K||h.g==o)&&Ks(h),!U(u))for(C=h.Da.g.parse(u),u=0;u<C.length;u++){let Tt=C[u];if(h.T=Tt[0],Tt=Tt[1],h.G==2)if(Tt[0]=="c"){h.K=Tt[1],h.ia=Tt[2];const Jt=Tt[3];Jt!=null&&(h.la=Jt,h.j.info("VER="+h.la));const Zt=Tt[4];Zt!=null&&(h.Aa=Zt,h.j.info("SVER="+h.Aa));const Jn=Tt[5];Jn!=null&&typeof Jn=="number"&&0<Jn&&(g=1.5*Jn,h.L=g,h.j.info("backChannelRequestTimeoutMs_="+g)),g=h;const Ce=o.g;if(Ce){const Ws=Ce.g?Ce.g.getResponseHeader("X-Client-Wire-Protocol"):null;if(Ws){var P=g.h;P.g||Ws.indexOf("spdy")==-1&&Ws.indexOf("quic")==-1&&Ws.indexOf("h2")==-1||(P.j=P.l,P.g=new Set,P.h&&(yo(P,P.h),P.h=null))}if(g.D){const Io=Ce.g?Ce.g.getResponseHeader("X-HTTP-Session-Id"):null;Io&&(g.ya=Io,Ct(g.I,g.D,Io))}}h.G=3,h.l&&h.l.ua(),h.ba&&(h.R=Date.now()-o.F,h.j.info("Handshake RTT: "+h.R+"ms")),g=h;var q=o;if(g.qa=vu(g,g.J?g.ia:null,g.W),q.K){Wl(g.h,q);var Rt=q,Gt=g.L;Gt&&(Rt.I=Gt),Rt.B&&(go(Rt),Ls(Rt)),g.g=q}else pu(g);0<h.i.length&&zs(h)}else Tt[0]!="stop"&&Tt[0]!="close"||On(h,7);else h.G==3&&(Tt[0]=="stop"||Tt[0]=="close"?Tt[0]=="stop"?On(h,7):Eo(h):Tt[0]!="noop"&&h.l&&h.l.ta(Tt),h.v=0)}}Or(4)}catch{}}var Op=class{constructor(o,u){this.g=o,this.map=u}};function zl(o){this.l=o||10,l.PerformanceNavigationTiming?(o=l.performance.getEntriesByType("navigation"),o=0<o.length&&(o[0].nextHopProtocol=="hq"||o[0].nextHopProtocol=="h2")):o=!!(l.chrome&&l.chrome.loadTimes&&l.chrome.loadTimes()&&l.chrome.loadTimes().wasFetchedViaSpdy),this.j=o?this.l:1,this.g=null,1<this.j&&(this.g=new Set),this.h=null,this.i=[]}function Kl(o){return o.h?!0:o.g?o.g.size>=o.j:!1}function Gl(o){return o.h?1:o.g?o.g.size:0}function _o(o,u){return o.h?o.h==u:o.g?o.g.has(u):!1}function yo(o,u){o.g?o.g.add(u):o.h=u}function Wl(o,u){o.h&&o.h==u?o.h=null:o.g&&o.g.has(u)&&o.g.delete(u)}zl.prototype.cancel=function(){if(this.i=Ql(this),this.h)this.h.cancel(),this.h=null;else if(this.g&&this.g.size!==0){for(const o of this.g.values())o.cancel();this.g.clear()}};function Ql(o){if(o.h!=null)return o.i.concat(o.h.D);if(o.g!=null&&o.g.size!==0){let u=o.i;for(const h of o.g.values())u=u.concat(h.D);return u}return N(o.i)}function Mp(o){if(o.V&&typeof o.V=="function")return o.V();if(typeof Map<"u"&&o instanceof Map||typeof Set<"u"&&o instanceof Set)return Array.from(o.values());if(typeof o=="string")return o.split("");if(c(o)){for(var u=[],h=o.length,g=0;g<h;g++)u.push(o[g]);return u}u=[],h=0;for(g in o)u[h++]=o[g];return u}function kp(o){if(o.na&&typeof o.na=="function")return o.na();if(!o.V||typeof o.V!="function"){if(typeof Map<"u"&&o instanceof Map)return Array.from(o.keys());if(!(typeof Set<"u"&&o instanceof Set)){if(c(o)||typeof o=="string"){var u=[];o=o.length;for(var h=0;h<o;h++)u.push(h);return u}u=[],h=0;for(const g in o)u[h++]=g;return u}}}function Yl(o,u){if(o.forEach&&typeof o.forEach=="function")o.forEach(u,void 0);else if(c(o)||typeof o=="string")Array.prototype.forEach.call(o,u,void 0);else for(var h=kp(o),g=Mp(o),C=g.length,P=0;P<C;P++)u.call(void 0,g[P],h&&h[P],o)}var Xl=RegExp("^(?:([^:/?#.]+):)?(?://(?:([^\\\\/?#]*)@)?([^\\\\/?#]*?)(?::([0-9]+))?(?=[\\\\/?#]|$))?([^?#]+)?(?:\\?([^#]*))?(?:#([\\s\\S]*))?$");function Lp(o,u){if(o){o=o.split("&");for(var h=0;h<o.length;h++){var g=o[h].indexOf("="),C=null;if(0<=g){var P=o[h].substring(0,g);C=o[h].substring(g+1)}else P=o[h];u(P,C?decodeURIComponent(C.replace(/\+/g," ")):"")}}}function Nn(o){if(this.g=this.o=this.j="",this.s=null,this.m=this.l="",this.h=!1,o instanceof Nn){this.h=o.h,Fs(this,o.j),this.o=o.o,this.g=o.g,Us(this,o.s),this.l=o.l;var u=o.i,h=new Br;h.i=u.i,u.g&&(h.g=new Map(u.g),h.h=u.h),Jl(this,h),this.m=o.m}else o&&(u=String(o).match(Xl))?(this.h=!1,Fs(this,u[1]||"",!0),this.o=Fr(u[2]||""),this.g=Fr(u[3]||"",!0),Us(this,u[4]),this.l=Fr(u[5]||"",!0),Jl(this,u[6]||"",!0),this.m=Fr(u[7]||"")):(this.h=!1,this.i=new Br(null,this.h))}Nn.prototype.toString=function(){var o=[],u=this.j;u&&o.push(Ur(u,Zl,!0),":");var h=this.g;return(h||u=="file")&&(o.push("//"),(u=this.o)&&o.push(Ur(u,Zl,!0),"@"),o.push(encodeURIComponent(String(h)).replace(/%25([0-9a-fA-F]{2})/g,"%$1")),h=this.s,h!=null&&o.push(":",String(h))),(h=this.l)&&(this.g&&h.charAt(0)!="/"&&o.push("/"),o.push(Ur(h,h.charAt(0)=="/"?Bp:Up,!0))),(h=this.i.toString())&&o.push("?",h),(h=this.m)&&o.push("#",Ur(h,jp)),o.join("")};function Ge(o){return new Nn(o)}function Fs(o,u,h){o.j=h?Fr(u,!0):u,o.j&&(o.j=o.j.replace(/:$/,""))}function Us(o,u){if(u){if(u=Number(u),isNaN(u)||0>u)throw Error("Bad port number "+u);o.s=u}else o.s=null}function Jl(o,u,h){u instanceof Br?(o.i=u,qp(o.i,o.h)):(h||(u=Ur(u,$p)),o.i=new Br(u,o.h))}function Ct(o,u,h){o.i.set(u,h)}function Bs(o){return Ct(o,"zx",Math.floor(2147483648*Math.random()).toString(36)+Math.abs(Math.floor(2147483648*Math.random())^Date.now()).toString(36)),o}function Fr(o,u){return o?u?decodeURI(o.replace(/%25/g,"%2525")):decodeURIComponent(o):""}function Ur(o,u,h){return typeof o=="string"?(o=encodeURI(o).replace(u,Fp),h&&(o=o.replace(/%25([0-9a-fA-F]{2})/g,"%$1")),o):null}function Fp(o){return o=o.charCodeAt(0),"%"+(o>>4&15).toString(16)+(o&15).toString(16)}var Zl=/[#\/\?@]/g,Up=/[#\?:]/g,Bp=/[#\?]/g,$p=/[#\?@]/g,jp=/#/g;function Br(o,u){this.h=this.g=null,this.i=o||null,this.j=!!u}function ln(o){o.g||(o.g=new Map,o.h=0,o.i&&Lp(o.i,function(u,h){o.add(decodeURIComponent(u.replace(/\+/g," ")),h)}))}e=Br.prototype,e.add=function(o,u){ln(this),this.i=null,o=Yn(this,o);var h=this.g.get(o);return h||this.g.set(o,h=[]),h.push(u),this.h+=1,this};function tu(o,u){ln(o),u=Yn(o,u),o.g.has(u)&&(o.i=null,o.h-=o.g.get(u).length,o.g.delete(u))}function eu(o,u){return ln(o),u=Yn(o,u),o.g.has(u)}e.forEach=function(o,u){ln(this),this.g.forEach(function(h,g){h.forEach(function(C){o.call(u,C,g,this)},this)},this)},e.na=function(){ln(this);const o=Array.from(this.g.values()),u=Array.from(this.g.keys()),h=[];for(let g=0;g<u.length;g++){const C=o[g];for(let P=0;P<C.length;P++)h.push(u[g])}return h},e.V=function(o){ln(this);let u=[];if(typeof o=="string")eu(this,o)&&(u=u.concat(this.g.get(Yn(this,o))));else{o=Array.from(this.g.values());for(let h=0;h<o.length;h++)u=u.concat(o[h])}return u},e.set=function(o,u){return ln(this),this.i=null,o=Yn(this,o),eu(this,o)&&(this.h-=this.g.get(o).length),this.g.set(o,[u]),this.h+=1,this},e.get=function(o,u){return o?(o=this.V(o),0<o.length?String(o[0]):u):u};function nu(o,u,h){tu(o,u),0<h.length&&(o.i=null,o.g.set(Yn(o,u),N(h)),o.h+=h.length)}e.toString=function(){if(this.i)return this.i;if(!this.g)return"";const o=[],u=Array.from(this.g.keys());for(var h=0;h<u.length;h++){var g=u[h];const P=encodeURIComponent(String(g)),q=this.V(g);for(g=0;g<q.length;g++){var C=P;q[g]!==""&&(C+="="+encodeURIComponent(String(q[g]))),o.push(C)}}return this.i=o.join("&")};function Yn(o,u){return u=String(u),o.j&&(u=u.toLowerCase()),u}function qp(o,u){u&&!o.j&&(ln(o),o.i=null,o.g.forEach(function(h,g){var C=g.toLowerCase();g!=C&&(tu(this,g),nu(this,C,h))},o)),o.j=u}function Hp(o,u){const h=new kr;if(l.Image){const g=new Image;g.onload=T(un,h,"TestLoadImage: loaded",!0,u,g),g.onerror=T(un,h,"TestLoadImage: error",!1,u,g),g.onabort=T(un,h,"TestLoadImage: abort",!1,u,g),g.ontimeout=T(un,h,"TestLoadImage: timeout",!1,u,g),l.setTimeout(function(){g.ontimeout&&g.ontimeout()},1e4),g.src=o}else u(!1)}function zp(o,u){const h=new kr,g=new AbortController,C=setTimeout(()=>{g.abort(),un(h,"TestPingServer: timeout",!1,u)},1e4);fetch(o,{signal:g.signal}).then(P=>{clearTimeout(C),P.ok?un(h,"TestPingServer: ok",!0,u):un(h,"TestPingServer: server error",!1,u)}).catch(()=>{clearTimeout(C),un(h,"TestPingServer: error",!1,u)})}function un(o,u,h,g,C){try{C&&(C.onload=null,C.onerror=null,C.onabort=null,C.ontimeout=null),g(h)}catch{}}function Kp(){this.g=new Ns}function Gp(o,u,h){const g=h||"";try{Yl(o,function(C,P){let q=C;f(C)&&(q=Kt(C)),u.push(g+P+"="+encodeURIComponent(q))})}catch(C){throw u.push(g+"type="+encodeURIComponent("_badmap")),C}}function $s(o){this.l=o.Ub||null,this.j=o.eb||!1}V($s,lo),$s.prototype.g=function(){return new js(this.l,this.j)},$s.prototype.i=function(o){return function(){return o}}({});function js(o,u){nt.call(this),this.D=o,this.o=u,this.m=void 0,this.status=this.readyState=0,this.responseType=this.responseText=this.response=this.statusText="",this.onreadystatechange=null,this.u=new Headers,this.h=null,this.B="GET",this.A="",this.g=!1,this.v=this.j=this.l=null}V(js,nt),e=js.prototype,e.open=function(o,u){if(this.readyState!=0)throw this.abort(),Error("Error reopening a connection");this.B=o,this.A=u,this.readyState=1,jr(this)},e.send=function(o){if(this.readyState!=1)throw this.abort(),Error("need to call open() first. ");this.g=!0;const u={headers:this.u,method:this.B,credentials:this.m,cache:void 0};o&&(u.body=o),(this.D||l).fetch(new Request(this.A,u)).then(this.Sa.bind(this),this.ga.bind(this))},e.abort=function(){this.response=this.responseText="",this.u=new Headers,this.status=0,this.j&&this.j.cancel("Request was aborted.").catch(()=>{}),1<=this.readyState&&this.g&&this.readyState!=4&&(this.g=!1,$r(this)),this.readyState=0},e.Sa=function(o){if(this.g&&(this.l=o,this.h||(this.status=this.l.status,this.statusText=this.l.statusText,this.h=o.headers,this.readyState=2,jr(this)),this.g&&(this.readyState=3,jr(this),this.g)))if(this.responseType==="arraybuffer")o.arrayBuffer().then(this.Qa.bind(this),this.ga.bind(this));else if(typeof l.ReadableStream<"u"&&"body"in o){if(this.j=o.body.getReader(),this.o){if(this.responseType)throw Error('responseType must be empty for "streamBinaryChunks" mode responses.');this.response=[]}else this.response=this.responseText="",this.v=new TextDecoder;ru(this)}else o.text().then(this.Ra.bind(this),this.ga.bind(this))};function ru(o){o.j.read().then(o.Pa.bind(o)).catch(o.ga.bind(o))}e.Pa=function(o){if(this.g){if(this.o&&o.value)this.response.push(o.value);else if(!this.o){var u=o.value?o.value:new Uint8Array(0);(u=this.v.decode(u,{stream:!o.done}))&&(this.response=this.responseText+=u)}o.done?$r(this):jr(this),this.readyState==3&&ru(this)}},e.Ra=function(o){this.g&&(this.response=this.responseText=o,$r(this))},e.Qa=function(o){this.g&&(this.response=o,$r(this))},e.ga=function(){this.g&&$r(this)};function $r(o){o.readyState=4,o.l=null,o.j=null,o.v=null,jr(o)}e.setRequestHeader=function(o,u){this.u.append(o,u)},e.getResponseHeader=function(o){return this.h&&this.h.get(o.toLowerCase())||""},e.getAllResponseHeaders=function(){if(!this.h)return"";const o=[],u=this.h.entries();for(var h=u.next();!h.done;)h=h.value,o.push(h[0]+": "+h[1]),h=u.next();return o.join(`\r
`)};function jr(o){o.onreadystatechange&&o.onreadystatechange.call(o)}Object.defineProperty(js.prototype,"withCredentials",{get:function(){return this.m==="include"},set:function(o){this.m=o?"include":"same-origin"}});function su(o){let u="";return dt(o,function(h,g){u+=g,u+=":",u+=h,u+=`\r
`}),u}function vo(o,u,h){t:{for(g in h){var g=!1;break t}g=!0}g||(h=su(h),typeof o=="string"?h!=null&&encodeURIComponent(String(h)):Ct(o,u,h))}function Ot(o){nt.call(this),this.headers=new Map,this.o=o||null,this.h=!1,this.v=this.g=null,this.D="",this.m=0,this.l="",this.j=this.B=this.u=this.A=!1,this.I=null,this.H="",this.J=!1}V(Ot,nt);var Wp=/^https?$/i,Qp=["POST","PUT"];e=Ot.prototype,e.Ha=function(o){this.J=o},e.ea=function(o,u,h,g){if(this.g)throw Error("[goog.net.XhrIo] Object is active with another request="+this.D+"; newUri="+o);u=u?u.toUpperCase():"GET",this.D=o,this.l="",this.m=0,this.A=!1,this.h=!0,this.g=this.o?this.o.g():ho.g(),this.v=this.o?Nl(this.o):Nl(ho),this.g.onreadystatechange=m(this.Ea,this);try{this.B=!0,this.g.open(u,String(o),!0),this.B=!1}catch(P){iu(this,P);return}if(o=h||"",h=new Map(this.headers),g)if(Object.getPrototypeOf(g)===Object.prototype)for(var C in g)h.set(C,g[C]);else if(typeof g.keys=="function"&&typeof g.get=="function")for(const P of g.keys())h.set(P,g.get(P));else throw Error("Unknown input type for opt_headers: "+String(g));g=Array.from(h.keys()).find(P=>P.toLowerCase()=="content-type"),C=l.FormData&&o instanceof l.FormData,!(0<=Array.prototype.indexOf.call(Qp,u,void 0))||g||C||h.set("Content-Type","application/x-www-form-urlencoded;charset=utf-8");for(const[P,q]of h)this.g.setRequestHeader(P,q);this.H&&(this.g.responseType=this.H),"withCredentials"in this.g&&this.g.withCredentials!==this.J&&(this.g.withCredentials=this.J);try{lu(this),this.u=!0,this.g.send(o),this.u=!1}catch(P){iu(this,P)}};function iu(o,u){o.h=!1,o.g&&(o.j=!0,o.g.abort(),o.j=!1),o.l=u,o.m=5,ou(o),qs(o)}function ou(o){o.A||(o.A=!0,lt(o,"complete"),lt(o,"error"))}e.abort=function(o){this.g&&this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1,this.m=o||7,lt(this,"complete"),lt(this,"abort"),qs(this))},e.N=function(){this.g&&(this.h&&(this.h=!1,this.j=!0,this.g.abort(),this.j=!1),qs(this,!0)),Ot.aa.N.call(this)},e.Ea=function(){this.s||(this.B||this.u||this.j?au(this):this.bb())},e.bb=function(){au(this)};function au(o){if(o.h&&typeof a<"u"&&(!o.v[1]||We(o)!=4||o.Z()!=2)){if(o.u&&We(o)==4)Yt(o.Ea,0,o);else if(lt(o,"readystatechange"),We(o)==4){o.h=!1;try{const q=o.Z();t:switch(q){case 200:case 201:case 202:case 204:case 206:case 304:case 1223:var u=!0;break t;default:u=!1}var h;if(!(h=u)){var g;if(g=q===0){var C=String(o.D).match(Xl)[1]||null;!C&&l.self&&l.self.location&&(C=l.self.location.protocol.slice(0,-1)),g=!Wp.test(C?C.toLowerCase():"")}h=g}if(h)lt(o,"complete"),lt(o,"success");else{o.m=6;try{var P=2<We(o)?o.g.statusText:""}catch{P=""}o.l=P+" ["+o.Z()+"]",ou(o)}}finally{qs(o)}}}}function qs(o,u){if(o.g){lu(o);const h=o.g,g=o.v[0]?()=>{}:null;o.g=null,o.v=null,u||lt(o,"ready");try{h.onreadystatechange=g}catch{}}}function lu(o){o.I&&(l.clearTimeout(o.I),o.I=null)}e.isActive=function(){return!!this.g};function We(o){return o.g?o.g.readyState:0}e.Z=function(){try{return 2<We(this)?this.g.status:-1}catch{return-1}},e.oa=function(){try{return this.g?this.g.responseText:""}catch{return""}},e.Oa=function(o){if(this.g){var u=this.g.responseText;return o&&u.indexOf(o)==0&&(u=u.substring(o.length)),Ae(u)}};function uu(o){try{if(!o.g)return null;if("response"in o.g)return o.g.response;switch(o.H){case"":case"text":return o.g.responseText;case"arraybuffer":if("mozResponseArrayBuffer"in o.g)return o.g.mozResponseArrayBuffer}return null}catch{return null}}function Yp(o){const u={};o=(o.g&&2<=We(o)&&o.g.getAllResponseHeaders()||"").split(`\r
`);for(let g=0;g<o.length;g++){if(U(o[g]))continue;var h=R(o[g]);const C=h[0];if(h=h[1],typeof h!="string")continue;h=h.trim();const P=u[C]||[];u[C]=P,P.push(h)}I(u,function(g){return g.join(", ")})}e.Ba=function(){return this.m},e.Ka=function(){return typeof this.l=="string"?this.l:String(this.l)};function qr(o,u,h){return h&&h.internalChannelParams&&h.internalChannelParams[o]||u}function cu(o){this.Aa=0,this.i=[],this.j=new kr,this.ia=this.qa=this.I=this.W=this.g=this.ya=this.D=this.H=this.m=this.S=this.o=null,this.Ya=this.U=0,this.Va=qr("failFast",!1,o),this.F=this.C=this.u=this.s=this.l=null,this.X=!0,this.za=this.T=-1,this.Y=this.v=this.B=0,this.Ta=qr("baseRetryDelayMs",5e3,o),this.cb=qr("retryDelaySeedMs",1e4,o),this.Wa=qr("forwardChannelMaxRetries",2,o),this.wa=qr("forwardChannelRequestTimeoutMs",2e4,o),this.pa=o&&o.xmlHttpFactory||void 0,this.Xa=o&&o.Tb||void 0,this.Ca=o&&o.useFetchStreams||!1,this.L=void 0,this.J=o&&o.supportsCrossDomainXhr||!1,this.K="",this.h=new zl(o&&o.concurrentRequestLimit),this.Da=new Kp,this.P=o&&o.fastHandshake||!1,this.O=o&&o.encodeInitMessageHeaders||!1,this.P&&this.O&&(this.O=!1),this.Ua=o&&o.Rb||!1,o&&o.xa&&this.j.xa(),o&&o.forceLongPolling&&(this.X=!1),this.ba=!this.P&&this.X&&o&&o.detectBufferingProxy||!1,this.ja=void 0,o&&o.longPollingTimeout&&0<o.longPollingTimeout&&(this.ja=o.longPollingTimeout),this.ca=void 0,this.R=0,this.M=!1,this.ka=this.A=null}e=cu.prototype,e.la=8,e.G=1,e.connect=function(o,u,h,g){ce(0),this.W=o,this.H=u||{},h&&g!==void 0&&(this.H.OSID=h,this.H.OAID=g),this.F=this.X,this.I=vu(this,null,this.W),zs(this)};function Eo(o){if(hu(o),o.G==3){var u=o.U++,h=Ge(o.I);if(Ct(h,"SID",o.K),Ct(h,"RID",u),Ct(h,"TYPE","terminate"),Hr(o,h),u=new an(o,o.j,u),u.L=2,u.v=Bs(Ge(h)),h=!1,l.navigator&&l.navigator.sendBeacon)try{h=l.navigator.sendBeacon(u.v.toString(),"")}catch{}!h&&l.Image&&(new Image().src=u.v,h=!0),h||(u.g=Eu(u.j,null),u.g.ea(u.v)),u.F=Date.now(),Ls(u)}yu(o)}function Hs(o){o.g&&(wo(o),o.g.cancel(),o.g=null)}function hu(o){Hs(o),o.u&&(l.clearTimeout(o.u),o.u=null),Ks(o),o.h.cancel(),o.s&&(typeof o.s=="number"&&l.clearTimeout(o.s),o.s=null)}function zs(o){if(!Kl(o.h)&&!o.s){o.s=!0;var u=o.Ga;pt||Se(),ft||(pt(),ft=!0),me.add(u,o),o.B=0}}function Xp(o,u){return Gl(o.h)>=o.h.j-(o.s?1:0)?!1:o.s?(o.i=u.D.concat(o.i),!0):o.G==1||o.G==2||o.B>=(o.Va?0:o.Wa)?!1:(o.s=Mr(m(o.Ga,o,u),_u(o,o.B)),o.B++,!0)}e.Ga=function(o){if(this.s)if(this.s=null,this.G==1){if(!o){this.U=Math.floor(1e5*Math.random()),o=this.U++;const C=new an(this,this.j,o);let P=this.o;if(this.S&&(P?(P=y(P),A(P,this.S)):P=this.S),this.m!==null||this.O||(C.H=P,P=null),this.P)t:{for(var u=0,h=0;h<this.i.length;h++){e:{var g=this.i[h];if("__data__"in g.map&&(g=g.map.__data__,typeof g=="string")){g=g.length;break e}g=void 0}if(g===void 0)break;if(u+=g,4096<u){u=h;break t}if(u===4096||h===this.i.length-1){u=h+1;break t}}u=1e3}else u=1e3;u=du(this,C,u),h=Ge(this.I),Ct(h,"RID",o),Ct(h,"CVER",22),this.D&&Ct(h,"X-HTTP-Session-Id",this.D),Hr(this,h),P&&(this.O?u="headers="+encodeURIComponent(String(su(P)))+"&"+u:this.m&&vo(h,this.m,P)),yo(this.h,C),this.Ua&&Ct(h,"TYPE","init"),this.P?(Ct(h,"$req",u),Ct(h,"SID","null"),C.T=!0,po(C,h,null)):po(C,h,u),this.G=2}}else this.G==3&&(o?fu(this,o):this.i.length==0||Kl(this.h)||fu(this))};function fu(o,u){var h;u?h=u.l:h=o.U++;const g=Ge(o.I);Ct(g,"SID",o.K),Ct(g,"RID",h),Ct(g,"AID",o.T),Hr(o,g),o.m&&o.o&&vo(g,o.m,o.o),h=new an(o,o.j,h,o.B+1),o.m===null&&(h.H=o.o),u&&(o.i=u.D.concat(o.i)),u=du(o,h,1e3),h.I=Math.round(.5*o.wa)+Math.round(.5*o.wa*Math.random()),yo(o.h,h),po(h,g,u)}function Hr(o,u){o.H&&dt(o.H,function(h,g){Ct(u,g,h)}),o.l&&Yl({},function(h,g){Ct(u,g,h)})}function du(o,u,h){h=Math.min(o.i.length,h);var g=o.l?m(o.l.Na,o.l,o):null;t:{var C=o.i;let P=-1;for(;;){const q=["count="+h];P==-1?0<h?(P=C[0].g,q.push("ofs="+P)):P=0:q.push("ofs="+P);let Rt=!0;for(let Gt=0;Gt<h;Gt++){let Tt=C[Gt].g;const Jt=C[Gt].map;if(Tt-=P,0>Tt)P=Math.max(0,C[Gt].g-100),Rt=!1;else try{Gp(Jt,q,"req"+Tt+"_")}catch{g&&g(Jt)}}if(Rt){g=q.join("&");break t}}}return o=o.i.splice(0,h),u.D=o,g}function pu(o){if(!o.g&&!o.u){o.Y=1;var u=o.Fa;pt||Se(),ft||(pt(),ft=!0),me.add(u,o),o.v=0}}function To(o){return o.g||o.u||3<=o.v?!1:(o.Y++,o.u=Mr(m(o.Fa,o),_u(o,o.v)),o.v++,!0)}e.Fa=function(){if(this.u=null,gu(this),this.ba&&!(this.M||this.g==null||0>=this.R)){var o=2*this.R;this.j.info("BP detection timer enabled: "+o),this.A=Mr(m(this.ab,this),o)}},e.ab=function(){this.A&&(this.A=null,this.j.info("BP detection timeout reached."),this.j.info("Buffering proxy detected and switch to long-polling!"),this.F=!1,this.M=!0,ce(10),Hs(this),gu(this))};function wo(o){o.A!=null&&(l.clearTimeout(o.A),o.A=null)}function gu(o){o.g=new an(o,o.j,"rpc",o.Y),o.m===null&&(o.g.H=o.o),o.g.O=0;var u=Ge(o.qa);Ct(u,"RID","rpc"),Ct(u,"SID",o.K),Ct(u,"AID",o.T),Ct(u,"CI",o.F?"0":"1"),!o.F&&o.ja&&Ct(u,"TO",o.ja),Ct(u,"TYPE","xmlhttp"),Hr(o,u),o.m&&o.o&&vo(u,o.m,o.o),o.L&&(o.g.I=o.L);var h=o.g;o=o.ia,h.L=1,h.v=Bs(Ge(u)),h.m=null,h.P=!0,jl(h,o)}e.Za=function(){this.C!=null&&(this.C=null,Hs(this),To(this),ce(19))};function Ks(o){o.C!=null&&(l.clearTimeout(o.C),o.C=null)}function mu(o,u){var h=null;if(o.g==u){Ks(o),wo(o),o.g=null;var g=2}else if(_o(o.h,u))h=u.D,Wl(o.h,u),g=1;else return;if(o.G!=0){if(u.o)if(g==1){h=u.m?u.m.length:0,u=Date.now()-u.F;var C=o.B;g=Os(),lt(g,new Fl(g,h)),zs(o)}else pu(o);else if(C=u.s,C==3||C==0&&0<u.X||!(g==1&&Xp(o,u)||g==2&&To(o)))switch(h&&0<h.length&&(u=o.h,u.i=u.i.concat(h)),C){case 1:On(o,5);break;case 4:On(o,10);break;case 3:On(o,6);break;default:On(o,2)}}}function _u(o,u){let h=o.Ta+Math.floor(Math.random()*o.cb);return o.isActive()||(h*=2),h*u}function On(o,u){if(o.j.info("Error code "+u),u==2){var h=m(o.fb,o),g=o.Xa;const C=!g;g=new Nn(g||"//www.google.com/images/cleardot.gif"),l.location&&l.location.protocol=="http"||Fs(g,"https"),Bs(g),C?Hp(g.toString(),h):zp(g.toString(),h)}else ce(2);o.G=0,o.l&&o.l.sa(u),yu(o),hu(o)}e.fb=function(o){o?(this.j.info("Successfully pinged google.com"),ce(2)):(this.j.info("Failed to ping google.com"),ce(1))};function yu(o){if(o.G=0,o.ka=[],o.l){const u=Ql(o.h);(u.length!=0||o.i.length!=0)&&(L(o.ka,u),L(o.ka,o.i),o.h.i.length=0,N(o.i),o.i.length=0),o.l.ra()}}function vu(o,u,h){var g=h instanceof Nn?Ge(h):new Nn(h);if(g.g!="")u&&(g.g=u+"."+g.g),Us(g,g.s);else{var C=l.location;g=C.protocol,u=u?u+"."+C.hostname:C.hostname,C=+C.port;var P=new Nn(null);g&&Fs(P,g),u&&(P.g=u),C&&Us(P,C),h&&(P.l=h),g=P}return h=o.D,u=o.ya,h&&u&&Ct(g,h,u),Ct(g,"VER",o.la),Hr(o,g),g}function Eu(o,u,h){if(u&&!o.J)throw Error("Can't create secondary domain capable XhrIo object.");return u=o.Ca&&!o.pa?new Ot(new $s({eb:h})):new Ot(o.pa),u.Ha(o.J),u}e.isActive=function(){return!!this.l&&this.l.isActive(this)};function Tu(){}e=Tu.prototype,e.ua=function(){},e.ta=function(){},e.sa=function(){},e.ra=function(){},e.isActive=function(){return!0},e.Na=function(){};function Gs(){}Gs.prototype.g=function(o,u){return new _e(o,u)};function _e(o,u){nt.call(this),this.g=new cu(u),this.l=o,this.h=u&&u.messageUrlParams||null,o=u&&u.messageHeaders||null,u&&u.clientProtocolHeaderRequired&&(o?o["X-Client-Protocol"]="webchannel":o={"X-Client-Protocol":"webchannel"}),this.g.o=o,o=u&&u.initMessageHeaders||null,u&&u.messageContentType&&(o?o["X-WebChannel-Content-Type"]=u.messageContentType:o={"X-WebChannel-Content-Type":u.messageContentType}),u&&u.va&&(o?o["X-WebChannel-Client-Profile"]=u.va:o={"X-WebChannel-Client-Profile":u.va}),this.g.S=o,(o=u&&u.Sb)&&!U(o)&&(this.g.m=o),this.v=u&&u.supportsCrossDomainXhr||!1,this.u=u&&u.sendRawJson||!1,(u=u&&u.httpSessionIdParam)&&!U(u)&&(this.g.D=u,o=this.h,o!==null&&u in o&&(o=this.h,u in o&&delete o[u])),this.j=new Xn(this)}V(_e,nt),_e.prototype.m=function(){this.g.l=this.j,this.v&&(this.g.J=!0),this.g.connect(this.l,this.h||void 0)},_e.prototype.close=function(){Eo(this.g)},_e.prototype.o=function(o){var u=this.g;if(typeof o=="string"){var h={};h.__data__=o,o=h}else this.u&&(h={},h.__data__=Kt(o),o=h);u.i.push(new Op(u.Ya++,o)),u.G==3&&zs(u)},_e.prototype.N=function(){this.g.l=null,delete this.j,Eo(this.g),delete this.g,_e.aa.N.call(this)};function wu(o){uo.call(this),o.__headers__&&(this.headers=o.__headers__,this.statusCode=o.__status__,delete o.__headers__,delete o.__status__);var u=o.__sm__;if(u){t:{for(const h in u){o=h;break t}o=void 0}(this.i=o)&&(o=this.i,u=u!==null&&o in u?u[o]:void 0),this.data=u}else this.data=o}V(wu,uo);function Iu(){co.call(this),this.status=1}V(Iu,co);function Xn(o){this.g=o}V(Xn,Tu),Xn.prototype.ua=function(){lt(this.g,"a")},Xn.prototype.ta=function(o){lt(this.g,new wu(o))},Xn.prototype.sa=function(o){lt(this.g,new Iu)},Xn.prototype.ra=function(){lt(this.g,"b")},Gs.prototype.createWebChannel=Gs.prototype.g,_e.prototype.send=_e.prototype.o,_e.prototype.open=_e.prototype.m,_e.prototype.close=_e.prototype.close,dd=function(){return new Gs},fd=function(){return Os()},hd=Dn,fa={mb:0,pb:1,qb:2,Jb:3,Ob:4,Lb:5,Mb:6,Kb:7,Ib:8,Nb:9,PROXY:10,NOPROXY:11,Gb:12,Cb:13,Db:14,Bb:15,Eb:16,Fb:17,ib:18,hb:19,jb:20},Ms.NO_ERROR=0,Ms.TIMEOUT=8,Ms.HTTP_ERROR=6,ci=Ms,Ul.COMPLETE="complete",cd=Ul,Ol.EventType=Nr,Nr.OPEN="a",Nr.CLOSE="b",Nr.ERROR="c",Nr.MESSAGE="d",nt.prototype.listen=nt.prototype.K,Qr=Ol,Ot.prototype.listenOnce=Ot.prototype.L,Ot.prototype.getLastError=Ot.prototype.Ka,Ot.prototype.getLastErrorCode=Ot.prototype.Ba,Ot.prototype.getStatus=Ot.prototype.Z,Ot.prototype.getResponseJson=Ot.prototype.Oa,Ot.prototype.getResponseText=Ot.prototype.oa,Ot.prototype.send=Ot.prototype.ea,Ot.prototype.setWithCredentials=Ot.prototype.Ha,ud=Ot}).apply(typeof Js<"u"?Js:typeof self<"u"?self:typeof window<"u"?window:{});const Cc="@firebase/firestore",Pc="4.7.14";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ee{constructor(t){this.uid=t}isAuthenticated(){return this.uid!=null}toKey(){return this.isAuthenticated()?"uid:"+this.uid:"anonymous-user"}isEqual(t){return t.uid===this.uid}}ee.UNAUTHENTICATED=new ee(null),ee.GOOGLE_CREDENTIALS=new ee("google-credentials-uid"),ee.FIRST_PARTY=new ee("first-party-uid"),ee.MOCK_USER=new ee("mock-user");/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let Sr="11.7.3";/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const zn=new nd("@firebase/firestore");function nr(){return zn.logLevel}function X(e,...t){if(zn.logLevel<=_t.DEBUG){const n=t.map(rl);zn.debug(`Firestore (${Sr}): ${e}`,...n)}}function en(e,...t){if(zn.logLevel<=_t.ERROR){const n=t.map(rl);zn.error(`Firestore (${Sr}): ${e}`,...n)}}function yr(e,...t){if(zn.logLevel<=_t.WARN){const n=t.map(rl);zn.warn(`Firestore (${Sr}): ${e}`,...n)}}function rl(e){if(typeof e=="string")return e;try{/**
* @license
* Copyright 2020 Google LLC
*
* Licensed under the Apache License, Version 2.0 (the "License");
* you may not use this file except in compliance with the License.
* You may obtain a copy of the License at
*
*   http://www.apache.org/licenses/LICENSE-2.0
*
* Unless required by applicable law or agreed to in writing, software
* distributed under the License is distributed on an "AS IS" BASIS,
* WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
* See the License for the specific language governing permissions and
* limitations under the License.
*/return function(n){return JSON.stringify(n)}(e)}catch{return e}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ot(e,t,n){let r="Unexpected state";typeof t=="string"?r=t:n=t,pd(e,r,n)}function pd(e,t,n){let r=`FIRESTORE (${Sr}) INTERNAL ASSERTION FAILED: ${t} (ID: ${e.toString(16)})`;if(n!==void 0)try{r+=" CONTEXT: "+JSON.stringify(n)}catch{r+=" CONTEXT: "+n}throw en(r),new Error(r)}function Nt(e,t,n,r){let s="Unexpected state";typeof n=="string"?s=n:r=n,e||pd(t,s,r)}function yt(e,t){return e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const B={OK:"ok",CANCELLED:"cancelled",UNKNOWN:"unknown",INVALID_ARGUMENT:"invalid-argument",DEADLINE_EXCEEDED:"deadline-exceeded",NOT_FOUND:"not-found",ALREADY_EXISTS:"already-exists",PERMISSION_DENIED:"permission-denied",UNAUTHENTICATED:"unauthenticated",RESOURCE_EXHAUSTED:"resource-exhausted",FAILED_PRECONDITION:"failed-precondition",ABORTED:"aborted",OUT_OF_RANGE:"out-of-range",UNIMPLEMENTED:"unimplemented",INTERNAL:"internal",UNAVAILABLE:"unavailable",DATA_LOSS:"data-loss"};class Z extends br{constructor(t,n){super(t,n),this.code=t,this.message=n,this.toString=()=>`${this.name}: [code=${this.code}]: ${this.message}`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jn{constructor(){this.promise=new Promise((t,n)=>{this.resolve=t,this.reject=n})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gd{constructor(t,n){this.user=n,this.type="OAuth",this.headers=new Map,this.headers.set("Authorization",`Bearer ${t}`)}}class pE{getToken(){return Promise.resolve(null)}invalidateToken(){}start(t,n){t.enqueueRetryable(()=>n(ee.UNAUTHENTICATED))}shutdown(){}}class gE{constructor(t){this.token=t,this.changeListener=null}getToken(){return Promise.resolve(this.token)}invalidateToken(){}start(t,n){this.changeListener=n,t.enqueueRetryable(()=>n(this.token.user))}shutdown(){this.changeListener=null}}class mE{constructor(t){this.t=t,this.currentUser=ee.UNAUTHENTICATED,this.i=0,this.forceRefresh=!1,this.auth=null}start(t,n){Nt(this.o===void 0,42304);let r=this.i;const s=c=>this.i!==r?(r=this.i,n(c)):Promise.resolve();let i=new jn;this.o=()=>{this.i++,this.currentUser=this.u(),i.resolve(),i=new jn,t.enqueueRetryable(()=>s(this.currentUser))};const a=()=>{const c=i;t.enqueueRetryable(async()=>{await c.promise,await s(this.currentUser)})},l=c=>{X("FirebaseAuthCredentialsProvider","Auth detected"),this.auth=c,this.o&&(this.auth.addAuthTokenListener(this.o),a())};this.t.onInit(c=>l(c)),setTimeout(()=>{if(!this.auth){const c=this.t.getImmediate({optional:!0});c?l(c):(X("FirebaseAuthCredentialsProvider","Auth not yet detected"),i.resolve(),i=new jn)}},0),a()}getToken(){const t=this.i,n=this.forceRefresh;return this.forceRefresh=!1,this.auth?this.auth.getToken(n).then(r=>this.i!==t?(X("FirebaseAuthCredentialsProvider","getToken aborted due to token change."),this.getToken()):r?(Nt(typeof r.accessToken=="string",31837,{l:r}),new gd(r.accessToken,this.currentUser)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.auth&&this.o&&this.auth.removeAuthTokenListener(this.o),this.o=void 0}u(){const t=this.auth&&this.auth.getUid();return Nt(t===null||typeof t=="string",2055,{h:t}),new ee(t)}}class _E{constructor(t,n,r){this.P=t,this.T=n,this.I=r,this.type="FirstParty",this.user=ee.FIRST_PARTY,this.A=new Map}R(){return this.I?this.I():null}get headers(){this.A.set("X-Goog-AuthUser",this.P);const t=this.R();return t&&this.A.set("Authorization",t),this.T&&this.A.set("X-Goog-Iam-Authorization-Token",this.T),this.A}}class yE{constructor(t,n,r){this.P=t,this.T=n,this.I=r}getToken(){return Promise.resolve(new _E(this.P,this.T,this.I))}start(t,n){t.enqueueRetryable(()=>n(ee.FIRST_PARTY))}shutdown(){}invalidateToken(){}}class Vc{constructor(t){this.value=t,this.type="AppCheck",this.headers=new Map,t&&t.length>0&&this.headers.set("x-firebase-appcheck",this.value)}}class vE{constructor(t,n){this.V=n,this.forceRefresh=!1,this.appCheck=null,this.m=null,this.p=null,Xv(t)&&t.settings.appCheckToken&&(this.p=t.settings.appCheckToken)}start(t,n){Nt(this.o===void 0,3512);const r=i=>{i.error!=null&&X("FirebaseAppCheckTokenProvider",`Error getting App Check token; using placeholder token instead. Error: ${i.error.message}`);const a=i.token!==this.m;return this.m=i.token,X("FirebaseAppCheckTokenProvider",`Received ${a?"new":"existing"} token.`),a?n(i.token):Promise.resolve()};this.o=i=>{t.enqueueRetryable(()=>r(i))};const s=i=>{X("FirebaseAppCheckTokenProvider","AppCheck detected"),this.appCheck=i,this.o&&this.appCheck.addTokenListener(this.o)};this.V.onInit(i=>s(i)),setTimeout(()=>{if(!this.appCheck){const i=this.V.getImmediate({optional:!0});i?s(i):X("FirebaseAppCheckTokenProvider","AppCheck not yet detected")}},0)}getToken(){if(this.p)return Promise.resolve(new Vc(this.p));const t=this.forceRefresh;return this.forceRefresh=!1,this.appCheck?this.appCheck.getToken(t).then(n=>n?(Nt(typeof n.token=="string",44558,{tokenResult:n}),this.m=n.token,new Vc(n.token)):null):Promise.resolve(null)}invalidateToken(){this.forceRefresh=!0}shutdown(){this.appCheck&&this.o&&this.appCheck.removeTokenListener(this.o),this.o=void 0}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function EE(e){const t=typeof self<"u"&&(self.crypto||self.msCrypto),n=new Uint8Array(e);if(t&&typeof t.getRandomValues=="function")t.getRandomValues(n);else for(let r=0;r<e;r++)n[r]=Math.floor(256*Math.random());return n}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function md(){return new TextEncoder}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class TE{static newId(){const t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789",n=62*Math.floor(4.129032258064516);let r="";for(;r.length<20;){const s=EE(40);for(let i=0;i<s.length;++i)r.length<20&&s[i]<n&&(r+=t.charAt(s[i]%62))}return r}}function ct(e,t){return e<t?-1:e>t?1:0}function da(e,t){let n=0;for(;n<e.length&&n<t.length;){const r=e.codePointAt(n),s=t.codePointAt(n);if(r!==s){if(r<128&&s<128)return ct(r,s);{const i=md(),a=wE(i.encode(Dc(e,n)),i.encode(Dc(t,n)));return a!==0?a:ct(r,s)}}n+=r>65535?2:1}return ct(e.length,t.length)}function Dc(e,t){return e.codePointAt(t)>65535?e.substring(t,t+2):e.substring(t,t+1)}function wE(e,t){for(let n=0;n<e.length&&n<t.length;++n)if(e[n]!==t[n])return ct(e[n],t[n]);return ct(e.length,t.length)}function vr(e,t,n){return e.length===t.length&&e.every((r,s)=>n(r,t[s]))}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const xc=-62135596800,Nc=1e6;class Ht{static now(){return Ht.fromMillis(Date.now())}static fromDate(t){return Ht.fromMillis(t.getTime())}static fromMillis(t){const n=Math.floor(t/1e3),r=Math.floor((t-1e3*n)*Nc);return new Ht(n,r)}constructor(t,n){if(this.seconds=t,this.nanoseconds=n,n<0)throw new Z(B.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(n>=1e9)throw new Z(B.INVALID_ARGUMENT,"Timestamp nanoseconds out of range: "+n);if(t<xc)throw new Z(B.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t);if(t>=253402300800)throw new Z(B.INVALID_ARGUMENT,"Timestamp seconds out of range: "+t)}toDate(){return new Date(this.toMillis())}toMillis(){return 1e3*this.seconds+this.nanoseconds/Nc}_compareTo(t){return this.seconds===t.seconds?ct(this.nanoseconds,t.nanoseconds):ct(this.seconds,t.seconds)}isEqual(t){return t.seconds===this.seconds&&t.nanoseconds===this.nanoseconds}toString(){return"Timestamp(seconds="+this.seconds+", nanoseconds="+this.nanoseconds+")"}toJSON(){return{seconds:this.seconds,nanoseconds:this.nanoseconds}}valueOf(){const t=this.seconds-xc;return String(t).padStart(12,"0")+"."+String(this.nanoseconds).padStart(9,"0")}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class it{static fromTimestamp(t){return new it(t)}static min(){return new it(new Ht(0,0))}static max(){return new it(new Ht(253402300799,999999999))}constructor(t){this.timestamp=t}compareTo(t){return this.timestamp._compareTo(t.timestamp)}isEqual(t){return this.timestamp.isEqual(t.timestamp)}toMicroseconds(){return 1e6*this.timestamp.seconds+this.timestamp.nanoseconds/1e3}toString(){return"SnapshotVersion("+this.timestamp.toString()+")"}toTimestamp(){return this.timestamp}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Oc="__name__";class Fe{constructor(t,n,r){n===void 0?n=0:n>t.length&&ot(637,{offset:n,range:t.length}),r===void 0?r=t.length-n:r>t.length-n&&ot(1746,{length:r,range:t.length-n}),this.segments=t,this.offset=n,this.len=r}get length(){return this.len}isEqual(t){return Fe.comparator(this,t)===0}child(t){const n=this.segments.slice(this.offset,this.limit());return t instanceof Fe?t.forEach(r=>{n.push(r)}):n.push(t),this.construct(n)}limit(){return this.offset+this.length}popFirst(t){return t=t===void 0?1:t,this.construct(this.segments,this.offset+t,this.length-t)}popLast(){return this.construct(this.segments,this.offset,this.length-1)}firstSegment(){return this.segments[this.offset]}lastSegment(){return this.get(this.length-1)}get(t){return this.segments[this.offset+t]}isEmpty(){return this.length===0}isPrefixOf(t){if(t.length<this.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}isImmediateParentOf(t){if(this.length+1!==t.length)return!1;for(let n=0;n<this.length;n++)if(this.get(n)!==t.get(n))return!1;return!0}forEach(t){for(let n=this.offset,r=this.limit();n<r;n++)t(this.segments[n])}toArray(){return this.segments.slice(this.offset,this.limit())}static comparator(t,n){const r=Math.min(t.length,n.length);for(let s=0;s<r;s++){const i=Fe.compareSegments(t.get(s),n.get(s));if(i!==0)return i}return ct(t.length,n.length)}static compareSegments(t,n){const r=Fe.isNumericId(t),s=Fe.isNumericId(n);return r&&!s?-1:!r&&s?1:r&&s?Fe.extractNumericId(t).compare(Fe.extractNumericId(n)):da(t,n)}static isNumericId(t){return t.startsWith("__id")&&t.endsWith("__")}static extractNumericId(t){return En.fromString(t.substring(4,t.length-2))}}class xt extends Fe{construct(t,n,r){return new xt(t,n,r)}canonicalString(){return this.toArray().join("/")}toString(){return this.canonicalString()}toUriEncodedString(){return this.toArray().map(encodeURIComponent).join("/")}static fromString(...t){const n=[];for(const r of t){if(r.indexOf("//")>=0)throw new Z(B.INVALID_ARGUMENT,`Invalid segment (${r}). Paths must not contain // in them.`);n.push(...r.split("/").filter(s=>s.length>0))}return new xt(n)}static emptyPath(){return new xt([])}}const IE=/^[_a-zA-Z][_a-zA-Z0-9]*$/;class oe extends Fe{construct(t,n,r){return new oe(t,n,r)}static isValidIdentifier(t){return IE.test(t)}canonicalString(){return this.toArray().map(t=>(t=t.replace(/\\/g,"\\\\").replace(/`/g,"\\`"),oe.isValidIdentifier(t)||(t="`"+t+"`"),t)).join(".")}toString(){return this.canonicalString()}isKeyField(){return this.length===1&&this.get(0)===Oc}static keyField(){return new oe([Oc])}static fromServerFormat(t){const n=[];let r="",s=0;const i=()=>{if(r.length===0)throw new Z(B.INVALID_ARGUMENT,`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`);n.push(r),r=""};let a=!1;for(;s<t.length;){const l=t[s];if(l==="\\"){if(s+1===t.length)throw new Z(B.INVALID_ARGUMENT,"Path has trailing escape character: "+t);const c=t[s+1];if(c!=="\\"&&c!=="."&&c!=="`")throw new Z(B.INVALID_ARGUMENT,"Path has invalid escape sequence: "+t);r+=c,s+=2}else l==="`"?(a=!a,s++):l!=="."||a?(r+=l,s++):(i(),s++)}if(i(),a)throw new Z(B.INVALID_ARGUMENT,"Unterminated ` in path: "+t);return new oe(n)}static emptyPath(){return new oe([])}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class rt{constructor(t){this.path=t}static fromPath(t){return new rt(xt.fromString(t))}static fromName(t){return new rt(xt.fromString(t).popFirst(5))}static empty(){return new rt(xt.emptyPath())}get collectionGroup(){return this.path.popLast().lastSegment()}hasCollectionId(t){return this.path.length>=2&&this.path.get(this.path.length-2)===t}getCollectionGroup(){return this.path.get(this.path.length-2)}getCollectionPath(){return this.path.popLast()}isEqual(t){return t!==null&&xt.comparator(this.path,t.path)===0}toString(){return this.path.toString()}static comparator(t,n){return xt.comparator(t.path,n.path)}static isDocumentKey(t){return t.length%2==0}static fromSegments(t){return new rt(new xt(t.slice()))}}/**
 * @license
 * Copyright 2021 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ws=-1;function AE(e,t){const n=e.toTimestamp().seconds,r=e.toTimestamp().nanoseconds+1,s=it.fromTimestamp(r===1e9?new Ht(n+1,0):new Ht(n,r));return new wn(s,rt.empty(),t)}function RE(e){return new wn(e.readTime,e.key,ws)}class wn{constructor(t,n,r){this.readTime=t,this.documentKey=n,this.largestBatchId=r}static min(){return new wn(it.min(),rt.empty(),ws)}static max(){return new wn(it.max(),rt.empty(),ws)}}function bE(e,t){let n=e.readTime.compareTo(t.readTime);return n!==0?n:(n=rt.comparator(e.documentKey,t.documentKey),n!==0?n:ct(e.largestBatchId,t.largestBatchId))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const SE="The current tab is not in the required state to perform this operation. It might be necessary to refresh the browser tab.";class CE{constructor(){this.onCommittedListeners=[]}addOnCommittedListener(t){this.onCommittedListeners.push(t)}raiseOnCommittedEvent(){this.onCommittedListeners.forEach(t=>t())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */async function Qi(e){if(e.code!==B.FAILED_PRECONDITION||e.message!==SE)throw e;X("LocalStore","Unexpectedly lost primary lease")}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class M{constructor(t){this.nextCallback=null,this.catchCallback=null,this.result=void 0,this.error=void 0,this.isDone=!1,this.callbackAttached=!1,t(n=>{this.isDone=!0,this.result=n,this.nextCallback&&this.nextCallback(n)},n=>{this.isDone=!0,this.error=n,this.catchCallback&&this.catchCallback(n)})}catch(t){return this.next(void 0,t)}next(t,n){return this.callbackAttached&&ot(59440),this.callbackAttached=!0,this.isDone?this.error?this.wrapFailure(n,this.error):this.wrapSuccess(t,this.result):new M((r,s)=>{this.nextCallback=i=>{this.wrapSuccess(t,i).next(r,s)},this.catchCallback=i=>{this.wrapFailure(n,i).next(r,s)}})}toPromise(){return new Promise((t,n)=>{this.next(t,n)})}wrapUserFunction(t){try{const n=t();return n instanceof M?n:M.resolve(n)}catch(n){return M.reject(n)}}wrapSuccess(t,n){return t?this.wrapUserFunction(()=>t(n)):M.resolve(n)}wrapFailure(t,n){return t?this.wrapUserFunction(()=>t(n)):M.reject(n)}static resolve(t){return new M((n,r)=>{n(t)})}static reject(t){return new M((n,r)=>{r(t)})}static waitFor(t){return new M((n,r)=>{let s=0,i=0,a=!1;t.forEach(l=>{++s,l.next(()=>{++i,a&&i===s&&n()},c=>r(c))}),a=!0,i===s&&n()})}static or(t){let n=M.resolve(!1);for(const r of t)n=n.next(s=>s?M.resolve(s):r());return n}static forEach(t,n){const r=[];return t.forEach((s,i)=>{r.push(n.call(this,s,i))}),this.waitFor(r)}static mapArray(t,n){return new M((r,s)=>{const i=t.length,a=new Array(i);let l=0;for(let c=0;c<i;c++){const f=c;n(t[f]).next(d=>{a[f]=d,++l,l===i&&r(a)},d=>s(d))}})}static doWhile(t,n){return new M((r,s)=>{const i=()=>{t()===!0?n().next(()=>{i()},s):r()};i()})}}function PE(e){const t=e.match(/Android ([\d.]+)/i),n=t?t[1].split(".").slice(0,2).join("."):"-1";return Number(n)}function Cr(e){return e.name==="IndexedDbTransactionError"}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Yi{constructor(t,n){this.previousValue=t,n&&(n.sequenceNumberHandler=r=>this.ue(r),this.ce=r=>n.writeSequenceNumber(r))}ue(t){return this.previousValue=Math.max(t,this.previousValue),this.previousValue}next(){const t=++this.previousValue;return this.ce&&this.ce(t),t}}Yi.le=-1;/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const VE=-1;function Xi(e){return e==null}function Si(e){return e===0&&1/e==-1/0}function DE(e){return typeof e=="number"&&Number.isInteger(e)&&!Si(e)&&e<=Number.MAX_SAFE_INTEGER&&e>=Number.MIN_SAFE_INTEGER}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const _d="";function xE(e){let t="";for(let n=0;n<e.length;n++)t.length>0&&(t=Mc(t)),t=NE(e.get(n),t);return Mc(t)}function NE(e,t){let n=t;const r=e.length;for(let s=0;s<r;s++){const i=e.charAt(s);switch(i){case"\0":n+="";break;case _d:n+="";break;default:n+=i}}return n}function Mc(e){return e+_d+""}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function kc(e){let t=0;for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t++;return t}function Pr(e,t){for(const n in e)Object.prototype.hasOwnProperty.call(e,n)&&t(n,e[n])}function yd(e){for(const t in e)if(Object.prototype.hasOwnProperty.call(e,t))return!1;return!0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class kt{constructor(t,n){this.comparator=t,this.root=n||Wt.EMPTY}insert(t,n){return new kt(this.comparator,this.root.insert(t,n,this.comparator).copy(null,null,Wt.BLACK,null,null))}remove(t){return new kt(this.comparator,this.root.remove(t,this.comparator).copy(null,null,Wt.BLACK,null,null))}get(t){let n=this.root;for(;!n.isEmpty();){const r=this.comparator(t,n.key);if(r===0)return n.value;r<0?n=n.left:r>0&&(n=n.right)}return null}indexOf(t){let n=0,r=this.root;for(;!r.isEmpty();){const s=this.comparator(t,r.key);if(s===0)return n+r.left.size;s<0?r=r.left:(n+=r.left.size+1,r=r.right)}return-1}isEmpty(){return this.root.isEmpty()}get size(){return this.root.size}minKey(){return this.root.minKey()}maxKey(){return this.root.maxKey()}inorderTraversal(t){return this.root.inorderTraversal(t)}forEach(t){this.inorderTraversal((n,r)=>(t(n,r),!1))}toString(){const t=[];return this.inorderTraversal((n,r)=>(t.push(`${n}:${r}`),!1)),`{${t.join(", ")}}`}reverseTraversal(t){return this.root.reverseTraversal(t)}getIterator(){return new Zs(this.root,null,this.comparator,!1)}getIteratorFrom(t){return new Zs(this.root,t,this.comparator,!1)}getReverseIterator(){return new Zs(this.root,null,this.comparator,!0)}getReverseIteratorFrom(t){return new Zs(this.root,t,this.comparator,!0)}}class Zs{constructor(t,n,r,s){this.isReverse=s,this.nodeStack=[];let i=1;for(;!t.isEmpty();)if(i=n?r(t.key,n):1,n&&s&&(i*=-1),i<0)t=this.isReverse?t.left:t.right;else{if(i===0){this.nodeStack.push(t);break}this.nodeStack.push(t),t=this.isReverse?t.right:t.left}}getNext(){let t=this.nodeStack.pop();const n={key:t.key,value:t.value};if(this.isReverse)for(t=t.left;!t.isEmpty();)this.nodeStack.push(t),t=t.right;else for(t=t.right;!t.isEmpty();)this.nodeStack.push(t),t=t.left;return n}hasNext(){return this.nodeStack.length>0}peek(){if(this.nodeStack.length===0)return null;const t=this.nodeStack[this.nodeStack.length-1];return{key:t.key,value:t.value}}}class Wt{constructor(t,n,r,s,i){this.key=t,this.value=n,this.color=r??Wt.RED,this.left=s??Wt.EMPTY,this.right=i??Wt.EMPTY,this.size=this.left.size+1+this.right.size}copy(t,n,r,s,i){return new Wt(t??this.key,n??this.value,r??this.color,s??this.left,i??this.right)}isEmpty(){return!1}inorderTraversal(t){return this.left.inorderTraversal(t)||t(this.key,this.value)||this.right.inorderTraversal(t)}reverseTraversal(t){return this.right.reverseTraversal(t)||t(this.key,this.value)||this.left.reverseTraversal(t)}min(){return this.left.isEmpty()?this:this.left.min()}minKey(){return this.min().key}maxKey(){return this.right.isEmpty()?this.key:this.right.maxKey()}insert(t,n,r){let s=this;const i=r(t,s.key);return s=i<0?s.copy(null,null,null,s.left.insert(t,n,r),null):i===0?s.copy(null,n,null,null,null):s.copy(null,null,null,null,s.right.insert(t,n,r)),s.fixUp()}removeMin(){if(this.left.isEmpty())return Wt.EMPTY;let t=this;return t.left.isRed()||t.left.left.isRed()||(t=t.moveRedLeft()),t=t.copy(null,null,null,t.left.removeMin(),null),t.fixUp()}remove(t,n){let r,s=this;if(n(t,s.key)<0)s.left.isEmpty()||s.left.isRed()||s.left.left.isRed()||(s=s.moveRedLeft()),s=s.copy(null,null,null,s.left.remove(t,n),null);else{if(s.left.isRed()&&(s=s.rotateRight()),s.right.isEmpty()||s.right.isRed()||s.right.left.isRed()||(s=s.moveRedRight()),n(t,s.key)===0){if(s.right.isEmpty())return Wt.EMPTY;r=s.right.min(),s=s.copy(r.key,r.value,null,null,s.right.removeMin())}s=s.copy(null,null,null,null,s.right.remove(t,n))}return s.fixUp()}isRed(){return this.color}fixUp(){let t=this;return t.right.isRed()&&!t.left.isRed()&&(t=t.rotateLeft()),t.left.isRed()&&t.left.left.isRed()&&(t=t.rotateRight()),t.left.isRed()&&t.right.isRed()&&(t=t.colorFlip()),t}moveRedLeft(){let t=this.colorFlip();return t.right.left.isRed()&&(t=t.copy(null,null,null,null,t.right.rotateRight()),t=t.rotateLeft(),t=t.colorFlip()),t}moveRedRight(){let t=this.colorFlip();return t.left.left.isRed()&&(t=t.rotateRight(),t=t.colorFlip()),t}rotateLeft(){const t=this.copy(null,null,Wt.RED,null,this.right.left);return this.right.copy(null,null,this.color,t,null)}rotateRight(){const t=this.copy(null,null,Wt.RED,this.left.right,null);return this.left.copy(null,null,this.color,null,t)}colorFlip(){const t=this.left.copy(null,null,!this.left.color,null,null),n=this.right.copy(null,null,!this.right.color,null,null);return this.copy(null,null,!this.color,t,n)}checkMaxDepth(){const t=this.check();return Math.pow(2,t)<=this.size+1}check(){if(this.isRed()&&this.left.isRed())throw ot(43730,{key:this.key,value:this.value});if(this.right.isRed())throw ot(14113,{key:this.key,value:this.value});const t=this.left.check();if(t!==this.right.check())throw ot(27949);return t+(this.isRed()?0:1)}}Wt.EMPTY=null,Wt.RED=!0,Wt.BLACK=!1;Wt.EMPTY=new class{constructor(){this.size=0}get key(){throw ot(57766)}get value(){throw ot(16141)}get color(){throw ot(16727)}get left(){throw ot(29726)}get right(){throw ot(36894)}copy(t,n,r,s,i){return this}insert(t,n,r){return new Wt(t,n)}remove(t,n){return this}isEmpty(){return!0}inorderTraversal(t){return!1}reverseTraversal(t){return!1}minKey(){return null}maxKey(){return null}isRed(){return!1}checkMaxDepth(){return!0}check(){return 0}};/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $t{constructor(t){this.comparator=t,this.data=new kt(this.comparator)}has(t){return this.data.get(t)!==null}first(){return this.data.minKey()}last(){return this.data.maxKey()}get size(){return this.data.size}indexOf(t){return this.data.indexOf(t)}forEach(t){this.data.inorderTraversal((n,r)=>(t(n),!1))}forEachInRange(t,n){const r=this.data.getIteratorFrom(t[0]);for(;r.hasNext();){const s=r.getNext();if(this.comparator(s.key,t[1])>=0)return;n(s.key)}}forEachWhile(t,n){let r;for(r=n!==void 0?this.data.getIteratorFrom(n):this.data.getIterator();r.hasNext();)if(!t(r.getNext().key))return}firstAfterOrEqual(t){const n=this.data.getIteratorFrom(t);return n.hasNext()?n.getNext().key:null}getIterator(){return new Lc(this.data.getIterator())}getIteratorFrom(t){return new Lc(this.data.getIteratorFrom(t))}add(t){return this.copy(this.data.remove(t).insert(t,!0))}delete(t){return this.has(t)?this.copy(this.data.remove(t)):this}isEmpty(){return this.data.isEmpty()}unionWith(t){let n=this;return n.size<t.size&&(n=t,t=this),t.forEach(r=>{n=n.add(r)}),n}isEqual(t){if(!(t instanceof $t)||this.size!==t.size)return!1;const n=this.data.getIterator(),r=t.data.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(this.comparator(s,i)!==0)return!1}return!0}toArray(){const t=[];return this.forEach(n=>{t.push(n)}),t}toString(){const t=[];return this.forEach(n=>t.push(n)),"SortedSet("+t.toString()+")"}copy(t){const n=new $t(this.comparator);return n.data=t,n}}class Lc{constructor(t){this.iter=t}getNext(){return this.iter.getNext().key}hasNext(){return this.iter.hasNext()}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class gn{constructor(t){this.fields=t,t.sort(oe.comparator)}static empty(){return new gn([])}unionWith(t){let n=new $t(oe.comparator);for(const r of this.fields)n=n.add(r);for(const r of t)n=n.add(r);return new gn(n.toArray())}covers(t){for(const n of this.fields)if(n.isPrefixOf(t))return!0;return!1}isEqual(t){return vr(this.fields,t.fields,(n,r)=>n.isEqual(r))}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class vd extends Error{constructor(){super(...arguments),this.name="Base64DecodeError"}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Qt{constructor(t){this.binaryString=t}static fromBase64String(t){const n=function(s){try{return atob(s)}catch(i){throw typeof DOMException<"u"&&i instanceof DOMException?new vd("Invalid base64 string: "+i):i}}(t);return new Qt(n)}static fromUint8Array(t){const n=function(s){let i="";for(let a=0;a<s.length;++a)i+=String.fromCharCode(s[a]);return i}(t);return new Qt(n)}[Symbol.iterator](){let t=0;return{next:()=>t<this.binaryString.length?{value:this.binaryString.charCodeAt(t++),done:!1}:{value:void 0,done:!0}}}toBase64(){return function(n){return btoa(n)}(this.binaryString)}toUint8Array(){return function(n){const r=new Uint8Array(n.length);for(let s=0;s<n.length;s++)r[s]=n.charCodeAt(s);return r}(this.binaryString)}approximateByteSize(){return 2*this.binaryString.length}compareTo(t){return ct(this.binaryString,t.binaryString)}isEqual(t){return this.binaryString===t.binaryString}}Qt.EMPTY_BYTE_STRING=new Qt("");const OE=new RegExp(/^\d{4}-\d\d-\d\dT\d\d:\d\d:\d\d(?:\.(\d+))?Z$/);function In(e){if(Nt(!!e,39018),typeof e=="string"){let t=0;const n=OE.exec(e);if(Nt(!!n,46558,{timestamp:e}),n[1]){let s=n[1];s=(s+"000000000").substr(0,9),t=Number(s)}const r=new Date(e);return{seconds:Math.floor(r.getTime()/1e3),nanos:t}}return{seconds:Mt(e.seconds),nanos:Mt(e.nanos)}}function Mt(e){return typeof e=="number"?e:typeof e=="string"?Number(e):0}function An(e){return typeof e=="string"?Qt.fromBase64String(e):Qt.fromUint8Array(e)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ed="server_timestamp",Td="__type__",wd="__previous_value__",Id="__local_write_time__";function sl(e){var t,n;return((n=(((t=e==null?void 0:e.mapValue)===null||t===void 0?void 0:t.fields)||{})[Td])===null||n===void 0?void 0:n.stringValue)===Ed}function Ji(e){const t=e.mapValue.fields[wd];return sl(t)?Ji(t):t}function Is(e){const t=In(e.mapValue.fields[Id].timestampValue);return new Ht(t.seconds,t.nanos)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ME{constructor(t,n,r,s,i,a,l,c,f,d){this.databaseId=t,this.appId=n,this.persistenceKey=r,this.host=s,this.ssl=i,this.forceLongPolling=a,this.autoDetectLongPolling=l,this.longPollingOptions=c,this.useFetchStreams=f,this.isUsingEmulator=d}}const Ci="(default)";class As{constructor(t,n){this.projectId=t,this.database=n||Ci}static empty(){return new As("","")}get isDefaultDatabase(){return this.database===Ci}isEqual(t){return t instanceof As&&t.projectId===this.projectId&&t.database===this.database}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ad="__type__",kE="__max__",ti={mapValue:{}},Rd="__vector__",Pi="value";function Rn(e){return"nullValue"in e?0:"booleanValue"in e?1:"integerValue"in e||"doubleValue"in e?2:"timestampValue"in e?3:"stringValue"in e?5:"bytesValue"in e?6:"referenceValue"in e?7:"geoPointValue"in e?8:"arrayValue"in e?9:"mapValue"in e?sl(e)?4:FE(e)?9007199254740991:LE(e)?10:11:ot(28295,{value:e})}function Ke(e,t){if(e===t)return!0;const n=Rn(e);if(n!==Rn(t))return!1;switch(n){case 0:case 9007199254740991:return!0;case 1:return e.booleanValue===t.booleanValue;case 4:return Is(e).isEqual(Is(t));case 3:return function(s,i){if(typeof s.timestampValue=="string"&&typeof i.timestampValue=="string"&&s.timestampValue.length===i.timestampValue.length)return s.timestampValue===i.timestampValue;const a=In(s.timestampValue),l=In(i.timestampValue);return a.seconds===l.seconds&&a.nanos===l.nanos}(e,t);case 5:return e.stringValue===t.stringValue;case 6:return function(s,i){return An(s.bytesValue).isEqual(An(i.bytesValue))}(e,t);case 7:return e.referenceValue===t.referenceValue;case 8:return function(s,i){return Mt(s.geoPointValue.latitude)===Mt(i.geoPointValue.latitude)&&Mt(s.geoPointValue.longitude)===Mt(i.geoPointValue.longitude)}(e,t);case 2:return function(s,i){if("integerValue"in s&&"integerValue"in i)return Mt(s.integerValue)===Mt(i.integerValue);if("doubleValue"in s&&"doubleValue"in i){const a=Mt(s.doubleValue),l=Mt(i.doubleValue);return a===l?Si(a)===Si(l):isNaN(a)&&isNaN(l)}return!1}(e,t);case 9:return vr(e.arrayValue.values||[],t.arrayValue.values||[],Ke);case 10:case 11:return function(s,i){const a=s.mapValue.fields||{},l=i.mapValue.fields||{};if(kc(a)!==kc(l))return!1;for(const c in a)if(a.hasOwnProperty(c)&&(l[c]===void 0||!Ke(a[c],l[c])))return!1;return!0}(e,t);default:return ot(52216,{left:e})}}function Rs(e,t){return(e.values||[]).find(n=>Ke(n,t))!==void 0}function Er(e,t){if(e===t)return 0;const n=Rn(e),r=Rn(t);if(n!==r)return ct(n,r);switch(n){case 0:case 9007199254740991:return 0;case 1:return ct(e.booleanValue,t.booleanValue);case 2:return function(i,a){const l=Mt(i.integerValue||i.doubleValue),c=Mt(a.integerValue||a.doubleValue);return l<c?-1:l>c?1:l===c?0:isNaN(l)?isNaN(c)?0:-1:1}(e,t);case 3:return Fc(e.timestampValue,t.timestampValue);case 4:return Fc(Is(e),Is(t));case 5:return da(e.stringValue,t.stringValue);case 6:return function(i,a){const l=An(i),c=An(a);return l.compareTo(c)}(e.bytesValue,t.bytesValue);case 7:return function(i,a){const l=i.split("/"),c=a.split("/");for(let f=0;f<l.length&&f<c.length;f++){const d=ct(l[f],c[f]);if(d!==0)return d}return ct(l.length,c.length)}(e.referenceValue,t.referenceValue);case 8:return function(i,a){const l=ct(Mt(i.latitude),Mt(a.latitude));return l!==0?l:ct(Mt(i.longitude),Mt(a.longitude))}(e.geoPointValue,t.geoPointValue);case 9:return Uc(e.arrayValue,t.arrayValue);case 10:return function(i,a){var l,c,f,d;const p=i.fields||{},m=a.fields||{},T=(l=p[Pi])===null||l===void 0?void 0:l.arrayValue,V=(c=m[Pi])===null||c===void 0?void 0:c.arrayValue,N=ct(((f=T==null?void 0:T.values)===null||f===void 0?void 0:f.length)||0,((d=V==null?void 0:V.values)===null||d===void 0?void 0:d.length)||0);return N!==0?N:Uc(T,V)}(e.mapValue,t.mapValue);case 11:return function(i,a){if(i===ti.mapValue&&a===ti.mapValue)return 0;if(i===ti.mapValue)return 1;if(a===ti.mapValue)return-1;const l=i.fields||{},c=Object.keys(l),f=a.fields||{},d=Object.keys(f);c.sort(),d.sort();for(let p=0;p<c.length&&p<d.length;++p){const m=da(c[p],d[p]);if(m!==0)return m;const T=Er(l[c[p]],f[d[p]]);if(T!==0)return T}return ct(c.length,d.length)}(e.mapValue,t.mapValue);default:throw ot(23264,{Pe:n})}}function Fc(e,t){if(typeof e=="string"&&typeof t=="string"&&e.length===t.length)return ct(e,t);const n=In(e),r=In(t),s=ct(n.seconds,r.seconds);return s!==0?s:ct(n.nanos,r.nanos)}function Uc(e,t){const n=e.values||[],r=t.values||[];for(let s=0;s<n.length&&s<r.length;++s){const i=Er(n[s],r[s]);if(i)return i}return ct(n.length,r.length)}function Tr(e){return pa(e)}function pa(e){return"nullValue"in e?"null":"booleanValue"in e?""+e.booleanValue:"integerValue"in e?""+e.integerValue:"doubleValue"in e?""+e.doubleValue:"timestampValue"in e?function(n){const r=In(n);return`time(${r.seconds},${r.nanos})`}(e.timestampValue):"stringValue"in e?e.stringValue:"bytesValue"in e?function(n){return An(n).toBase64()}(e.bytesValue):"referenceValue"in e?function(n){return rt.fromName(n).toString()}(e.referenceValue):"geoPointValue"in e?function(n){return`geo(${n.latitude},${n.longitude})`}(e.geoPointValue):"arrayValue"in e?function(n){let r="[",s=!0;for(const i of n.values||[])s?s=!1:r+=",",r+=pa(i);return r+"]"}(e.arrayValue):"mapValue"in e?function(n){const r=Object.keys(n.fields||{}).sort();let s="{",i=!0;for(const a of r)i?i=!1:s+=",",s+=`${a}:${pa(n.fields[a])}`;return s+"}"}(e.mapValue):ot(61005,{value:e})}function hi(e){switch(Rn(e)){case 0:case 1:return 4;case 2:return 8;case 3:case 8:return 16;case 4:const t=Ji(e);return t?16+hi(t):16;case 5:return 2*e.stringValue.length;case 6:return An(e.bytesValue).approximateByteSize();case 7:return e.referenceValue.length;case 9:return function(r){return(r.values||[]).reduce((s,i)=>s+hi(i),0)}(e.arrayValue);case 10:case 11:return function(r){let s=0;return Pr(r.fields,(i,a)=>{s+=i.length+hi(a)}),s}(e.mapValue);default:throw ot(13486,{value:e})}}function Bc(e,t){return{referenceValue:`projects/${e.projectId}/databases/${e.database}/documents/${t.path.canonicalString()}`}}function ga(e){return!!e&&"integerValue"in e}function il(e){return!!e&&"arrayValue"in e}function $c(e){return!!e&&"nullValue"in e}function jc(e){return!!e&&"doubleValue"in e&&isNaN(Number(e.doubleValue))}function jo(e){return!!e&&"mapValue"in e}function LE(e){var t,n;return((n=(((t=e==null?void 0:e.mapValue)===null||t===void 0?void 0:t.fields)||{})[Ad])===null||n===void 0?void 0:n.stringValue)===Rd}function ls(e){if(e.geoPointValue)return{geoPointValue:Object.assign({},e.geoPointValue)};if(e.timestampValue&&typeof e.timestampValue=="object")return{timestampValue:Object.assign({},e.timestampValue)};if(e.mapValue){const t={mapValue:{fields:{}}};return Pr(e.mapValue.fields,(n,r)=>t.mapValue.fields[n]=ls(r)),t}if(e.arrayValue){const t={arrayValue:{values:[]}};for(let n=0;n<(e.arrayValue.values||[]).length;++n)t.arrayValue.values[n]=ls(e.arrayValue.values[n]);return t}return Object.assign({},e)}function FE(e){return(((e.mapValue||{}).fields||{}).__type__||{}).stringValue===kE}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Be{constructor(t){this.value=t}static empty(){return new Be({mapValue:{}})}field(t){if(t.isEmpty())return this.value;{let n=this.value;for(let r=0;r<t.length-1;++r)if(n=(n.mapValue.fields||{})[t.get(r)],!jo(n))return null;return n=(n.mapValue.fields||{})[t.lastSegment()],n||null}}set(t,n){this.getFieldsMap(t.popLast())[t.lastSegment()]=ls(n)}setAll(t){let n=oe.emptyPath(),r={},s=[];t.forEach((a,l)=>{if(!n.isImmediateParentOf(l)){const c=this.getFieldsMap(n);this.applyChanges(c,r,s),r={},s=[],n=l.popLast()}a?r[l.lastSegment()]=ls(a):s.push(l.lastSegment())});const i=this.getFieldsMap(n);this.applyChanges(i,r,s)}delete(t){const n=this.field(t.popLast());jo(n)&&n.mapValue.fields&&delete n.mapValue.fields[t.lastSegment()]}isEqual(t){return Ke(this.value,t.value)}getFieldsMap(t){let n=this.value;n.mapValue.fields||(n.mapValue={fields:{}});for(let r=0;r<t.length;++r){let s=n.mapValue.fields[t.get(r)];jo(s)&&s.mapValue.fields||(s={mapValue:{fields:{}}},n.mapValue.fields[t.get(r)]=s),n=s}return n.mapValue.fields}applyChanges(t,n,r){Pr(n,(s,i)=>t[s]=i);for(const s of r)delete t[s]}clone(){return new Be(ls(this.value))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class se{constructor(t,n,r,s,i,a,l){this.key=t,this.documentType=n,this.version=r,this.readTime=s,this.createTime=i,this.data=a,this.documentState=l}static newInvalidDocument(t){return new se(t,0,it.min(),it.min(),it.min(),Be.empty(),0)}static newFoundDocument(t,n,r,s){return new se(t,1,n,it.min(),r,s,0)}static newNoDocument(t,n){return new se(t,2,n,it.min(),it.min(),Be.empty(),0)}static newUnknownDocument(t,n){return new se(t,3,n,it.min(),it.min(),Be.empty(),2)}convertToFoundDocument(t,n){return!this.createTime.isEqual(it.min())||this.documentType!==2&&this.documentType!==0||(this.createTime=t),this.version=t,this.documentType=1,this.data=n,this.documentState=0,this}convertToNoDocument(t){return this.version=t,this.documentType=2,this.data=Be.empty(),this.documentState=0,this}convertToUnknownDocument(t){return this.version=t,this.documentType=3,this.data=Be.empty(),this.documentState=2,this}setHasCommittedMutations(){return this.documentState=2,this}setHasLocalMutations(){return this.documentState=1,this.version=it.min(),this}setReadTime(t){return this.readTime=t,this}get hasLocalMutations(){return this.documentState===1}get hasCommittedMutations(){return this.documentState===2}get hasPendingWrites(){return this.hasLocalMutations||this.hasCommittedMutations}isValidDocument(){return this.documentType!==0}isFoundDocument(){return this.documentType===1}isNoDocument(){return this.documentType===2}isUnknownDocument(){return this.documentType===3}isEqual(t){return t instanceof se&&this.key.isEqual(t.key)&&this.version.isEqual(t.version)&&this.documentType===t.documentType&&this.documentState===t.documentState&&this.data.isEqual(t.data)}mutableCopy(){return new se(this.key,this.documentType,this.version,this.readTime,this.createTime,this.data.clone(),this.documentState)}toString(){return`Document(${this.key}, ${this.version}, ${JSON.stringify(this.data.value)}, {createTime: ${this.createTime}}), {documentType: ${this.documentType}}), {documentState: ${this.documentState}})`}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Vi{constructor(t,n){this.position=t,this.inclusive=n}}function qc(e,t,n){let r=0;for(let s=0;s<e.position.length;s++){const i=t[s],a=e.position[s];if(i.field.isKeyField()?r=rt.comparator(rt.fromName(a.referenceValue),n.key):r=Er(a,n.data.field(i.field)),i.dir==="desc"&&(r*=-1),r!==0)break}return r}function Hc(e,t){if(e===null)return t===null;if(t===null||e.inclusive!==t.inclusive||e.position.length!==t.position.length)return!1;for(let n=0;n<e.position.length;n++)if(!Ke(e.position[n],t.position[n]))return!1;return!0}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Di{constructor(t,n="asc"){this.field=t,this.dir=n}}function UE(e,t){return e.dir===t.dir&&e.field.isEqual(t.field)}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bd{}class Ut extends bd{constructor(t,n,r){super(),this.field=t,this.op=n,this.value=r}static create(t,n,r){return t.isKeyField()?n==="in"||n==="not-in"?this.createKeyFieldInFilter(t,n,r):new $E(t,n,r):n==="array-contains"?new HE(t,r):n==="in"?new zE(t,r):n==="not-in"?new KE(t,r):n==="array-contains-any"?new GE(t,r):new Ut(t,n,r)}static createKeyFieldInFilter(t,n,r){return n==="in"?new jE(t,r):new qE(t,r)}matches(t){const n=t.data.field(this.field);return this.op==="!="?n!==null&&n.nullValue===void 0&&this.matchesComparison(Er(n,this.value)):n!==null&&Rn(this.value)===Rn(n)&&this.matchesComparison(Er(n,this.value))}matchesComparison(t){switch(this.op){case"<":return t<0;case"<=":return t<=0;case"==":return t===0;case"!=":return t!==0;case">":return t>0;case">=":return t>=0;default:return ot(47266,{operator:this.op})}}isInequality(){return["<","<=",">",">=","!=","not-in"].indexOf(this.op)>=0}getFlattenedFilters(){return[this]}getFilters(){return[this]}}class Oe extends bd{constructor(t,n){super(),this.filters=t,this.op=n,this.Te=null}static create(t,n){return new Oe(t,n)}matches(t){return Sd(this)?this.filters.find(n=>!n.matches(t))===void 0:this.filters.find(n=>n.matches(t))!==void 0}getFlattenedFilters(){return this.Te!==null||(this.Te=this.filters.reduce((t,n)=>t.concat(n.getFlattenedFilters()),[])),this.Te}getFilters(){return Object.assign([],this.filters)}}function Sd(e){return e.op==="and"}function Cd(e){return BE(e)&&Sd(e)}function BE(e){for(const t of e.filters)if(t instanceof Oe)return!1;return!0}function ma(e){if(e instanceof Ut)return e.field.canonicalString()+e.op.toString()+Tr(e.value);if(Cd(e))return e.filters.map(t=>ma(t)).join(",");{const t=e.filters.map(n=>ma(n)).join(",");return`${e.op}(${t})`}}function Pd(e,t){return e instanceof Ut?function(r,s){return s instanceof Ut&&r.op===s.op&&r.field.isEqual(s.field)&&Ke(r.value,s.value)}(e,t):e instanceof Oe?function(r,s){return s instanceof Oe&&r.op===s.op&&r.filters.length===s.filters.length?r.filters.reduce((i,a,l)=>i&&Pd(a,s.filters[l]),!0):!1}(e,t):void ot(19439)}function Vd(e){return e instanceof Ut?function(n){return`${n.field.canonicalString()} ${n.op} ${Tr(n.value)}`}(e):e instanceof Oe?function(n){return n.op.toString()+" {"+n.getFilters().map(Vd).join(" ,")+"}"}(e):"Filter"}class $E extends Ut{constructor(t,n,r){super(t,n,r),this.key=rt.fromName(r.referenceValue)}matches(t){const n=rt.comparator(t.key,this.key);return this.matchesComparison(n)}}class jE extends Ut{constructor(t,n){super(t,"in",n),this.keys=Dd("in",n)}matches(t){return this.keys.some(n=>n.isEqual(t.key))}}class qE extends Ut{constructor(t,n){super(t,"not-in",n),this.keys=Dd("not-in",n)}matches(t){return!this.keys.some(n=>n.isEqual(t.key))}}function Dd(e,t){var n;return(((n=t.arrayValue)===null||n===void 0?void 0:n.values)||[]).map(r=>rt.fromName(r.referenceValue))}class HE extends Ut{constructor(t,n){super(t,"array-contains",n)}matches(t){const n=t.data.field(this.field);return il(n)&&Rs(n.arrayValue,this.value)}}class zE extends Ut{constructor(t,n){super(t,"in",n)}matches(t){const n=t.data.field(this.field);return n!==null&&Rs(this.value.arrayValue,n)}}class KE extends Ut{constructor(t,n){super(t,"not-in",n)}matches(t){if(Rs(this.value.arrayValue,{nullValue:"NULL_VALUE"}))return!1;const n=t.data.field(this.field);return n!==null&&n.nullValue===void 0&&!Rs(this.value.arrayValue,n)}}class GE extends Ut{constructor(t,n){super(t,"array-contains-any",n)}matches(t){const n=t.data.field(this.field);return!(!il(n)||!n.arrayValue.values)&&n.arrayValue.values.some(r=>Rs(this.value.arrayValue,r))}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class WE{constructor(t,n=null,r=[],s=[],i=null,a=null,l=null){this.path=t,this.collectionGroup=n,this.orderBy=r,this.filters=s,this.limit=i,this.startAt=a,this.endAt=l,this.Ie=null}}function zc(e,t=null,n=[],r=[],s=null,i=null,a=null){return new WE(e,t,n,r,s,i,a)}function ol(e){const t=yt(e);if(t.Ie===null){let n=t.path.canonicalString();t.collectionGroup!==null&&(n+="|cg:"+t.collectionGroup),n+="|f:",n+=t.filters.map(r=>ma(r)).join(","),n+="|ob:",n+=t.orderBy.map(r=>function(i){return i.field.canonicalString()+i.dir}(r)).join(","),Xi(t.limit)||(n+="|l:",n+=t.limit),t.startAt&&(n+="|lb:",n+=t.startAt.inclusive?"b:":"a:",n+=t.startAt.position.map(r=>Tr(r)).join(",")),t.endAt&&(n+="|ub:",n+=t.endAt.inclusive?"a:":"b:",n+=t.endAt.position.map(r=>Tr(r)).join(",")),t.Ie=n}return t.Ie}function al(e,t){if(e.limit!==t.limit||e.orderBy.length!==t.orderBy.length)return!1;for(let n=0;n<e.orderBy.length;n++)if(!UE(e.orderBy[n],t.orderBy[n]))return!1;if(e.filters.length!==t.filters.length)return!1;for(let n=0;n<e.filters.length;n++)if(!Pd(e.filters[n],t.filters[n]))return!1;return e.collectionGroup===t.collectionGroup&&!!e.path.isEqual(t.path)&&!!Hc(e.startAt,t.startAt)&&Hc(e.endAt,t.endAt)}function _a(e){return rt.isDocumentKey(e.path)&&e.collectionGroup===null&&e.filters.length===0}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Ps{constructor(t,n=null,r=[],s=[],i=null,a="F",l=null,c=null){this.path=t,this.collectionGroup=n,this.explicitOrderBy=r,this.filters=s,this.limit=i,this.limitType=a,this.startAt=l,this.endAt=c,this.Ee=null,this.de=null,this.Ae=null,this.startAt,this.endAt}}function QE(e,t,n,r,s,i,a,l){return new Ps(e,t,n,r,s,i,a,l)}function xd(e){return new Ps(e)}function Kc(e){return e.filters.length===0&&e.limit===null&&e.startAt==null&&e.endAt==null&&(e.explicitOrderBy.length===0||e.explicitOrderBy.length===1&&e.explicitOrderBy[0].field.isKeyField())}function Nd(e){return e.collectionGroup!==null}function us(e){const t=yt(e);if(t.Ee===null){t.Ee=[];const n=new Set;for(const i of t.explicitOrderBy)t.Ee.push(i),n.add(i.field.canonicalString());const r=t.explicitOrderBy.length>0?t.explicitOrderBy[t.explicitOrderBy.length-1].dir:"asc";(function(a){let l=new $t(oe.comparator);return a.filters.forEach(c=>{c.getFlattenedFilters().forEach(f=>{f.isInequality()&&(l=l.add(f.field))})}),l})(t).forEach(i=>{n.has(i.canonicalString())||i.isKeyField()||t.Ee.push(new Di(i,r))}),n.has(oe.keyField().canonicalString())||t.Ee.push(new Di(oe.keyField(),r))}return t.Ee}function He(e){const t=yt(e);return t.de||(t.de=YE(t,us(e))),t.de}function YE(e,t){if(e.limitType==="F")return zc(e.path,e.collectionGroup,t,e.filters,e.limit,e.startAt,e.endAt);{t=t.map(s=>{const i=s.dir==="desc"?"asc":"desc";return new Di(s.field,i)});const n=e.endAt?new Vi(e.endAt.position,e.endAt.inclusive):null,r=e.startAt?new Vi(e.startAt.position,e.startAt.inclusive):null;return zc(e.path,e.collectionGroup,t,e.filters,e.limit,n,r)}}function ya(e,t){const n=e.filters.concat([t]);return new Ps(e.path,e.collectionGroup,e.explicitOrderBy.slice(),n,e.limit,e.limitType,e.startAt,e.endAt)}function va(e,t,n){return new Ps(e.path,e.collectionGroup,e.explicitOrderBy.slice(),e.filters.slice(),t,n,e.startAt,e.endAt)}function Zi(e,t){return al(He(e),He(t))&&e.limitType===t.limitType}function Od(e){return`${ol(He(e))}|lt:${e.limitType}`}function rr(e){return`Query(target=${function(n){let r=n.path.canonicalString();return n.collectionGroup!==null&&(r+=" collectionGroup="+n.collectionGroup),n.filters.length>0&&(r+=`, filters: [${n.filters.map(s=>Vd(s)).join(", ")}]`),Xi(n.limit)||(r+=", limit: "+n.limit),n.orderBy.length>0&&(r+=`, orderBy: [${n.orderBy.map(s=>function(a){return`${a.field.canonicalString()} (${a.dir})`}(s)).join(", ")}]`),n.startAt&&(r+=", startAt: ",r+=n.startAt.inclusive?"b:":"a:",r+=n.startAt.position.map(s=>Tr(s)).join(",")),n.endAt&&(r+=", endAt: ",r+=n.endAt.inclusive?"a:":"b:",r+=n.endAt.position.map(s=>Tr(s)).join(",")),`Target(${r})`}(He(e))}; limitType=${e.limitType})`}function to(e,t){return t.isFoundDocument()&&function(r,s){const i=s.key.path;return r.collectionGroup!==null?s.key.hasCollectionId(r.collectionGroup)&&r.path.isPrefixOf(i):rt.isDocumentKey(r.path)?r.path.isEqual(i):r.path.isImmediateParentOf(i)}(e,t)&&function(r,s){for(const i of us(r))if(!i.field.isKeyField()&&s.data.field(i.field)===null)return!1;return!0}(e,t)&&function(r,s){for(const i of r.filters)if(!i.matches(s))return!1;return!0}(e,t)&&function(r,s){return!(r.startAt&&!function(a,l,c){const f=qc(a,l,c);return a.inclusive?f<=0:f<0}(r.startAt,us(r),s)||r.endAt&&!function(a,l,c){const f=qc(a,l,c);return a.inclusive?f>=0:f>0}(r.endAt,us(r),s))}(e,t)}function XE(e){return e.collectionGroup||(e.path.length%2==1?e.path.lastSegment():e.path.get(e.path.length-2))}function Md(e){return(t,n)=>{let r=!1;for(const s of us(e)){const i=JE(s,t,n);if(i!==0)return i;r=r||s.field.isKeyField()}return 0}}function JE(e,t,n){const r=e.field.isKeyField()?rt.comparator(t.key,n.key):function(i,a,l){const c=a.data.field(i),f=l.data.field(i);return c!==null&&f!==null?Er(c,f):ot(42886)}(e.field,t,n);switch(e.dir){case"asc":return r;case"desc":return-1*r;default:return ot(19790,{direction:e.dir})}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Wn{constructor(t,n){this.mapKeyFn=t,this.equalsFn=n,this.inner={},this.innerSize=0}get(t){const n=this.mapKeyFn(t),r=this.inner[n];if(r!==void 0){for(const[s,i]of r)if(this.equalsFn(s,t))return i}}has(t){return this.get(t)!==void 0}set(t,n){const r=this.mapKeyFn(t),s=this.inner[r];if(s===void 0)return this.inner[r]=[[t,n]],void this.innerSize++;for(let i=0;i<s.length;i++)if(this.equalsFn(s[i][0],t))return void(s[i]=[t,n]);s.push([t,n]),this.innerSize++}delete(t){const n=this.mapKeyFn(t),r=this.inner[n];if(r===void 0)return!1;for(let s=0;s<r.length;s++)if(this.equalsFn(r[s][0],t))return r.length===1?delete this.inner[n]:r.splice(s,1),this.innerSize--,!0;return!1}forEach(t){Pr(this.inner,(n,r)=>{for(const[s,i]of r)t(s,i)})}isEmpty(){return yd(this.inner)}size(){return this.innerSize}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ZE=new kt(rt.comparator);function bn(){return ZE}const kd=new kt(rt.comparator);function Yr(...e){let t=kd;for(const n of e)t=t.insert(n.key,n);return t}function tT(e){let t=kd;return e.forEach((n,r)=>t=t.insert(n,r.overlayedDocument)),t}function Bn(){return cs()}function Ld(){return cs()}function cs(){return new Wn(e=>e.toString(),(e,t)=>e.isEqual(t))}const eT=new $t(rt.comparator);function vt(...e){let t=eT;for(const n of e)t=t.add(n);return t}const nT=new $t(ct);function rT(){return nT}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ll(e,t){if(e.useProto3Json){if(isNaN(t))return{doubleValue:"NaN"};if(t===1/0)return{doubleValue:"Infinity"};if(t===-1/0)return{doubleValue:"-Infinity"}}return{doubleValue:Si(t)?"-0":t}}function Fd(e){return{integerValue:""+e}}function sT(e,t){return DE(t)?Fd(t):ll(e,t)}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class eo{constructor(){this._=void 0}}function iT(e,t,n){return e instanceof Ea?function(s,i){const a={fields:{[Td]:{stringValue:Ed},[Id]:{timestampValue:{seconds:s.seconds,nanos:s.nanoseconds}}}};return i&&sl(i)&&(i=Ji(i)),i&&(a.fields[wd]=i),{mapValue:a}}(n,t):e instanceof xi?Ud(e,t):e instanceof Ni?Bd(e,t):function(s,i){const a=aT(s,i),l=Gc(a)+Gc(s.Re);return ga(a)&&ga(s.Re)?Fd(l):ll(s.serializer,l)}(e,t)}function oT(e,t,n){return e instanceof xi?Ud(e,t):e instanceof Ni?Bd(e,t):n}function aT(e,t){return e instanceof Ta?function(r){return ga(r)||function(i){return!!i&&"doubleValue"in i}(r)}(t)?t:{integerValue:0}:null}class Ea extends eo{}class xi extends eo{constructor(t){super(),this.elements=t}}function Ud(e,t){const n=$d(t);for(const r of e.elements)n.some(s=>Ke(s,r))||n.push(r);return{arrayValue:{values:n}}}class Ni extends eo{constructor(t){super(),this.elements=t}}function Bd(e,t){let n=$d(t);for(const r of e.elements)n=n.filter(s=>!Ke(s,r));return{arrayValue:{values:n}}}class Ta extends eo{constructor(t,n){super(),this.serializer=t,this.Re=n}}function Gc(e){return Mt(e.integerValue||e.doubleValue)}function $d(e){return il(e)&&e.arrayValue.values?e.arrayValue.values.slice():[]}function lT(e,t){return e.field.isEqual(t.field)&&function(r,s){return r instanceof xi&&s instanceof xi||r instanceof Ni&&s instanceof Ni?vr(r.elements,s.elements,Ke):r instanceof Ta&&s instanceof Ta?Ke(r.Re,s.Re):r instanceof Ea&&s instanceof Ea}(e.transform,t.transform)}class qn{constructor(t,n){this.updateTime=t,this.exists=n}static none(){return new qn}static exists(t){return new qn(void 0,t)}static updateTime(t){return new qn(t)}get isNone(){return this.updateTime===void 0&&this.exists===void 0}isEqual(t){return this.exists===t.exists&&(this.updateTime?!!t.updateTime&&this.updateTime.isEqual(t.updateTime):!t.updateTime)}}function fi(e,t){return e.updateTime!==void 0?t.isFoundDocument()&&t.version.isEqual(e.updateTime):e.exists===void 0||e.exists===t.isFoundDocument()}class ul{}function jd(e,t){if(!e.hasLocalMutations||t&&t.fields.length===0)return null;if(t===null)return e.isNoDocument()?new cT(e.key,qn.none()):new cl(e.key,e.data,qn.none());{const n=e.data,r=Be.empty();let s=new $t(oe.comparator);for(let i of t.fields)if(!s.has(i)){let a=n.field(i);a===null&&i.length>1&&(i=i.popLast(),a=n.field(i)),a===null?r.delete(i):r.set(i,a),s=s.add(i)}return new no(e.key,r,new gn(s.toArray()),qn.none())}}function uT(e,t,n){e instanceof cl?function(s,i,a){const l=s.value.clone(),c=Qc(s.fieldTransforms,i,a.transformResults);l.setAll(c),i.convertToFoundDocument(a.version,l).setHasCommittedMutations()}(e,t,n):e instanceof no?function(s,i,a){if(!fi(s.precondition,i))return void i.convertToUnknownDocument(a.version);const l=Qc(s.fieldTransforms,i,a.transformResults),c=i.data;c.setAll(qd(s)),c.setAll(l),i.convertToFoundDocument(a.version,c).setHasCommittedMutations()}(e,t,n):function(s,i,a){i.convertToNoDocument(a.version).setHasCommittedMutations()}(0,t,n)}function hs(e,t,n,r){return e instanceof cl?function(i,a,l,c){if(!fi(i.precondition,a))return l;const f=i.value.clone(),d=Yc(i.fieldTransforms,c,a);return f.setAll(d),a.convertToFoundDocument(a.version,f).setHasLocalMutations(),null}(e,t,n,r):e instanceof no?function(i,a,l,c){if(!fi(i.precondition,a))return l;const f=Yc(i.fieldTransforms,c,a),d=a.data;return d.setAll(qd(i)),d.setAll(f),a.convertToFoundDocument(a.version,d).setHasLocalMutations(),l===null?null:l.unionWith(i.fieldMask.fields).unionWith(i.fieldTransforms.map(p=>p.field))}(e,t,n,r):function(i,a,l){return fi(i.precondition,a)?(a.convertToNoDocument(a.version).setHasLocalMutations(),null):l}(e,t,n)}function Wc(e,t){return e.type===t.type&&!!e.key.isEqual(t.key)&&!!e.precondition.isEqual(t.precondition)&&!!function(r,s){return r===void 0&&s===void 0||!(!r||!s)&&vr(r,s,(i,a)=>lT(i,a))}(e.fieldTransforms,t.fieldTransforms)&&(e.type===0?e.value.isEqual(t.value):e.type!==1||e.data.isEqual(t.data)&&e.fieldMask.isEqual(t.fieldMask))}class cl extends ul{constructor(t,n,r,s=[]){super(),this.key=t,this.value=n,this.precondition=r,this.fieldTransforms=s,this.type=0}getFieldMask(){return null}}class no extends ul{constructor(t,n,r,s,i=[]){super(),this.key=t,this.data=n,this.fieldMask=r,this.precondition=s,this.fieldTransforms=i,this.type=1}getFieldMask(){return this.fieldMask}}function qd(e){const t=new Map;return e.fieldMask.fields.forEach(n=>{if(!n.isEmpty()){const r=e.data.field(n);t.set(n,r)}}),t}function Qc(e,t,n){const r=new Map;Nt(e.length===n.length,32656,{Ve:n.length,me:e.length});for(let s=0;s<n.length;s++){const i=e[s],a=i.transform,l=t.data.field(i.field);r.set(i.field,oT(a,l,n[s]))}return r}function Yc(e,t,n){const r=new Map;for(const s of e){const i=s.transform,a=n.data.field(s.field);r.set(s.field,iT(i,a,t))}return r}class cT extends ul{constructor(t,n){super(),this.key=t,this.precondition=n,this.type=2,this.fieldTransforms=[]}getFieldMask(){return null}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class hT{constructor(t,n,r,s){this.batchId=t,this.localWriteTime=n,this.baseMutations=r,this.mutations=s}applyToRemoteDocument(t,n){const r=n.mutationResults;for(let s=0;s<this.mutations.length;s++){const i=this.mutations[s];i.key.isEqual(t.key)&&uT(i,t,r[s])}}applyToLocalView(t,n){for(const r of this.baseMutations)r.key.isEqual(t.key)&&(n=hs(r,t,n,this.localWriteTime));for(const r of this.mutations)r.key.isEqual(t.key)&&(n=hs(r,t,n,this.localWriteTime));return n}applyToLocalDocumentSet(t,n){const r=Ld();return this.mutations.forEach(s=>{const i=t.get(s.key),a=i.overlayedDocument;let l=this.applyToLocalView(a,i.mutatedFields);l=n.has(s.key)?null:l;const c=jd(a,l);c!==null&&r.set(s.key,c),a.isValidDocument()||a.convertToNoDocument(it.min())}),r}keys(){return this.mutations.reduce((t,n)=>t.add(n.key),vt())}isEqual(t){return this.batchId===t.batchId&&vr(this.mutations,t.mutations,(n,r)=>Wc(n,r))&&vr(this.baseMutations,t.baseMutations,(n,r)=>Wc(n,r))}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fT{constructor(t,n){this.largestBatchId=t,this.mutation=n}getKey(){return this.mutation.key}isEqual(t){return t!==null&&this.mutation===t.mutation}toString(){return`Overlay{
      largestBatchId: ${this.largestBatchId},
      mutation: ${this.mutation.toString()}
    }`}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dT{constructor(t,n){this.count=t,this.unchangedNames=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */var Ft,mt;function Hd(e){if(e===void 0)return en("GRPC error has no .code"),B.UNKNOWN;switch(e){case Ft.OK:return B.OK;case Ft.CANCELLED:return B.CANCELLED;case Ft.UNKNOWN:return B.UNKNOWN;case Ft.DEADLINE_EXCEEDED:return B.DEADLINE_EXCEEDED;case Ft.RESOURCE_EXHAUSTED:return B.RESOURCE_EXHAUSTED;case Ft.INTERNAL:return B.INTERNAL;case Ft.UNAVAILABLE:return B.UNAVAILABLE;case Ft.UNAUTHENTICATED:return B.UNAUTHENTICATED;case Ft.INVALID_ARGUMENT:return B.INVALID_ARGUMENT;case Ft.NOT_FOUND:return B.NOT_FOUND;case Ft.ALREADY_EXISTS:return B.ALREADY_EXISTS;case Ft.PERMISSION_DENIED:return B.PERMISSION_DENIED;case Ft.FAILED_PRECONDITION:return B.FAILED_PRECONDITION;case Ft.ABORTED:return B.ABORTED;case Ft.OUT_OF_RANGE:return B.OUT_OF_RANGE;case Ft.UNIMPLEMENTED:return B.UNIMPLEMENTED;case Ft.DATA_LOSS:return B.DATA_LOSS;default:return ot(39323,{code:e})}}(mt=Ft||(Ft={}))[mt.OK=0]="OK",mt[mt.CANCELLED=1]="CANCELLED",mt[mt.UNKNOWN=2]="UNKNOWN",mt[mt.INVALID_ARGUMENT=3]="INVALID_ARGUMENT",mt[mt.DEADLINE_EXCEEDED=4]="DEADLINE_EXCEEDED",mt[mt.NOT_FOUND=5]="NOT_FOUND",mt[mt.ALREADY_EXISTS=6]="ALREADY_EXISTS",mt[mt.PERMISSION_DENIED=7]="PERMISSION_DENIED",mt[mt.UNAUTHENTICATED=16]="UNAUTHENTICATED",mt[mt.RESOURCE_EXHAUSTED=8]="RESOURCE_EXHAUSTED",mt[mt.FAILED_PRECONDITION=9]="FAILED_PRECONDITION",mt[mt.ABORTED=10]="ABORTED",mt[mt.OUT_OF_RANGE=11]="OUT_OF_RANGE",mt[mt.UNIMPLEMENTED=12]="UNIMPLEMENTED",mt[mt.INTERNAL=13]="INTERNAL",mt[mt.UNAVAILABLE=14]="UNAVAILABLE",mt[mt.DATA_LOSS=15]="DATA_LOSS";/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const pT=new En([4294967295,4294967295],0);function Xc(e){const t=md().encode(e),n=new ld;return n.update(t),new Uint8Array(n.digest())}function Jc(e){const t=new DataView(e.buffer),n=t.getUint32(0,!0),r=t.getUint32(4,!0),s=t.getUint32(8,!0),i=t.getUint32(12,!0);return[new En([n,r],0),new En([s,i],0)]}class hl{constructor(t,n,r){if(this.bitmap=t,this.padding=n,this.hashCount=r,n<0||n>=8)throw new Xr(`Invalid padding: ${n}`);if(r<0)throw new Xr(`Invalid hash count: ${r}`);if(t.length>0&&this.hashCount===0)throw new Xr(`Invalid hash count: ${r}`);if(t.length===0&&n!==0)throw new Xr(`Invalid padding when bitmap length is 0: ${n}`);this.pe=8*t.length-n,this.ye=En.fromNumber(this.pe)}we(t,n,r){let s=t.add(n.multiply(En.fromNumber(r)));return s.compare(pT)===1&&(s=new En([s.getBits(0),s.getBits(1)],0)),s.modulo(this.ye).toNumber()}be(t){return!!(this.bitmap[Math.floor(t/8)]&1<<t%8)}mightContain(t){if(this.pe===0)return!1;const n=Xc(t),[r,s]=Jc(n);for(let i=0;i<this.hashCount;i++){const a=this.we(r,s,i);if(!this.be(a))return!1}return!0}static create(t,n,r){const s=t%8==0?0:8-t%8,i=new Uint8Array(Math.ceil(t/8)),a=new hl(i,s,n);return r.forEach(l=>a.insert(l)),a}insert(t){if(this.pe===0)return;const n=Xc(t),[r,s]=Jc(n);for(let i=0;i<this.hashCount;i++){const a=this.we(r,s,i);this.Se(a)}}Se(t){const n=Math.floor(t/8),r=t%8;this.bitmap[n]|=1<<r}}class Xr extends Error{constructor(){super(...arguments),this.name="BloomFilterError"}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ro{constructor(t,n,r,s,i){this.snapshotVersion=t,this.targetChanges=n,this.targetMismatches=r,this.documentUpdates=s,this.resolvedLimboDocuments=i}static createSynthesizedRemoteEventForCurrentChange(t,n,r){const s=new Map;return s.set(t,Vs.createSynthesizedTargetChangeForCurrentChange(t,n,r)),new ro(it.min(),s,new kt(ct),bn(),vt())}}class Vs{constructor(t,n,r,s,i){this.resumeToken=t,this.current=n,this.addedDocuments=r,this.modifiedDocuments=s,this.removedDocuments=i}static createSynthesizedTargetChangeForCurrentChange(t,n,r){return new Vs(r,n,vt(),vt(),vt())}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class di{constructor(t,n,r,s){this.De=t,this.removedTargetIds=n,this.key=r,this.ve=s}}class zd{constructor(t,n){this.targetId=t,this.Ce=n}}class Kd{constructor(t,n,r=Qt.EMPTY_BYTE_STRING,s=null){this.state=t,this.targetIds=n,this.resumeToken=r,this.cause=s}}class Zc{constructor(){this.Fe=0,this.Me=th(),this.xe=Qt.EMPTY_BYTE_STRING,this.Oe=!1,this.Ne=!0}get current(){return this.Oe}get resumeToken(){return this.xe}get Be(){return this.Fe!==0}get Le(){return this.Ne}ke(t){t.approximateByteSize()>0&&(this.Ne=!0,this.xe=t)}qe(){let t=vt(),n=vt(),r=vt();return this.Me.forEach((s,i)=>{switch(i){case 0:t=t.add(s);break;case 2:n=n.add(s);break;case 1:r=r.add(s);break;default:ot(38017,{changeType:i})}}),new Vs(this.xe,this.Oe,t,n,r)}Qe(){this.Ne=!1,this.Me=th()}$e(t,n){this.Ne=!0,this.Me=this.Me.insert(t,n)}Ue(t){this.Ne=!0,this.Me=this.Me.remove(t)}Ke(){this.Fe+=1}We(){this.Fe-=1,Nt(this.Fe>=0,3241,{Fe:this.Fe})}Ge(){this.Ne=!0,this.Oe=!0}}class gT{constructor(t){this.ze=t,this.je=new Map,this.He=bn(),this.Je=ei(),this.Ye=ei(),this.Ze=new kt(ct)}Xe(t){for(const n of t.De)t.ve&&t.ve.isFoundDocument()?this.et(n,t.ve):this.tt(n,t.key,t.ve);for(const n of t.removedTargetIds)this.tt(n,t.key,t.ve)}nt(t){this.forEachTarget(t,n=>{const r=this.rt(n);switch(t.state){case 0:this.it(n)&&r.ke(t.resumeToken);break;case 1:r.We(),r.Be||r.Qe(),r.ke(t.resumeToken);break;case 2:r.We(),r.Be||this.removeTarget(n);break;case 3:this.it(n)&&(r.Ge(),r.ke(t.resumeToken));break;case 4:this.it(n)&&(this.st(n),r.ke(t.resumeToken));break;default:ot(56790,{state:t.state})}})}forEachTarget(t,n){t.targetIds.length>0?t.targetIds.forEach(n):this.je.forEach((r,s)=>{this.it(s)&&n(s)})}ot(t){const n=t.targetId,r=t.Ce.count,s=this._t(n);if(s){const i=s.target;if(_a(i))if(r===0){const a=new rt(i.path);this.tt(n,a,se.newNoDocument(a,it.min()))}else Nt(r===1,20013,{expectedCount:r});else{const a=this.ut(n);if(a!==r){const l=this.ct(t),c=l?this.lt(l,t,a):1;if(c!==0){this.st(n);const f=c===2?"TargetPurposeExistenceFilterMismatchBloom":"TargetPurposeExistenceFilterMismatch";this.Ze=this.Ze.insert(n,f)}}}}}ct(t){const n=t.Ce.unchangedNames;if(!n||!n.bits)return null;const{bits:{bitmap:r="",padding:s=0},hashCount:i=0}=n;let a,l;try{a=An(r).toUint8Array()}catch(c){if(c instanceof vd)return yr("Decoding the base64 bloom filter in existence filter failed ("+c.message+"); ignoring the bloom filter and falling back to full re-query."),null;throw c}try{l=new hl(a,s,i)}catch(c){return yr(c instanceof Xr?"BloomFilter error: ":"Applying bloom filter failed: ",c),null}return l.pe===0?null:l}lt(t,n,r){return n.Ce.count===r-this.Tt(t,n.targetId)?0:2}Tt(t,n){const r=this.ze.getRemoteKeysForTarget(n);let s=0;return r.forEach(i=>{const a=this.ze.Pt(),l=`projects/${a.projectId}/databases/${a.database}/documents/${i.path.canonicalString()}`;t.mightContain(l)||(this.tt(n,i,null),s++)}),s}It(t){const n=new Map;this.je.forEach((i,a)=>{const l=this._t(a);if(l){if(i.current&&_a(l.target)){const c=new rt(l.target.path);this.Et(c).has(a)||this.dt(a,c)||this.tt(a,c,se.newNoDocument(c,t))}i.Le&&(n.set(a,i.qe()),i.Qe())}});let r=vt();this.Ye.forEach((i,a)=>{let l=!0;a.forEachWhile(c=>{const f=this._t(c);return!f||f.purpose==="TargetPurposeLimboResolution"||(l=!1,!1)}),l&&(r=r.add(i))}),this.He.forEach((i,a)=>a.setReadTime(t));const s=new ro(t,n,this.Ze,this.He,r);return this.He=bn(),this.Je=ei(),this.Ye=ei(),this.Ze=new kt(ct),s}et(t,n){if(!this.it(t))return;const r=this.dt(t,n.key)?2:0;this.rt(t).$e(n.key,r),this.He=this.He.insert(n.key,n),this.Je=this.Je.insert(n.key,this.Et(n.key).add(t)),this.Ye=this.Ye.insert(n.key,this.At(n.key).add(t))}tt(t,n,r){if(!this.it(t))return;const s=this.rt(t);this.dt(t,n)?s.$e(n,1):s.Ue(n),this.Ye=this.Ye.insert(n,this.At(n).delete(t)),this.Ye=this.Ye.insert(n,this.At(n).add(t)),r&&(this.He=this.He.insert(n,r))}removeTarget(t){this.je.delete(t)}ut(t){const n=this.rt(t).qe();return this.ze.getRemoteKeysForTarget(t).size+n.addedDocuments.size-n.removedDocuments.size}Ke(t){this.rt(t).Ke()}rt(t){let n=this.je.get(t);return n||(n=new Zc,this.je.set(t,n)),n}At(t){let n=this.Ye.get(t);return n||(n=new $t(ct),this.Ye=this.Ye.insert(t,n)),n}Et(t){let n=this.Je.get(t);return n||(n=new $t(ct),this.Je=this.Je.insert(t,n)),n}it(t){const n=this._t(t)!==null;return n||X("WatchChangeAggregator","Detected inactive target",t),n}_t(t){const n=this.je.get(t);return n&&n.Be?null:this.ze.Rt(t)}st(t){this.je.set(t,new Zc),this.ze.getRemoteKeysForTarget(t).forEach(n=>{this.tt(t,n,null)})}dt(t,n){return this.ze.getRemoteKeysForTarget(t).has(n)}}function ei(){return new kt(rt.comparator)}function th(){return new kt(rt.comparator)}const mT={asc:"ASCENDING",desc:"DESCENDING"},_T={"<":"LESS_THAN","<=":"LESS_THAN_OR_EQUAL",">":"GREATER_THAN",">=":"GREATER_THAN_OR_EQUAL","==":"EQUAL","!=":"NOT_EQUAL","array-contains":"ARRAY_CONTAINS",in:"IN","not-in":"NOT_IN","array-contains-any":"ARRAY_CONTAINS_ANY"},yT={and:"AND",or:"OR"};class vT{constructor(t,n){this.databaseId=t,this.useProto3Json=n}}function wa(e,t){return e.useProto3Json||Xi(t)?t:{value:t}}function Ia(e,t){return e.useProto3Json?`${new Date(1e3*t.seconds).toISOString().replace(/\.\d*/,"").replace("Z","")}.${("000000000"+t.nanoseconds).slice(-9)}Z`:{seconds:""+t.seconds,nanos:t.nanoseconds}}function Gd(e,t){return e.useProto3Json?t.toBase64():t.toUint8Array()}function fr(e){return Nt(!!e,49232),it.fromTimestamp(function(n){const r=In(n);return new Ht(r.seconds,r.nanos)}(e))}function Wd(e,t){return Aa(e,t).canonicalString()}function Aa(e,t){const n=function(s){return new xt(["projects",s.projectId,"databases",s.database])}(e).child("documents");return t===void 0?n:n.child(t)}function Qd(e){const t=xt.fromString(e);return Nt(tp(t),10190,{key:t.toString()}),t}function qo(e,t){const n=Qd(t);if(n.get(1)!==e.databaseId.projectId)throw new Z(B.INVALID_ARGUMENT,"Tried to deserialize key from different project: "+n.get(1)+" vs "+e.databaseId.projectId);if(n.get(3)!==e.databaseId.database)throw new Z(B.INVALID_ARGUMENT,"Tried to deserialize key from different database: "+n.get(3)+" vs "+e.databaseId.database);return new rt(Xd(n))}function Yd(e,t){return Wd(e.databaseId,t)}function ET(e){const t=Qd(e);return t.length===4?xt.emptyPath():Xd(t)}function eh(e){return new xt(["projects",e.databaseId.projectId,"databases",e.databaseId.database]).canonicalString()}function Xd(e){return Nt(e.length>4&&e.get(4)==="documents",29091,{key:e.toString()}),e.popFirst(5)}function TT(e,t){let n;if("targetChange"in t){t.targetChange;const r=function(f){return f==="NO_CHANGE"?0:f==="ADD"?1:f==="REMOVE"?2:f==="CURRENT"?3:f==="RESET"?4:ot(39313,{state:f})}(t.targetChange.targetChangeType||"NO_CHANGE"),s=t.targetChange.targetIds||[],i=function(f,d){return f.useProto3Json?(Nt(d===void 0||typeof d=="string",58123),Qt.fromBase64String(d||"")):(Nt(d===void 0||d instanceof Buffer||d instanceof Uint8Array,16193),Qt.fromUint8Array(d||new Uint8Array))}(e,t.targetChange.resumeToken),a=t.targetChange.cause,l=a&&function(f){const d=f.code===void 0?B.UNKNOWN:Hd(f.code);return new Z(d,f.message||"")}(a);n=new Kd(r,s,i,l||null)}else if("documentChange"in t){t.documentChange;const r=t.documentChange;r.document,r.document.name,r.document.updateTime;const s=qo(e,r.document.name),i=fr(r.document.updateTime),a=r.document.createTime?fr(r.document.createTime):it.min(),l=new Be({mapValue:{fields:r.document.fields}}),c=se.newFoundDocument(s,i,a,l),f=r.targetIds||[],d=r.removedTargetIds||[];n=new di(f,d,c.key,c)}else if("documentDelete"in t){t.documentDelete;const r=t.documentDelete;r.document;const s=qo(e,r.document),i=r.readTime?fr(r.readTime):it.min(),a=se.newNoDocument(s,i),l=r.removedTargetIds||[];n=new di([],l,a.key,a)}else if("documentRemove"in t){t.documentRemove;const r=t.documentRemove;r.document;const s=qo(e,r.document),i=r.removedTargetIds||[];n=new di([],i,s,null)}else{if(!("filter"in t))return ot(11601,{Vt:t});{t.filter;const r=t.filter;r.targetId;const{count:s=0,unchangedNames:i}=r,a=new dT(s,i),l=r.targetId;n=new zd(l,a)}}return n}function wT(e,t){return{documents:[Yd(e,t.path)]}}function IT(e,t){const n={structuredQuery:{}},r=t.path;let s;t.collectionGroup!==null?(s=r,n.structuredQuery.from=[{collectionId:t.collectionGroup,allDescendants:!0}]):(s=r.popLast(),n.structuredQuery.from=[{collectionId:r.lastSegment()}]),n.parent=Yd(e,s);const i=function(f){if(f.length!==0)return Zd(Oe.create(f,"and"))}(t.filters);i&&(n.structuredQuery.where=i);const a=function(f){if(f.length!==0)return f.map(d=>function(m){return{field:sr(m.field),direction:bT(m.dir)}}(d))}(t.orderBy);a&&(n.structuredQuery.orderBy=a);const l=wa(e,t.limit);return l!==null&&(n.structuredQuery.limit=l),t.startAt&&(n.structuredQuery.startAt=function(f){return{before:f.inclusive,values:f.position}}(t.startAt)),t.endAt&&(n.structuredQuery.endAt=function(f){return{before:!f.inclusive,values:f.position}}(t.endAt)),{gt:n,parent:s}}function AT(e){let t=ET(e.parent);const n=e.structuredQuery,r=n.from?n.from.length:0;let s=null;if(r>0){Nt(r===1,65062);const d=n.from[0];d.allDescendants?s=d.collectionId:t=t.child(d.collectionId)}let i=[];n.where&&(i=function(p){const m=Jd(p);return m instanceof Oe&&Cd(m)?m.getFilters():[m]}(n.where));let a=[];n.orderBy&&(a=function(p){return p.map(m=>function(V){return new Di(ir(V.field),function(L){switch(L){case"ASCENDING":return"asc";case"DESCENDING":return"desc";default:return}}(V.direction))}(m))}(n.orderBy));let l=null;n.limit&&(l=function(p){let m;return m=typeof p=="object"?p.value:p,Xi(m)?null:m}(n.limit));let c=null;n.startAt&&(c=function(p){const m=!!p.before,T=p.values||[];return new Vi(T,m)}(n.startAt));let f=null;return n.endAt&&(f=function(p){const m=!p.before,T=p.values||[];return new Vi(T,m)}(n.endAt)),QE(t,s,a,i,l,"F",c,f)}function RT(e,t){const n=function(s){switch(s){case"TargetPurposeListen":return null;case"TargetPurposeExistenceFilterMismatch":return"existence-filter-mismatch";case"TargetPurposeExistenceFilterMismatchBloom":return"existence-filter-mismatch-bloom";case"TargetPurposeLimboResolution":return"limbo-document";default:return ot(28987,{purpose:s})}}(t.purpose);return n==null?null:{"goog-listen-tags":n}}function Jd(e){return e.unaryFilter!==void 0?function(n){switch(n.unaryFilter.op){case"IS_NAN":const r=ir(n.unaryFilter.field);return Ut.create(r,"==",{doubleValue:NaN});case"IS_NULL":const s=ir(n.unaryFilter.field);return Ut.create(s,"==",{nullValue:"NULL_VALUE"});case"IS_NOT_NAN":const i=ir(n.unaryFilter.field);return Ut.create(i,"!=",{doubleValue:NaN});case"IS_NOT_NULL":const a=ir(n.unaryFilter.field);return Ut.create(a,"!=",{nullValue:"NULL_VALUE"});case"OPERATOR_UNSPECIFIED":return ot(61313);default:return ot(60726)}}(e):e.fieldFilter!==void 0?function(n){return Ut.create(ir(n.fieldFilter.field),function(s){switch(s){case"EQUAL":return"==";case"NOT_EQUAL":return"!=";case"GREATER_THAN":return">";case"GREATER_THAN_OR_EQUAL":return">=";case"LESS_THAN":return"<";case"LESS_THAN_OR_EQUAL":return"<=";case"ARRAY_CONTAINS":return"array-contains";case"IN":return"in";case"NOT_IN":return"not-in";case"ARRAY_CONTAINS_ANY":return"array-contains-any";case"OPERATOR_UNSPECIFIED":return ot(58110);default:return ot(50506)}}(n.fieldFilter.op),n.fieldFilter.value)}(e):e.compositeFilter!==void 0?function(n){return Oe.create(n.compositeFilter.filters.map(r=>Jd(r)),function(s){switch(s){case"AND":return"and";case"OR":return"or";default:return ot(1026)}}(n.compositeFilter.op))}(e):ot(30097,{filter:e})}function bT(e){return mT[e]}function ST(e){return _T[e]}function CT(e){return yT[e]}function sr(e){return{fieldPath:e.canonicalString()}}function ir(e){return oe.fromServerFormat(e.fieldPath)}function Zd(e){return e instanceof Ut?function(n){if(n.op==="=="){if(jc(n.value))return{unaryFilter:{field:sr(n.field),op:"IS_NAN"}};if($c(n.value))return{unaryFilter:{field:sr(n.field),op:"IS_NULL"}}}else if(n.op==="!="){if(jc(n.value))return{unaryFilter:{field:sr(n.field),op:"IS_NOT_NAN"}};if($c(n.value))return{unaryFilter:{field:sr(n.field),op:"IS_NOT_NULL"}}}return{fieldFilter:{field:sr(n.field),op:ST(n.op),value:n.value}}}(e):e instanceof Oe?function(n){const r=n.getFilters().map(s=>Zd(s));return r.length===1?r[0]:{compositeFilter:{op:CT(n.op),filters:r}}}(e):ot(54877,{filter:e})}function tp(e){return e.length>=4&&e.get(0)==="projects"&&e.get(2)==="databases"}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class mn{constructor(t,n,r,s,i=it.min(),a=it.min(),l=Qt.EMPTY_BYTE_STRING,c=null){this.target=t,this.targetId=n,this.purpose=r,this.sequenceNumber=s,this.snapshotVersion=i,this.lastLimboFreeSnapshotVersion=a,this.resumeToken=l,this.expectedCount=c}withSequenceNumber(t){return new mn(this.target,this.targetId,this.purpose,t,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,this.expectedCount)}withResumeToken(t,n){return new mn(this.target,this.targetId,this.purpose,this.sequenceNumber,n,this.lastLimboFreeSnapshotVersion,t,null)}withExpectedCount(t){return new mn(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,this.lastLimboFreeSnapshotVersion,this.resumeToken,t)}withLastLimboFreeSnapshotVersion(t){return new mn(this.target,this.targetId,this.purpose,this.sequenceNumber,this.snapshotVersion,t,this.resumeToken,this.expectedCount)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class PT{constructor(t){this.wt=t}}function VT(e){const t=AT({parent:e.parent,structuredQuery:e.structuredQuery});return e.limitType==="LAST"?va(t,t.limit,"L"):t}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class DT{constructor(){this.yn=new xT}addToCollectionParentIndex(t,n){return this.yn.add(n),M.resolve()}getCollectionParents(t,n){return M.resolve(this.yn.getEntries(n))}addFieldIndex(t,n){return M.resolve()}deleteFieldIndex(t,n){return M.resolve()}deleteAllFieldIndexes(t){return M.resolve()}createTargetIndexes(t,n){return M.resolve()}getDocumentsMatchingTarget(t,n){return M.resolve(null)}getIndexType(t,n){return M.resolve(0)}getFieldIndexes(t,n){return M.resolve([])}getNextCollectionGroupToUpdate(t){return M.resolve(null)}getMinOffset(t,n){return M.resolve(wn.min())}getMinOffsetFromCollectionGroup(t,n){return M.resolve(wn.min())}updateCollectionGroup(t,n,r){return M.resolve()}updateIndexEntries(t,n){return M.resolve()}}class xT{constructor(){this.index={}}add(t){const n=t.lastSegment(),r=t.popLast(),s=this.index[n]||new $t(xt.comparator),i=!s.has(r);return this.index[n]=s.add(r),i}has(t){const n=t.lastSegment(),r=t.popLast(),s=this.index[n];return s&&s.has(r)}getEntries(t){return(this.index[t]||new $t(xt.comparator)).toArray()}}/**
 * @license
 * Copyright 2018 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const nh={didRun:!1,sequenceNumbersCollected:0,targetsRemoved:0,documentsRemoved:0},ep=41943040;class ge{static withCacheSize(t){return new ge(t,ge.DEFAULT_COLLECTION_PERCENTILE,ge.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT)}constructor(t,n,r){this.cacheSizeCollectionThreshold=t,this.percentileToCollect=n,this.maximumSequenceNumbersToCollect=r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */ge.DEFAULT_COLLECTION_PERCENTILE=10,ge.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT=1e3,ge.DEFAULT=new ge(ep,ge.DEFAULT_COLLECTION_PERCENTILE,ge.DEFAULT_MAX_SEQUENCE_NUMBERS_TO_COLLECT),ge.DISABLED=new ge(-1,0,0);/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wr{constructor(t){this.nr=t}next(){return this.nr+=2,this.nr}static rr(){return new wr(0)}static ir(){return new wr(-1)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const rh="LruGarbageCollector",NT=1048576;function sh([e,t],[n,r]){const s=ct(e,n);return s===0?ct(t,r):s}class OT{constructor(t){this.cr=t,this.buffer=new $t(sh),this.lr=0}hr(){return++this.lr}Pr(t){const n=[t,this.hr()];if(this.buffer.size<this.cr)this.buffer=this.buffer.add(n);else{const r=this.buffer.last();sh(n,r)<0&&(this.buffer=this.buffer.delete(r).add(n))}}get maxValue(){return this.buffer.last()[0]}}class MT{constructor(t,n,r){this.garbageCollector=t,this.asyncQueue=n,this.localStore=r,this.Tr=null}start(){this.garbageCollector.params.cacheSizeCollectionThreshold!==-1&&this.Ir(6e4)}stop(){this.Tr&&(this.Tr.cancel(),this.Tr=null)}get started(){return this.Tr!==null}Ir(t){X(rh,`Garbage collection scheduled in ${t}ms`),this.Tr=this.asyncQueue.enqueueAfterDelay("lru_garbage_collection",t,async()=>{this.Tr=null;try{await this.localStore.collectGarbage(this.garbageCollector)}catch(n){Cr(n)?X(rh,"Ignoring IndexedDB error during garbage collection: ",n):await Qi(n)}await this.Ir(3e5)})}}class kT{constructor(t,n){this.Er=t,this.params=n}calculateTargetCount(t,n){return this.Er.dr(t).next(r=>Math.floor(n/100*r))}nthSequenceNumber(t,n){if(n===0)return M.resolve(Yi.le);const r=new OT(n);return this.Er.forEachTarget(t,s=>r.Pr(s.sequenceNumber)).next(()=>this.Er.Ar(t,s=>r.Pr(s))).next(()=>r.maxValue)}removeTargets(t,n,r){return this.Er.removeTargets(t,n,r)}removeOrphanedDocuments(t,n){return this.Er.removeOrphanedDocuments(t,n)}collect(t,n){return this.params.cacheSizeCollectionThreshold===-1?(X("LruGarbageCollector","Garbage collection skipped; disabled"),M.resolve(nh)):this.getCacheSize(t).next(r=>r<this.params.cacheSizeCollectionThreshold?(X("LruGarbageCollector",`Garbage collection skipped; Cache size ${r} is lower than threshold ${this.params.cacheSizeCollectionThreshold}`),nh):this.Rr(t,n))}getCacheSize(t){return this.Er.getCacheSize(t)}Rr(t,n){let r,s,i,a,l,c,f;const d=Date.now();return this.calculateTargetCount(t,this.params.percentileToCollect).next(p=>(p>this.params.maximumSequenceNumbersToCollect?(X("LruGarbageCollector",`Capping sequence numbers to collect down to the maximum of ${this.params.maximumSequenceNumbersToCollect} from ${p}`),s=this.params.maximumSequenceNumbersToCollect):s=p,a=Date.now(),this.nthSequenceNumber(t,s))).next(p=>(r=p,l=Date.now(),this.removeTargets(t,r,n))).next(p=>(i=p,c=Date.now(),this.removeOrphanedDocuments(t,r))).next(p=>(f=Date.now(),nr()<=_t.DEBUG&&X("LruGarbageCollector",`LRU Garbage Collection
	Counted targets in ${a-d}ms
	Determined least recently used ${s} in `+(l-a)+`ms
	Removed ${i} targets in `+(c-l)+`ms
	Removed ${p} documents in `+(f-c)+`ms
Total Duration: ${f-d}ms`),M.resolve({didRun:!0,sequenceNumbersCollected:s,targetsRemoved:i,documentsRemoved:p})))}}function LT(e,t){return new kT(e,t)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class FT{constructor(){this.changes=new Wn(t=>t.toString(),(t,n)=>t.isEqual(n)),this.changesApplied=!1}addEntry(t){this.assertNotApplied(),this.changes.set(t.key,t)}removeEntry(t,n){this.assertNotApplied(),this.changes.set(t,se.newInvalidDocument(t).setReadTime(n))}getEntry(t,n){this.assertNotApplied();const r=this.changes.get(n);return r!==void 0?M.resolve(r):this.getFromCache(t,n)}getEntries(t,n){return this.getAllFromCache(t,n)}apply(t){return this.assertNotApplied(),this.changesApplied=!0,this.applyChanges(t)}assertNotApplied(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class UT{constructor(t,n){this.overlayedDocument=t,this.mutatedFields=n}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class BT{constructor(t,n,r,s){this.remoteDocumentCache=t,this.mutationQueue=n,this.documentOverlayCache=r,this.indexManager=s}getDocument(t,n){let r=null;return this.documentOverlayCache.getOverlay(t,n).next(s=>(r=s,this.remoteDocumentCache.getEntry(t,n))).next(s=>(r!==null&&hs(r.mutation,s,gn.empty(),Ht.now()),s))}getDocuments(t,n){return this.remoteDocumentCache.getEntries(t,n).next(r=>this.getLocalViewOfDocuments(t,r,vt()).next(()=>r))}getLocalViewOfDocuments(t,n,r=vt()){const s=Bn();return this.populateOverlays(t,s,n).next(()=>this.computeViews(t,n,s,r).next(i=>{let a=Yr();return i.forEach((l,c)=>{a=a.insert(l,c.overlayedDocument)}),a}))}getOverlayedDocuments(t,n){const r=Bn();return this.populateOverlays(t,r,n).next(()=>this.computeViews(t,n,r,vt()))}populateOverlays(t,n,r){const s=[];return r.forEach(i=>{n.has(i)||s.push(i)}),this.documentOverlayCache.getOverlays(t,s).next(i=>{i.forEach((a,l)=>{n.set(a,l)})})}computeViews(t,n,r,s){let i=bn();const a=cs(),l=function(){return cs()}();return n.forEach((c,f)=>{const d=r.get(f.key);s.has(f.key)&&(d===void 0||d.mutation instanceof no)?i=i.insert(f.key,f):d!==void 0?(a.set(f.key,d.mutation.getFieldMask()),hs(d.mutation,f,d.mutation.getFieldMask(),Ht.now())):a.set(f.key,gn.empty())}),this.recalculateAndSaveOverlays(t,i).next(c=>(c.forEach((f,d)=>a.set(f,d)),n.forEach((f,d)=>{var p;return l.set(f,new UT(d,(p=a.get(f))!==null&&p!==void 0?p:null))}),l))}recalculateAndSaveOverlays(t,n){const r=cs();let s=new kt((a,l)=>a-l),i=vt();return this.mutationQueue.getAllMutationBatchesAffectingDocumentKeys(t,n).next(a=>{for(const l of a)l.keys().forEach(c=>{const f=n.get(c);if(f===null)return;let d=r.get(c)||gn.empty();d=l.applyToLocalView(f,d),r.set(c,d);const p=(s.get(l.batchId)||vt()).add(c);s=s.insert(l.batchId,p)})}).next(()=>{const a=[],l=s.getReverseIterator();for(;l.hasNext();){const c=l.getNext(),f=c.key,d=c.value,p=Ld();d.forEach(m=>{if(!i.has(m)){const T=jd(n.get(m),r.get(m));T!==null&&p.set(m,T),i=i.add(m)}}),a.push(this.documentOverlayCache.saveOverlays(t,f,p))}return M.waitFor(a)}).next(()=>r)}recalculateAndSaveOverlaysForDocumentKeys(t,n){return this.remoteDocumentCache.getEntries(t,n).next(r=>this.recalculateAndSaveOverlays(t,r))}getDocumentsMatchingQuery(t,n,r,s){return function(a){return rt.isDocumentKey(a.path)&&a.collectionGroup===null&&a.filters.length===0}(n)?this.getDocumentsMatchingDocumentQuery(t,n.path):Nd(n)?this.getDocumentsMatchingCollectionGroupQuery(t,n,r,s):this.getDocumentsMatchingCollectionQuery(t,n,r,s)}getNextDocuments(t,n,r,s){return this.remoteDocumentCache.getAllFromCollectionGroup(t,n,r,s).next(i=>{const a=s-i.size>0?this.documentOverlayCache.getOverlaysForCollectionGroup(t,n,r.largestBatchId,s-i.size):M.resolve(Bn());let l=ws,c=i;return a.next(f=>M.forEach(f,(d,p)=>(l<p.largestBatchId&&(l=p.largestBatchId),i.get(d)?M.resolve():this.remoteDocumentCache.getEntry(t,d).next(m=>{c=c.insert(d,m)}))).next(()=>this.populateOverlays(t,f,i)).next(()=>this.computeViews(t,c,f,vt())).next(d=>({batchId:l,changes:tT(d)})))})}getDocumentsMatchingDocumentQuery(t,n){return this.getDocument(t,new rt(n)).next(r=>{let s=Yr();return r.isFoundDocument()&&(s=s.insert(r.key,r)),s})}getDocumentsMatchingCollectionGroupQuery(t,n,r,s){const i=n.collectionGroup;let a=Yr();return this.indexManager.getCollectionParents(t,i).next(l=>M.forEach(l,c=>{const f=function(p,m){return new Ps(m,null,p.explicitOrderBy.slice(),p.filters.slice(),p.limit,p.limitType,p.startAt,p.endAt)}(n,c.child(i));return this.getDocumentsMatchingCollectionQuery(t,f,r,s).next(d=>{d.forEach((p,m)=>{a=a.insert(p,m)})})}).next(()=>a))}getDocumentsMatchingCollectionQuery(t,n,r,s){let i;return this.documentOverlayCache.getOverlaysForCollection(t,n.path,r.largestBatchId).next(a=>(i=a,this.remoteDocumentCache.getDocumentsMatchingQuery(t,n,r,i,s))).next(a=>{i.forEach((c,f)=>{const d=f.getKey();a.get(d)===null&&(a=a.insert(d,se.newInvalidDocument(d)))});let l=Yr();return a.forEach((c,f)=>{const d=i.get(c);d!==void 0&&hs(d.mutation,f,gn.empty(),Ht.now()),to(n,f)&&(l=l.insert(c,f))}),l})}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class $T{constructor(t){this.serializer=t,this.Fr=new Map,this.Mr=new Map}getBundleMetadata(t,n){return M.resolve(this.Fr.get(n))}saveBundleMetadata(t,n){return this.Fr.set(n.id,function(s){return{id:s.id,version:s.version,createTime:fr(s.createTime)}}(n)),M.resolve()}getNamedQuery(t,n){return M.resolve(this.Mr.get(n))}saveNamedQuery(t,n){return this.Mr.set(n.name,function(s){return{name:s.name,query:VT(s.bundledQuery),readTime:fr(s.readTime)}}(n)),M.resolve()}}/**
 * @license
 * Copyright 2022 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jT{constructor(){this.overlays=new kt(rt.comparator),this.Or=new Map}getOverlay(t,n){return M.resolve(this.overlays.get(n))}getOverlays(t,n){const r=Bn();return M.forEach(n,s=>this.getOverlay(t,s).next(i=>{i!==null&&r.set(s,i)})).next(()=>r)}saveOverlays(t,n,r){return r.forEach((s,i)=>{this.St(t,n,i)}),M.resolve()}removeOverlaysForBatchId(t,n,r){const s=this.Or.get(r);return s!==void 0&&(s.forEach(i=>this.overlays=this.overlays.remove(i)),this.Or.delete(r)),M.resolve()}getOverlaysForCollection(t,n,r){const s=Bn(),i=n.length+1,a=new rt(n.child("")),l=this.overlays.getIteratorFrom(a);for(;l.hasNext();){const c=l.getNext().value,f=c.getKey();if(!n.isPrefixOf(f.path))break;f.path.length===i&&c.largestBatchId>r&&s.set(c.getKey(),c)}return M.resolve(s)}getOverlaysForCollectionGroup(t,n,r,s){let i=new kt((f,d)=>f-d);const a=this.overlays.getIterator();for(;a.hasNext();){const f=a.getNext().value;if(f.getKey().getCollectionGroup()===n&&f.largestBatchId>r){let d=i.get(f.largestBatchId);d===null&&(d=Bn(),i=i.insert(f.largestBatchId,d)),d.set(f.getKey(),f)}}const l=Bn(),c=i.getIterator();for(;c.hasNext()&&(c.getNext().value.forEach((f,d)=>l.set(f,d)),!(l.size()>=s)););return M.resolve(l)}St(t,n,r){const s=this.overlays.get(r.key);if(s!==null){const a=this.Or.get(s.largestBatchId).delete(r.key);this.Or.set(s.largestBatchId,a)}this.overlays=this.overlays.insert(r.key,new fT(n,r));let i=this.Or.get(n);i===void 0&&(i=vt(),this.Or.set(n,i)),this.Or.set(n,i.add(r.key))}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class qT{constructor(){this.sessionToken=Qt.EMPTY_BYTE_STRING}getSessionToken(t){return M.resolve(this.sessionToken)}setSessionToken(t,n){return this.sessionToken=n,M.resolve()}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fl{constructor(){this.Nr=new $t(jt.Br),this.Lr=new $t(jt.kr)}isEmpty(){return this.Nr.isEmpty()}addReference(t,n){const r=new jt(t,n);this.Nr=this.Nr.add(r),this.Lr=this.Lr.add(r)}qr(t,n){t.forEach(r=>this.addReference(r,n))}removeReference(t,n){this.Qr(new jt(t,n))}$r(t,n){t.forEach(r=>this.removeReference(r,n))}Ur(t){const n=new rt(new xt([])),r=new jt(n,t),s=new jt(n,t+1),i=[];return this.Lr.forEachInRange([r,s],a=>{this.Qr(a),i.push(a.key)}),i}Kr(){this.Nr.forEach(t=>this.Qr(t))}Qr(t){this.Nr=this.Nr.delete(t),this.Lr=this.Lr.delete(t)}Wr(t){const n=new rt(new xt([])),r=new jt(n,t),s=new jt(n,t+1);let i=vt();return this.Lr.forEachInRange([r,s],a=>{i=i.add(a.key)}),i}containsKey(t){const n=new jt(t,0),r=this.Nr.firstAfterOrEqual(n);return r!==null&&t.isEqual(r.key)}}class jt{constructor(t,n){this.key=t,this.Gr=n}static Br(t,n){return rt.comparator(t.key,n.key)||ct(t.Gr,n.Gr)}static kr(t,n){return ct(t.Gr,n.Gr)||rt.comparator(t.key,n.key)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class HT{constructor(t,n){this.indexManager=t,this.referenceDelegate=n,this.mutationQueue=[],this.Jn=1,this.zr=new $t(jt.Br)}checkEmpty(t){return M.resolve(this.mutationQueue.length===0)}addMutationBatch(t,n,r,s){const i=this.Jn;this.Jn++,this.mutationQueue.length>0&&this.mutationQueue[this.mutationQueue.length-1];const a=new hT(i,n,r,s);this.mutationQueue.push(a);for(const l of s)this.zr=this.zr.add(new jt(l.key,i)),this.indexManager.addToCollectionParentIndex(t,l.key.path.popLast());return M.resolve(a)}lookupMutationBatch(t,n){return M.resolve(this.jr(n))}getNextMutationBatchAfterBatchId(t,n){const r=n+1,s=this.Hr(r),i=s<0?0:s;return M.resolve(this.mutationQueue.length>i?this.mutationQueue[i]:null)}getHighestUnacknowledgedBatchId(){return M.resolve(this.mutationQueue.length===0?VE:this.Jn-1)}getAllMutationBatches(t){return M.resolve(this.mutationQueue.slice())}getAllMutationBatchesAffectingDocumentKey(t,n){const r=new jt(n,0),s=new jt(n,Number.POSITIVE_INFINITY),i=[];return this.zr.forEachInRange([r,s],a=>{const l=this.jr(a.Gr);i.push(l)}),M.resolve(i)}getAllMutationBatchesAffectingDocumentKeys(t,n){let r=new $t(ct);return n.forEach(s=>{const i=new jt(s,0),a=new jt(s,Number.POSITIVE_INFINITY);this.zr.forEachInRange([i,a],l=>{r=r.add(l.Gr)})}),M.resolve(this.Jr(r))}getAllMutationBatchesAffectingQuery(t,n){const r=n.path,s=r.length+1;let i=r;rt.isDocumentKey(i)||(i=i.child(""));const a=new jt(new rt(i),0);let l=new $t(ct);return this.zr.forEachWhile(c=>{const f=c.key.path;return!!r.isPrefixOf(f)&&(f.length===s&&(l=l.add(c.Gr)),!0)},a),M.resolve(this.Jr(l))}Jr(t){const n=[];return t.forEach(r=>{const s=this.jr(r);s!==null&&n.push(s)}),n}removeMutationBatch(t,n){Nt(this.Yr(n.batchId,"removed")===0,55003),this.mutationQueue.shift();let r=this.zr;return M.forEach(n.mutations,s=>{const i=new jt(s.key,n.batchId);return r=r.delete(i),this.referenceDelegate.markPotentiallyOrphaned(t,s.key)}).next(()=>{this.zr=r})}Xn(t){}containsKey(t,n){const r=new jt(n,0),s=this.zr.firstAfterOrEqual(r);return M.resolve(n.isEqual(s&&s.key))}performConsistencyCheck(t){return this.mutationQueue.length,M.resolve()}Yr(t,n){return this.Hr(t)}Hr(t){return this.mutationQueue.length===0?0:t-this.mutationQueue[0].batchId}jr(t){const n=this.Hr(t);return n<0||n>=this.mutationQueue.length?null:this.mutationQueue[n]}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class zT{constructor(t){this.Zr=t,this.docs=function(){return new kt(rt.comparator)}(),this.size=0}setIndexManager(t){this.indexManager=t}addEntry(t,n){const r=n.key,s=this.docs.get(r),i=s?s.size:0,a=this.Zr(n);return this.docs=this.docs.insert(r,{document:n.mutableCopy(),size:a}),this.size+=a-i,this.indexManager.addToCollectionParentIndex(t,r.path.popLast())}removeEntry(t){const n=this.docs.get(t);n&&(this.docs=this.docs.remove(t),this.size-=n.size)}getEntry(t,n){const r=this.docs.get(n);return M.resolve(r?r.document.mutableCopy():se.newInvalidDocument(n))}getEntries(t,n){let r=bn();return n.forEach(s=>{const i=this.docs.get(s);r=r.insert(s,i?i.document.mutableCopy():se.newInvalidDocument(s))}),M.resolve(r)}getDocumentsMatchingQuery(t,n,r,s){let i=bn();const a=n.path,l=new rt(a.child("__id-9223372036854775808__")),c=this.docs.getIteratorFrom(l);for(;c.hasNext();){const{key:f,value:{document:d}}=c.getNext();if(!a.isPrefixOf(f.path))break;f.path.length>a.length+1||bE(RE(d),r)<=0||(s.has(d.key)||to(n,d))&&(i=i.insert(d.key,d.mutableCopy()))}return M.resolve(i)}getAllFromCollectionGroup(t,n,r,s){ot(9500)}Xr(t,n){return M.forEach(this.docs,r=>n(r))}newChangeBuffer(t){return new KT(this)}getSize(t){return M.resolve(this.size)}}class KT extends FT{constructor(t){super(),this.vr=t}applyChanges(t){const n=[];return this.changes.forEach((r,s)=>{s.isValidDocument()?n.push(this.vr.addEntry(t,s)):this.vr.removeEntry(r)}),M.waitFor(n)}getFromCache(t,n){return this.vr.getEntry(t,n)}getAllFromCache(t,n){return this.vr.getEntries(t,n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class GT{constructor(t){this.persistence=t,this.ei=new Wn(n=>ol(n),al),this.lastRemoteSnapshotVersion=it.min(),this.highestTargetId=0,this.ti=0,this.ni=new fl,this.targetCount=0,this.ri=wr.rr()}forEachTarget(t,n){return this.ei.forEach((r,s)=>n(s)),M.resolve()}getLastRemoteSnapshotVersion(t){return M.resolve(this.lastRemoteSnapshotVersion)}getHighestSequenceNumber(t){return M.resolve(this.ti)}allocateTargetId(t){return this.highestTargetId=this.ri.next(),M.resolve(this.highestTargetId)}setTargetsMetadata(t,n,r){return r&&(this.lastRemoteSnapshotVersion=r),n>this.ti&&(this.ti=n),M.resolve()}ar(t){this.ei.set(t.target,t);const n=t.targetId;n>this.highestTargetId&&(this.ri=new wr(n),this.highestTargetId=n),t.sequenceNumber>this.ti&&(this.ti=t.sequenceNumber)}addTargetData(t,n){return this.ar(n),this.targetCount+=1,M.resolve()}updateTargetData(t,n){return this.ar(n),M.resolve()}removeTargetData(t,n){return this.ei.delete(n.target),this.ni.Ur(n.targetId),this.targetCount-=1,M.resolve()}removeTargets(t,n,r){let s=0;const i=[];return this.ei.forEach((a,l)=>{l.sequenceNumber<=n&&r.get(l.targetId)===null&&(this.ei.delete(a),i.push(this.removeMatchingKeysForTargetId(t,l.targetId)),s++)}),M.waitFor(i).next(()=>s)}getTargetCount(t){return M.resolve(this.targetCount)}getTargetData(t,n){const r=this.ei.get(n)||null;return M.resolve(r)}addMatchingKeys(t,n,r){return this.ni.qr(n,r),M.resolve()}removeMatchingKeys(t,n,r){this.ni.$r(n,r);const s=this.persistence.referenceDelegate,i=[];return s&&n.forEach(a=>{i.push(s.markPotentiallyOrphaned(t,a))}),M.waitFor(i)}removeMatchingKeysForTargetId(t,n){return this.ni.Ur(n),M.resolve()}getMatchingKeysForTargetId(t,n){const r=this.ni.Wr(n);return M.resolve(r)}containsKey(t,n){return M.resolve(this.ni.containsKey(n))}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class np{constructor(t,n){this.ii={},this.overlays={},this.si=new Yi(0),this.oi=!1,this.oi=!0,this._i=new qT,this.referenceDelegate=t(this),this.ai=new GT(this),this.indexManager=new DT,this.remoteDocumentCache=function(s){return new zT(s)}(r=>this.referenceDelegate.ui(r)),this.serializer=new PT(n),this.ci=new $T(this.serializer)}start(){return Promise.resolve()}shutdown(){return this.oi=!1,Promise.resolve()}get started(){return this.oi}setDatabaseDeletedListener(){}setNetworkEnabled(){}getIndexManager(t){return this.indexManager}getDocumentOverlayCache(t){let n=this.overlays[t.toKey()];return n||(n=new jT,this.overlays[t.toKey()]=n),n}getMutationQueue(t,n){let r=this.ii[t.toKey()];return r||(r=new HT(n,this.referenceDelegate),this.ii[t.toKey()]=r),r}getGlobalsCache(){return this._i}getTargetCache(){return this.ai}getRemoteDocumentCache(){return this.remoteDocumentCache}getBundleCache(){return this.ci}runTransaction(t,n,r){X("MemoryPersistence","Starting transaction:",t);const s=new WT(this.si.next());return this.referenceDelegate.li(),r(s).next(i=>this.referenceDelegate.hi(s).next(()=>i)).toPromise().then(i=>(s.raiseOnCommittedEvent(),i))}Pi(t,n){return M.or(Object.values(this.ii).map(r=>()=>r.containsKey(t,n)))}}class WT extends CE{constructor(t){super(),this.currentSequenceNumber=t}}class dl{constructor(t){this.persistence=t,this.Ti=new fl,this.Ii=null}static Ei(t){return new dl(t)}get di(){if(this.Ii)return this.Ii;throw ot(60996)}addReference(t,n,r){return this.Ti.addReference(r,n),this.di.delete(r.toString()),M.resolve()}removeReference(t,n,r){return this.Ti.removeReference(r,n),this.di.add(r.toString()),M.resolve()}markPotentiallyOrphaned(t,n){return this.di.add(n.toString()),M.resolve()}removeTarget(t,n){this.Ti.Ur(n.targetId).forEach(s=>this.di.add(s.toString()));const r=this.persistence.getTargetCache();return r.getMatchingKeysForTargetId(t,n.targetId).next(s=>{s.forEach(i=>this.di.add(i.toString()))}).next(()=>r.removeTargetData(t,n))}li(){this.Ii=new Set}hi(t){const n=this.persistence.getRemoteDocumentCache().newChangeBuffer();return M.forEach(this.di,r=>{const s=rt.fromPath(r);return this.Ai(t,s).next(i=>{i||n.removeEntry(s,it.min())})}).next(()=>(this.Ii=null,n.apply(t)))}updateLimboDocument(t,n){return this.Ai(t,n).next(r=>{r?this.di.delete(n.toString()):this.di.add(n.toString())})}ui(t){return 0}Ai(t,n){return M.or([()=>M.resolve(this.Ti.containsKey(n)),()=>this.persistence.getTargetCache().containsKey(t,n),()=>this.persistence.Pi(t,n)])}}class Oi{constructor(t,n){this.persistence=t,this.Ri=new Wn(r=>xE(r.path),(r,s)=>r.isEqual(s)),this.garbageCollector=LT(this,n)}static Ei(t,n){return new Oi(t,n)}li(){}hi(t){return M.resolve()}forEachTarget(t,n){return this.persistence.getTargetCache().forEachTarget(t,n)}dr(t){const n=this.Vr(t);return this.persistence.getTargetCache().getTargetCount(t).next(r=>n.next(s=>r+s))}Vr(t){let n=0;return this.Ar(t,r=>{n++}).next(()=>n)}Ar(t,n){return M.forEach(this.Ri,(r,s)=>this.gr(t,r,s).next(i=>i?M.resolve():n(s)))}removeTargets(t,n,r){return this.persistence.getTargetCache().removeTargets(t,n,r)}removeOrphanedDocuments(t,n){let r=0;const s=this.persistence.getRemoteDocumentCache(),i=s.newChangeBuffer();return s.Xr(t,a=>this.gr(t,a,n).next(l=>{l||(r++,i.removeEntry(a,it.min()))})).next(()=>i.apply(t)).next(()=>r)}markPotentiallyOrphaned(t,n){return this.Ri.set(n,t.currentSequenceNumber),M.resolve()}removeTarget(t,n){const r=n.withSequenceNumber(t.currentSequenceNumber);return this.persistence.getTargetCache().updateTargetData(t,r)}addReference(t,n,r){return this.Ri.set(r,t.currentSequenceNumber),M.resolve()}removeReference(t,n,r){return this.Ri.set(r,t.currentSequenceNumber),M.resolve()}updateLimboDocument(t,n){return this.Ri.set(n,t.currentSequenceNumber),M.resolve()}ui(t){let n=t.key.toString().length;return t.isFoundDocument()&&(n+=hi(t.data.value)),n}gr(t,n,r){return M.or([()=>this.persistence.Pi(t,n),()=>this.persistence.getTargetCache().containsKey(t,n),()=>{const s=this.Ri.get(n);return M.resolve(s!==void 0&&s>r)}])}getCacheSize(t){return this.persistence.getRemoteDocumentCache().getSize(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class pl{constructor(t,n,r,s){this.targetId=t,this.fromCache=n,this.ls=r,this.hs=s}static Ps(t,n){let r=vt(),s=vt();for(const i of n.docChanges)switch(i.type){case 0:r=r.add(i.doc.key);break;case 1:s=s.add(i.doc.key)}return new pl(t,n.fromCache,r,s)}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class QT{constructor(){this._documentReadCount=0}get documentReadCount(){return this._documentReadCount}incrementDocumentReadCount(t){this._documentReadCount+=t}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class YT{constructor(){this.Ts=!1,this.Is=!1,this.Es=100,this.ds=function(){return Wy()?8:PE(Ky())>0?6:4}()}initialize(t,n){this.As=t,this.indexManager=n,this.Ts=!0}getDocumentsMatchingQuery(t,n,r,s){const i={result:null};return this.Rs(t,n).next(a=>{i.result=a}).next(()=>{if(!i.result)return this.Vs(t,n,s,r).next(a=>{i.result=a})}).next(()=>{if(i.result)return;const a=new QT;return this.fs(t,n,a).next(l=>{if(i.result=l,this.Is)return this.gs(t,n,a,l.size)})}).next(()=>i.result)}gs(t,n,r,s){return r.documentReadCount<this.Es?(nr()<=_t.DEBUG&&X("QueryEngine","SDK will not create cache indexes for query:",rr(n),"since it only creates cache indexes for collection contains","more than or equal to",this.Es,"documents"),M.resolve()):(nr()<=_t.DEBUG&&X("QueryEngine","Query:",rr(n),"scans",r.documentReadCount,"local documents and returns",s,"documents as results."),r.documentReadCount>this.ds*s?(nr()<=_t.DEBUG&&X("QueryEngine","The SDK decides to create cache indexes for query:",rr(n),"as using cache indexes may help improve performance."),this.indexManager.createTargetIndexes(t,He(n))):M.resolve())}Rs(t,n){if(Kc(n))return M.resolve(null);let r=He(n);return this.indexManager.getIndexType(t,r).next(s=>s===0?null:(n.limit!==null&&s===1&&(n=va(n,null,"F"),r=He(n)),this.indexManager.getDocumentsMatchingTarget(t,r).next(i=>{const a=vt(...i);return this.As.getDocuments(t,a).next(l=>this.indexManager.getMinOffset(t,r).next(c=>{const f=this.ps(n,l);return this.ys(n,f,a,c.readTime)?this.Rs(t,va(n,null,"F")):this.ws(t,f,n,c)}))})))}Vs(t,n,r,s){return Kc(n)||s.isEqual(it.min())?M.resolve(null):this.As.getDocuments(t,r).next(i=>{const a=this.ps(n,i);return this.ys(n,a,r,s)?M.resolve(null):(nr()<=_t.DEBUG&&X("QueryEngine","Re-using previous result from %s to execute query: %s",s.toString(),rr(n)),this.ws(t,a,n,AE(s,ws)).next(l=>l))})}ps(t,n){let r=new $t(Md(t));return n.forEach((s,i)=>{to(t,i)&&(r=r.add(i))}),r}ys(t,n,r,s){if(t.limit===null)return!1;if(r.size!==n.size)return!0;const i=t.limitType==="F"?n.last():n.first();return!!i&&(i.hasPendingWrites||i.version.compareTo(s)>0)}fs(t,n,r){return nr()<=_t.DEBUG&&X("QueryEngine","Using full collection scan to execute query:",rr(n)),this.As.getDocumentsMatchingQuery(t,n,wn.min(),r)}ws(t,n,r,s){return this.As.getDocumentsMatchingQuery(t,r,s).next(i=>(n.forEach(a=>{i=i.insert(a.key,a)}),i))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const gl="LocalStore",XT=3e8;class JT{constructor(t,n,r,s){this.persistence=t,this.bs=n,this.serializer=s,this.Ss=new kt(ct),this.Ds=new Wn(i=>ol(i),al),this.vs=new Map,this.Cs=t.getRemoteDocumentCache(),this.ai=t.getTargetCache(),this.ci=t.getBundleCache(),this.Fs(r)}Fs(t){this.documentOverlayCache=this.persistence.getDocumentOverlayCache(t),this.indexManager=this.persistence.getIndexManager(t),this.mutationQueue=this.persistence.getMutationQueue(t,this.indexManager),this.localDocuments=new BT(this.Cs,this.mutationQueue,this.documentOverlayCache,this.indexManager),this.Cs.setIndexManager(this.indexManager),this.bs.initialize(this.localDocuments,this.indexManager)}collectGarbage(t){return this.persistence.runTransaction("Collect garbage","readwrite-primary",n=>t.collect(n,this.Ss))}}function ZT(e,t,n,r){return new JT(e,t,n,r)}async function rp(e,t){const n=yt(e);return await n.persistence.runTransaction("Handle user change","readonly",r=>{let s;return n.mutationQueue.getAllMutationBatches(r).next(i=>(s=i,n.Fs(t),n.mutationQueue.getAllMutationBatches(r))).next(i=>{const a=[],l=[];let c=vt();for(const f of s){a.push(f.batchId);for(const d of f.mutations)c=c.add(d.key)}for(const f of i){l.push(f.batchId);for(const d of f.mutations)c=c.add(d.key)}return n.localDocuments.getDocuments(r,c).next(f=>({Ms:f,removedBatchIds:a,addedBatchIds:l}))})})}function sp(e){const t=yt(e);return t.persistence.runTransaction("Get last remote snapshot version","readonly",n=>t.ai.getLastRemoteSnapshotVersion(n))}function tw(e,t){const n=yt(e),r=t.snapshotVersion;let s=n.Ss;return n.persistence.runTransaction("Apply remote event","readwrite-primary",i=>{const a=n.Cs.newChangeBuffer({trackRemovals:!0});s=n.Ss;const l=[];t.targetChanges.forEach((d,p)=>{const m=s.get(p);if(!m)return;l.push(n.ai.removeMatchingKeys(i,d.removedDocuments,p).next(()=>n.ai.addMatchingKeys(i,d.addedDocuments,p)));let T=m.withSequenceNumber(i.currentSequenceNumber);t.targetMismatches.get(p)!==null?T=T.withResumeToken(Qt.EMPTY_BYTE_STRING,it.min()).withLastLimboFreeSnapshotVersion(it.min()):d.resumeToken.approximateByteSize()>0&&(T=T.withResumeToken(d.resumeToken,r)),s=s.insert(p,T),function(N,L,G){return N.resumeToken.approximateByteSize()===0||L.snapshotVersion.toMicroseconds()-N.snapshotVersion.toMicroseconds()>=XT?!0:G.addedDocuments.size+G.modifiedDocuments.size+G.removedDocuments.size>0}(m,T,d)&&l.push(n.ai.updateTargetData(i,T))});let c=bn(),f=vt();if(t.documentUpdates.forEach(d=>{t.resolvedLimboDocuments.has(d)&&l.push(n.persistence.referenceDelegate.updateLimboDocument(i,d))}),l.push(ew(i,a,t.documentUpdates).next(d=>{c=d.xs,f=d.Os})),!r.isEqual(it.min())){const d=n.ai.getLastRemoteSnapshotVersion(i).next(p=>n.ai.setTargetsMetadata(i,i.currentSequenceNumber,r));l.push(d)}return M.waitFor(l).next(()=>a.apply(i)).next(()=>n.localDocuments.getLocalViewOfDocuments(i,c,f)).next(()=>c)}).then(i=>(n.Ss=s,i))}function ew(e,t,n){let r=vt(),s=vt();return n.forEach(i=>r=r.add(i)),t.getEntries(e,r).next(i=>{let a=bn();return n.forEach((l,c)=>{const f=i.get(l);c.isFoundDocument()!==f.isFoundDocument()&&(s=s.add(l)),c.isNoDocument()&&c.version.isEqual(it.min())?(t.removeEntry(l,c.readTime),a=a.insert(l,c)):!f.isValidDocument()||c.version.compareTo(f.version)>0||c.version.compareTo(f.version)===0&&f.hasPendingWrites?(t.addEntry(c),a=a.insert(l,c)):X(gl,"Ignoring outdated watch update for ",l,". Current version:",f.version," Watch version:",c.version)}),{xs:a,Os:s}})}function nw(e,t){const n=yt(e);return n.persistence.runTransaction("Allocate target","readwrite",r=>{let s;return n.ai.getTargetData(r,t).next(i=>i?(s=i,M.resolve(s)):n.ai.allocateTargetId(r).next(a=>(s=new mn(t,a,"TargetPurposeListen",r.currentSequenceNumber),n.ai.addTargetData(r,s).next(()=>s))))}).then(r=>{const s=n.Ss.get(r.targetId);return(s===null||r.snapshotVersion.compareTo(s.snapshotVersion)>0)&&(n.Ss=n.Ss.insert(r.targetId,r),n.Ds.set(t,r.targetId)),r})}async function Ra(e,t,n){const r=yt(e),s=r.Ss.get(t),i=n?"readwrite":"readwrite-primary";try{n||await r.persistence.runTransaction("Release target",i,a=>r.persistence.referenceDelegate.removeTarget(a,s))}catch(a){if(!Cr(a))throw a;X(gl,`Failed to update sequence numbers for target ${t}: ${a}`)}r.Ss=r.Ss.remove(t),r.Ds.delete(s.target)}function ih(e,t,n){const r=yt(e);let s=it.min(),i=vt();return r.persistence.runTransaction("Execute query","readwrite",a=>function(c,f,d){const p=yt(c),m=p.Ds.get(d);return m!==void 0?M.resolve(p.Ss.get(m)):p.ai.getTargetData(f,d)}(r,a,He(t)).next(l=>{if(l)return s=l.lastLimboFreeSnapshotVersion,r.ai.getMatchingKeysForTargetId(a,l.targetId).next(c=>{i=c})}).next(()=>r.bs.getDocumentsMatchingQuery(a,t,n?s:it.min(),n?i:vt())).next(l=>(rw(r,XE(t),l),{documents:l,Ns:i})))}function rw(e,t,n){let r=e.vs.get(t)||it.min();n.forEach((s,i)=>{i.readTime.compareTo(r)>0&&(r=i.readTime)}),e.vs.set(t,r)}class oh{constructor(){this.activeTargetIds=rT()}$s(t){this.activeTargetIds=this.activeTargetIds.add(t)}Us(t){this.activeTargetIds=this.activeTargetIds.delete(t)}Qs(){const t={activeTargetIds:this.activeTargetIds.toArray(),updateTimeMs:Date.now()};return JSON.stringify(t)}}class sw{constructor(){this.So=new oh,this.Do={},this.onlineStateHandler=null,this.sequenceNumberHandler=null}addPendingMutation(t){}updateMutationState(t,n,r){}addLocalQueryTarget(t,n=!0){return n&&this.So.$s(t),this.Do[t]||"not-current"}updateQueryState(t,n,r){this.Do[t]=n}removeLocalQueryTarget(t){this.So.Us(t)}isLocalQueryTarget(t){return this.So.activeTargetIds.has(t)}clearQueryState(t){delete this.Do[t]}getAllActiveQueryTargets(){return this.So.activeTargetIds}isActiveQueryTarget(t){return this.So.activeTargetIds.has(t)}start(){return this.So=new oh,Promise.resolve()}handleUserChange(t,n,r){}setOnlineState(t){}shutdown(){}writeSequenceNumber(t){}notifyBundleLoaded(t){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class iw{vo(t){}shutdown(){}}/**
 * @license
 * Copyright 2019 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const ah="ConnectivityMonitor";class lh{constructor(){this.Co=()=>this.Fo(),this.Mo=()=>this.xo(),this.Oo=[],this.No()}vo(t){this.Oo.push(t)}shutdown(){window.removeEventListener("online",this.Co),window.removeEventListener("offline",this.Mo)}No(){window.addEventListener("online",this.Co),window.addEventListener("offline",this.Mo)}Fo(){X(ah,"Network connectivity changed: AVAILABLE");for(const t of this.Oo)t(0)}xo(){X(ah,"Network connectivity changed: UNAVAILABLE");for(const t of this.Oo)t(1)}static C(){return typeof window<"u"&&window.addEventListener!==void 0&&window.removeEventListener!==void 0}}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */let ni=null;function ba(){return ni===null?ni=function(){return 268435456+Math.round(2147483648*Math.random())}():ni++,"0x"+ni.toString(16)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ho="RestConnection",ow={BatchGetDocuments:"batchGet",Commit:"commit",RunQuery:"runQuery",RunAggregationQuery:"runAggregationQuery"};class aw{get Bo(){return!1}constructor(t){this.databaseInfo=t,this.databaseId=t.databaseId;const n=t.ssl?"https":"http",r=encodeURIComponent(this.databaseId.projectId),s=encodeURIComponent(this.databaseId.database);this.Lo=n+"://"+t.host,this.ko=`projects/${r}/databases/${s}`,this.qo=this.databaseId.database===Ci?`project_id=${r}`:`project_id=${r}&database_id=${s}`}Qo(t,n,r,s,i){const a=ba(),l=this.$o(t,n.toUriEncodedString());X(Ho,`Sending RPC '${t}' ${a}:`,l,r);const c={"google-cloud-resource-prefix":this.ko,"x-goog-request-params":this.qo};this.Uo(c,s,i);const{host:f}=new URL(l),d=el(f);return this.Ko(t,l,c,r,d).then(p=>(X(Ho,`Received RPC '${t}' ${a}: `,p),p),p=>{throw yr(Ho,`RPC '${t}' ${a} failed with error: `,p,"url: ",l,"request:",r),p})}Wo(t,n,r,s,i,a){return this.Qo(t,n,r,s,i)}Uo(t,n,r){t["X-Goog-Api-Client"]=function(){return"gl-js/ fire/"+Sr}(),t["Content-Type"]="text/plain",this.databaseInfo.appId&&(t["X-Firebase-GMPID"]=this.databaseInfo.appId),n&&n.headers.forEach((s,i)=>t[i]=s),r&&r.headers.forEach((s,i)=>t[i]=s)}$o(t,n){const r=ow[t];return`${this.Lo}/v1/${n}:${r}`}terminate(){}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class lw{constructor(t){this.Go=t.Go,this.zo=t.zo}jo(t){this.Ho=t}Jo(t){this.Yo=t}Zo(t){this.Xo=t}onMessage(t){this.e_=t}close(){this.zo()}send(t){this.Go(t)}t_(){this.Ho()}n_(){this.Yo()}r_(t){this.Xo(t)}i_(t){this.e_(t)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const te="WebChannelConnection";class uw extends aw{constructor(t){super(t),this.forceLongPolling=t.forceLongPolling,this.autoDetectLongPolling=t.autoDetectLongPolling,this.useFetchStreams=t.useFetchStreams,this.longPollingOptions=t.longPollingOptions}Ko(t,n,r,s,i){const a=ba();return new Promise((l,c)=>{const f=new ud;f.setWithCredentials(!0),f.listenOnce(cd.COMPLETE,()=>{try{switch(f.getLastErrorCode()){case ci.NO_ERROR:const p=f.getResponseJson();X(te,`XHR for RPC '${t}' ${a} received:`,JSON.stringify(p)),l(p);break;case ci.TIMEOUT:X(te,`RPC '${t}' ${a} timed out`),c(new Z(B.DEADLINE_EXCEEDED,"Request time out"));break;case ci.HTTP_ERROR:const m=f.getStatus();if(X(te,`RPC '${t}' ${a} failed with status:`,m,"response text:",f.getResponseText()),m>0){let T=f.getResponseJson();Array.isArray(T)&&(T=T[0]);const V=T==null?void 0:T.error;if(V&&V.status&&V.message){const N=function(G){const U=G.toLowerCase().replace(/_/g,"-");return Object.values(B).indexOf(U)>=0?U:B.UNKNOWN}(V.status);c(new Z(N,V.message))}else c(new Z(B.UNKNOWN,"Server responded with status "+f.getStatus()))}else c(new Z(B.UNAVAILABLE,"Connection failed."));break;default:ot(9055,{s_:t,streamId:a,o_:f.getLastErrorCode(),__:f.getLastError()})}}finally{X(te,`RPC '${t}' ${a} completed.`)}});const d=JSON.stringify(s);X(te,`RPC '${t}' ${a} sending request:`,s),f.send(n,"POST",d,r,15)})}a_(t,n,r){const s=ba(),i=[this.Lo,"/","google.firestore.v1.Firestore","/",t,"/channel"],a=dd(),l=fd(),c={httpSessionIdParam:"gsessionid",initMessageHeaders:{},messageUrlParams:{database:`projects/${this.databaseId.projectId}/databases/${this.databaseId.database}`},sendRawJson:!0,supportsCrossDomainXhr:!0,internalChannelParams:{forwardChannelRequestTimeoutMs:6e5},forceLongPolling:this.forceLongPolling,detectBufferingProxy:this.autoDetectLongPolling},f=this.longPollingOptions.timeoutSeconds;f!==void 0&&(c.longPollingTimeout=Math.round(1e3*f)),this.useFetchStreams&&(c.useFetchStreams=!0),this.Uo(c.initMessageHeaders,n,r),c.encodeInitMessageHeaders=!0;const d=i.join("");X(te,`Creating RPC '${t}' stream ${s}: ${d}`,c);const p=a.createWebChannel(d,c);let m=!1,T=!1;const V=new lw({Go:L=>{T?X(te,`Not sending because RPC '${t}' stream ${s} is closed:`,L):(m||(X(te,`Opening RPC '${t}' stream ${s} transport.`),p.open(),m=!0),X(te,`RPC '${t}' stream ${s} sending:`,L),p.send(L))},zo:()=>p.close()}),N=(L,G,U)=>{L.listen(G,H=>{try{U(H)}catch(z){setTimeout(()=>{throw z},0)}})};return N(p,Qr.EventType.OPEN,()=>{T||(X(te,`RPC '${t}' stream ${s} transport opened.`),V.t_())}),N(p,Qr.EventType.CLOSE,()=>{T||(T=!0,X(te,`RPC '${t}' stream ${s} transport closed`),V.r_())}),N(p,Qr.EventType.ERROR,L=>{T||(T=!0,yr(te,`RPC '${t}' stream ${s} transport errored. Name:`,L.name,"Message:",L.message),V.r_(new Z(B.UNAVAILABLE,"The operation could not be completed")))}),N(p,Qr.EventType.MESSAGE,L=>{var G;if(!T){const U=L.data[0];Nt(!!U,16349);const H=U,z=(H==null?void 0:H.error)||((G=H[0])===null||G===void 0?void 0:G.error);if(z){X(te,`RPC '${t}' stream ${s} received error:`,z);const ht=z.status;let dt=function(w){const A=Ft[w];if(A!==void 0)return Hd(A)}(ht),I=z.message;dt===void 0&&(dt=B.INTERNAL,I="Unknown error status: "+ht+" with message "+z.message),T=!0,V.r_(new Z(dt,I)),p.close()}else X(te,`RPC '${t}' stream ${s} received:`,U),V.i_(U)}}),N(l,hd.STAT_EVENT,L=>{L.stat===fa.PROXY?X(te,`RPC '${t}' stream ${s} detected buffering proxy`):L.stat===fa.NOPROXY&&X(te,`RPC '${t}' stream ${s} detected no buffering proxy`)}),setTimeout(()=>{V.n_()},0),V}}function zo(){return typeof document<"u"?document:null}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function so(e){return new vT(e,!0)}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ip{constructor(t,n,r=1e3,s=1.5,i=6e4){this.bi=t,this.timerId=n,this.u_=r,this.c_=s,this.l_=i,this.h_=0,this.P_=null,this.T_=Date.now(),this.reset()}reset(){this.h_=0}I_(){this.h_=this.l_}E_(t){this.cancel();const n=Math.floor(this.h_+this.d_()),r=Math.max(0,Date.now()-this.T_),s=Math.max(0,n-r);s>0&&X("ExponentialBackoff",`Backing off for ${s} ms (base delay: ${this.h_} ms, delay with jitter: ${n} ms, last attempt: ${r} ms ago)`),this.P_=this.bi.enqueueAfterDelay(this.timerId,s,()=>(this.T_=Date.now(),t())),this.h_*=this.c_,this.h_<this.u_&&(this.h_=this.u_),this.h_>this.l_&&(this.h_=this.l_)}A_(){this.P_!==null&&(this.P_.skipDelay(),this.P_=null)}cancel(){this.P_!==null&&(this.P_.cancel(),this.P_=null)}d_(){return(Math.random()-.5)*this.h_}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const uh="PersistentStream";class cw{constructor(t,n,r,s,i,a,l,c){this.bi=t,this.R_=r,this.V_=s,this.connection=i,this.authCredentialsProvider=a,this.appCheckCredentialsProvider=l,this.listener=c,this.state=0,this.m_=0,this.f_=null,this.g_=null,this.stream=null,this.p_=0,this.y_=new ip(t,n)}w_(){return this.state===1||this.state===5||this.b_()}b_(){return this.state===2||this.state===3}start(){this.p_=0,this.state!==4?this.auth():this.S_()}async stop(){this.w_()&&await this.close(0)}D_(){this.state=0,this.y_.reset()}v_(){this.b_()&&this.f_===null&&(this.f_=this.bi.enqueueAfterDelay(this.R_,6e4,()=>this.C_()))}F_(t){this.M_(),this.stream.send(t)}async C_(){if(this.b_())return this.close(0)}M_(){this.f_&&(this.f_.cancel(),this.f_=null)}x_(){this.g_&&(this.g_.cancel(),this.g_=null)}async close(t,n){this.M_(),this.x_(),this.y_.cancel(),this.m_++,t!==4?this.y_.reset():n&&n.code===B.RESOURCE_EXHAUSTED?(en(n.toString()),en("Using maximum backoff delay to prevent overloading the backend."),this.y_.I_()):n&&n.code===B.UNAUTHENTICATED&&this.state!==3&&(this.authCredentialsProvider.invalidateToken(),this.appCheckCredentialsProvider.invalidateToken()),this.stream!==null&&(this.O_(),this.stream.close(),this.stream=null),this.state=t,await this.listener.Zo(n)}O_(){}auth(){this.state=1;const t=this.N_(this.m_),n=this.m_;Promise.all([this.authCredentialsProvider.getToken(),this.appCheckCredentialsProvider.getToken()]).then(([r,s])=>{this.m_===n&&this.B_(r,s)},r=>{t(()=>{const s=new Z(B.UNKNOWN,"Fetching auth token failed: "+r.message);return this.L_(s)})})}B_(t,n){const r=this.N_(this.m_);this.stream=this.k_(t,n),this.stream.jo(()=>{r(()=>this.listener.jo())}),this.stream.Jo(()=>{r(()=>(this.state=2,this.g_=this.bi.enqueueAfterDelay(this.V_,1e4,()=>(this.b_()&&(this.state=3),Promise.resolve())),this.listener.Jo()))}),this.stream.Zo(s=>{r(()=>this.L_(s))}),this.stream.onMessage(s=>{r(()=>++this.p_==1?this.q_(s):this.onNext(s))})}S_(){this.state=5,this.y_.E_(async()=>{this.state=0,this.start()})}L_(t){return X(uh,`close with error: ${t}`),this.stream=null,this.close(4,t)}N_(t){return n=>{this.bi.enqueueAndForget(()=>this.m_===t?n():(X(uh,"stream callback skipped by getCloseGuardedDispatcher."),Promise.resolve()))}}}class hw extends cw{constructor(t,n,r,s,i,a){super(t,"listen_stream_connection_backoff","listen_stream_idle","health_check_timeout",n,r,s,a),this.serializer=i}k_(t,n){return this.connection.a_("Listen",t,n)}q_(t){return this.onNext(t)}onNext(t){this.y_.reset();const n=TT(this.serializer,t),r=function(i){if(!("targetChange"in i))return it.min();const a=i.targetChange;return a.targetIds&&a.targetIds.length?it.min():a.readTime?fr(a.readTime):it.min()}(t);return this.listener.Q_(n,r)}U_(t){const n={};n.database=eh(this.serializer),n.addTarget=function(i,a){let l;const c=a.target;if(l=_a(c)?{documents:wT(i,c)}:{query:IT(i,c).gt},l.targetId=a.targetId,a.resumeToken.approximateByteSize()>0){l.resumeToken=Gd(i,a.resumeToken);const f=wa(i,a.expectedCount);f!==null&&(l.expectedCount=f)}else if(a.snapshotVersion.compareTo(it.min())>0){l.readTime=Ia(i,a.snapshotVersion.toTimestamp());const f=wa(i,a.expectedCount);f!==null&&(l.expectedCount=f)}return l}(this.serializer,t);const r=RT(this.serializer,t);r&&(n.labels=r),this.F_(n)}K_(t){const n={};n.database=eh(this.serializer),n.removeTarget=t,this.F_(n)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fw{}class dw extends fw{constructor(t,n,r,s){super(),this.authCredentials=t,this.appCheckCredentials=n,this.connection=r,this.serializer=s,this.J_=!1}Y_(){if(this.J_)throw new Z(B.FAILED_PRECONDITION,"The client has already been terminated.")}Qo(t,n,r,s){return this.Y_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([i,a])=>this.connection.Qo(t,Aa(n,r),s,i,a)).catch(i=>{throw i.name==="FirebaseError"?(i.code===B.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),i):new Z(B.UNKNOWN,i.toString())})}Wo(t,n,r,s,i){return this.Y_(),Promise.all([this.authCredentials.getToken(),this.appCheckCredentials.getToken()]).then(([a,l])=>this.connection.Wo(t,Aa(n,r),s,a,l,i)).catch(a=>{throw a.name==="FirebaseError"?(a.code===B.UNAUTHENTICATED&&(this.authCredentials.invalidateToken(),this.appCheckCredentials.invalidateToken()),a):new Z(B.UNKNOWN,a.toString())})}terminate(){this.J_=!0,this.connection.terminate()}}class pw{constructor(t,n){this.asyncQueue=t,this.onlineStateHandler=n,this.state="Unknown",this.Z_=0,this.X_=null,this.ea=!0}ta(){this.Z_===0&&(this.na("Unknown"),this.X_=this.asyncQueue.enqueueAfterDelay("online_state_timeout",1e4,()=>(this.X_=null,this.ra("Backend didn't respond within 10 seconds."),this.na("Offline"),Promise.resolve())))}ia(t){this.state==="Online"?this.na("Unknown"):(this.Z_++,this.Z_>=1&&(this.sa(),this.ra(`Connection failed 1 times. Most recent error: ${t.toString()}`),this.na("Offline")))}set(t){this.sa(),this.Z_=0,t==="Online"&&(this.ea=!1),this.na(t)}na(t){t!==this.state&&(this.state=t,this.onlineStateHandler(t))}ra(t){const n=`Could not reach Cloud Firestore backend. ${t}
This typically indicates that your device does not have a healthy Internet connection at the moment. The client will operate in offline mode until it is able to successfully connect to the backend.`;this.ea?(en(n),this.ea=!1):X("OnlineStateTracker",n)}sa(){this.X_!==null&&(this.X_.cancel(),this.X_=null)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Ir="RemoteStore";class gw{constructor(t,n,r,s,i){this.localStore=t,this.datastore=n,this.asyncQueue=r,this.remoteSyncer={},this.oa=[],this._a=new Map,this.aa=new Set,this.ua=[],this.ca=i,this.ca.vo(a=>{r.enqueueAndForget(async()=>{xs(this)&&(X(Ir,"Restarting streams for network reachability change."),await async function(c){const f=yt(c);f.aa.add(4),await Ds(f),f.la.set("Unknown"),f.aa.delete(4),await io(f)}(this))})}),this.la=new pw(r,s)}}async function io(e){if(xs(e))for(const t of e.ua)await t(!0)}async function Ds(e){for(const t of e.ua)await t(!1)}function op(e,t){const n=yt(e);n._a.has(t.targetId)||(n._a.set(t.targetId,t),vl(n)?yl(n):Vr(n).b_()&&_l(n,t))}function ml(e,t){const n=yt(e),r=Vr(n);n._a.delete(t),r.b_()&&ap(n,t),n._a.size===0&&(r.b_()?r.v_():xs(n)&&n.la.set("Unknown"))}function _l(e,t){if(e.ha.Ke(t.targetId),t.resumeToken.approximateByteSize()>0||t.snapshotVersion.compareTo(it.min())>0){const n=e.remoteSyncer.getRemoteKeysForTarget(t.targetId).size;t=t.withExpectedCount(n)}Vr(e).U_(t)}function ap(e,t){e.ha.Ke(t),Vr(e).K_(t)}function yl(e){e.ha=new gT({getRemoteKeysForTarget:t=>e.remoteSyncer.getRemoteKeysForTarget(t),Rt:t=>e._a.get(t)||null,Pt:()=>e.datastore.serializer.databaseId}),Vr(e).start(),e.la.ta()}function vl(e){return xs(e)&&!Vr(e).w_()&&e._a.size>0}function xs(e){return yt(e).aa.size===0}function lp(e){e.ha=void 0}async function mw(e){e.la.set("Online")}async function _w(e){e._a.forEach((t,n)=>{_l(e,t)})}async function yw(e,t){lp(e),vl(e)?(e.la.ia(t),yl(e)):e.la.set("Unknown")}async function vw(e,t,n){if(e.la.set("Online"),t instanceof Kd&&t.state===2&&t.cause)try{await async function(s,i){const a=i.cause;for(const l of i.targetIds)s._a.has(l)&&(await s.remoteSyncer.rejectListen(l,a),s._a.delete(l),s.ha.removeTarget(l))}(e,t)}catch(r){X(Ir,"Failed to remove targets %s: %s ",t.targetIds.join(","),r),await ch(e,r)}else if(t instanceof di?e.ha.Xe(t):t instanceof zd?e.ha.ot(t):e.ha.nt(t),!n.isEqual(it.min()))try{const r=await sp(e.localStore);n.compareTo(r)>=0&&await function(i,a){const l=i.ha.It(a);return l.targetChanges.forEach((c,f)=>{if(c.resumeToken.approximateByteSize()>0){const d=i._a.get(f);d&&i._a.set(f,d.withResumeToken(c.resumeToken,a))}}),l.targetMismatches.forEach((c,f)=>{const d=i._a.get(c);if(!d)return;i._a.set(c,d.withResumeToken(Qt.EMPTY_BYTE_STRING,d.snapshotVersion)),ap(i,c);const p=new mn(d.target,c,f,d.sequenceNumber);_l(i,p)}),i.remoteSyncer.applyRemoteEvent(l)}(e,n)}catch(r){X(Ir,"Failed to raise snapshot:",r),await ch(e,r)}}async function ch(e,t,n){if(!Cr(t))throw t;e.aa.add(1),await Ds(e),e.la.set("Offline"),n||(n=()=>sp(e.localStore)),e.asyncQueue.enqueueRetryable(async()=>{X(Ir,"Retrying IndexedDB access"),await n(),e.aa.delete(1),await io(e)})}async function hh(e,t){const n=yt(e);n.asyncQueue.verifyOperationInProgress(),X(Ir,"RemoteStore received new credentials");const r=xs(n);n.aa.add(3),await Ds(n),r&&n.la.set("Unknown"),await n.remoteSyncer.handleCredentialChange(t),n.aa.delete(3),await io(n)}async function Ew(e,t){const n=yt(e);t?(n.aa.delete(2),await io(n)):t||(n.aa.add(2),await Ds(n),n.la.set("Unknown"))}function Vr(e){return e.Pa||(e.Pa=function(n,r,s){const i=yt(n);return i.Y_(),new hw(r,i.connection,i.authCredentials,i.appCheckCredentials,i.serializer,s)}(e.datastore,e.asyncQueue,{jo:mw.bind(null,e),Jo:_w.bind(null,e),Zo:yw.bind(null,e),Q_:vw.bind(null,e)}),e.ua.push(async t=>{t?(e.Pa.D_(),vl(e)?yl(e):e.la.set("Unknown")):(await e.Pa.stop(),lp(e))})),e.Pa}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class El{constructor(t,n,r,s,i){this.asyncQueue=t,this.timerId=n,this.targetTimeMs=r,this.op=s,this.removalCallback=i,this.deferred=new jn,this.then=this.deferred.promise.then.bind(this.deferred.promise),this.deferred.promise.catch(a=>{})}get promise(){return this.deferred.promise}static createAndSchedule(t,n,r,s,i){const a=Date.now()+r,l=new El(t,n,a,s,i);return l.start(r),l}start(t){this.timerHandle=setTimeout(()=>this.handleDelayElapsed(),t)}skipDelay(){return this.handleDelayElapsed()}cancel(t){this.timerHandle!==null&&(this.clearTimeout(),this.deferred.reject(new Z(B.CANCELLED,"Operation cancelled"+(t?": "+t:""))))}handleDelayElapsed(){this.asyncQueue.enqueueAndForget(()=>this.timerHandle!==null?(this.clearTimeout(),this.op().then(t=>this.deferred.resolve(t))):Promise.resolve())}clearTimeout(){this.timerHandle!==null&&(this.removalCallback(this),clearTimeout(this.timerHandle),this.timerHandle=null)}}function up(e,t){if(en("AsyncQueue",`${t}: ${e}`),Cr(e))return new Z(B.UNAVAILABLE,`${t}: ${e}`);throw e}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class dr{static emptySet(t){return new dr(t.comparator)}constructor(t){this.comparator=t?(n,r)=>t(n,r)||rt.comparator(n.key,r.key):(n,r)=>rt.comparator(n.key,r.key),this.keyedMap=Yr(),this.sortedSet=new kt(this.comparator)}has(t){return this.keyedMap.get(t)!=null}get(t){return this.keyedMap.get(t)}first(){return this.sortedSet.minKey()}last(){return this.sortedSet.maxKey()}isEmpty(){return this.sortedSet.isEmpty()}indexOf(t){const n=this.keyedMap.get(t);return n?this.sortedSet.indexOf(n):-1}get size(){return this.sortedSet.size}forEach(t){this.sortedSet.inorderTraversal((n,r)=>(t(n),!1))}add(t){const n=this.delete(t.key);return n.copy(n.keyedMap.insert(t.key,t),n.sortedSet.insert(t,null))}delete(t){const n=this.get(t);return n?this.copy(this.keyedMap.remove(t),this.sortedSet.remove(n)):this}isEqual(t){if(!(t instanceof dr)||this.size!==t.size)return!1;const n=this.sortedSet.getIterator(),r=t.sortedSet.getIterator();for(;n.hasNext();){const s=n.getNext().key,i=r.getNext().key;if(!s.isEqual(i))return!1}return!0}toString(){const t=[];return this.forEach(n=>{t.push(n.toString())}),t.length===0?"DocumentSet ()":`DocumentSet (
  `+t.join(`  
`)+`
)`}copy(t,n){const r=new dr;return r.comparator=this.comparator,r.keyedMap=t,r.sortedSet=n,r}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class fh{constructor(){this.Ia=new kt(rt.comparator)}track(t){const n=t.doc.key,r=this.Ia.get(n);r?t.type!==0&&r.type===3?this.Ia=this.Ia.insert(n,t):t.type===3&&r.type!==1?this.Ia=this.Ia.insert(n,{type:r.type,doc:t.doc}):t.type===2&&r.type===2?this.Ia=this.Ia.insert(n,{type:2,doc:t.doc}):t.type===2&&r.type===0?this.Ia=this.Ia.insert(n,{type:0,doc:t.doc}):t.type===1&&r.type===0?this.Ia=this.Ia.remove(n):t.type===1&&r.type===2?this.Ia=this.Ia.insert(n,{type:1,doc:r.doc}):t.type===0&&r.type===1?this.Ia=this.Ia.insert(n,{type:2,doc:t.doc}):ot(63341,{Vt:t,Ea:r}):this.Ia=this.Ia.insert(n,t)}da(){const t=[];return this.Ia.inorderTraversal((n,r)=>{t.push(r)}),t}}class Ar{constructor(t,n,r,s,i,a,l,c,f){this.query=t,this.docs=n,this.oldDocs=r,this.docChanges=s,this.mutatedKeys=i,this.fromCache=a,this.syncStateChanged=l,this.excludesMetadataChanges=c,this.hasCachedResults=f}static fromInitialDocuments(t,n,r,s,i){const a=[];return n.forEach(l=>{a.push({type:0,doc:l})}),new Ar(t,n,dr.emptySet(n),a,r,s,!0,!1,i)}get hasPendingWrites(){return!this.mutatedKeys.isEmpty()}isEqual(t){if(!(this.fromCache===t.fromCache&&this.hasCachedResults===t.hasCachedResults&&this.syncStateChanged===t.syncStateChanged&&this.mutatedKeys.isEqual(t.mutatedKeys)&&Zi(this.query,t.query)&&this.docs.isEqual(t.docs)&&this.oldDocs.isEqual(t.oldDocs)))return!1;const n=this.docChanges,r=t.docChanges;if(n.length!==r.length)return!1;for(let s=0;s<n.length;s++)if(n[s].type!==r[s].type||!n[s].doc.isEqual(r[s].doc))return!1;return!0}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tw{constructor(){this.Aa=void 0,this.Ra=[]}Va(){return this.Ra.some(t=>t.ma())}}class ww{constructor(){this.queries=dh(),this.onlineState="Unknown",this.fa=new Set}terminate(){(function(n,r){const s=yt(n),i=s.queries;s.queries=dh(),i.forEach((a,l)=>{for(const c of l.Ra)c.onError(r)})})(this,new Z(B.ABORTED,"Firestore shutting down"))}}function dh(){return new Wn(e=>Od(e),Zi)}async function Iw(e,t){const n=yt(e);let r=3;const s=t.query;let i=n.queries.get(s);i?!i.Va()&&t.ma()&&(r=2):(i=new Tw,r=t.ma()?0:1);try{switch(r){case 0:i.Aa=await n.onListen(s,!0);break;case 1:i.Aa=await n.onListen(s,!1);break;case 2:await n.onFirstRemoteStoreListen(s)}}catch(a){const l=up(a,`Initialization of query '${rr(t.query)}' failed`);return void t.onError(l)}n.queries.set(s,i),i.Ra.push(t),t.ga(n.onlineState),i.Aa&&t.pa(i.Aa)&&Tl(n)}async function Aw(e,t){const n=yt(e),r=t.query;let s=3;const i=n.queries.get(r);if(i){const a=i.Ra.indexOf(t);a>=0&&(i.Ra.splice(a,1),i.Ra.length===0?s=t.ma()?0:1:!i.Va()&&t.ma()&&(s=2))}switch(s){case 0:return n.queries.delete(r),n.onUnlisten(r,!0);case 1:return n.queries.delete(r),n.onUnlisten(r,!1);case 2:return n.onLastRemoteStoreUnlisten(r);default:return}}function Rw(e,t){const n=yt(e);let r=!1;for(const s of t){const i=s.query,a=n.queries.get(i);if(a){for(const l of a.Ra)l.pa(s)&&(r=!0);a.Aa=s}}r&&Tl(n)}function bw(e,t,n){const r=yt(e),s=r.queries.get(t);if(s)for(const i of s.Ra)i.onError(n);r.queries.delete(t)}function Tl(e){e.fa.forEach(t=>{t.next()})}var Sa,ph;(ph=Sa||(Sa={})).ya="default",ph.Cache="cache";class Sw{constructor(t,n,r){this.query=t,this.wa=n,this.ba=!1,this.Sa=null,this.onlineState="Unknown",this.options=r||{}}pa(t){if(!this.options.includeMetadataChanges){const r=[];for(const s of t.docChanges)s.type!==3&&r.push(s);t=new Ar(t.query,t.docs,t.oldDocs,r,t.mutatedKeys,t.fromCache,t.syncStateChanged,!0,t.hasCachedResults)}let n=!1;return this.ba?this.Da(t)&&(this.wa.next(t),n=!0):this.va(t,this.onlineState)&&(this.Ca(t),n=!0),this.Sa=t,n}onError(t){this.wa.error(t)}ga(t){this.onlineState=t;let n=!1;return this.Sa&&!this.ba&&this.va(this.Sa,t)&&(this.Ca(this.Sa),n=!0),n}va(t,n){if(!t.fromCache||!this.ma())return!0;const r=n!=="Offline";return(!this.options.Fa||!r)&&(!t.docs.isEmpty()||t.hasCachedResults||n==="Offline")}Da(t){if(t.docChanges.length>0)return!0;const n=this.Sa&&this.Sa.hasPendingWrites!==t.hasPendingWrites;return!(!t.syncStateChanged&&!n)&&this.options.includeMetadataChanges===!0}Ca(t){t=Ar.fromInitialDocuments(t.query,t.docs,t.mutatedKeys,t.fromCache,t.hasCachedResults),this.ba=!0,this.wa.next(t)}ma(){return this.options.source!==Sa.Cache}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class cp{constructor(t){this.key=t}}class hp{constructor(t){this.key=t}}class Cw{constructor(t,n){this.query=t,this.qa=n,this.Qa=null,this.hasCachedResults=!1,this.current=!1,this.$a=vt(),this.mutatedKeys=vt(),this.Ua=Md(t),this.Ka=new dr(this.Ua)}get Wa(){return this.qa}Ga(t,n){const r=n?n.za:new fh,s=n?n.Ka:this.Ka;let i=n?n.mutatedKeys:this.mutatedKeys,a=s,l=!1;const c=this.query.limitType==="F"&&s.size===this.query.limit?s.last():null,f=this.query.limitType==="L"&&s.size===this.query.limit?s.first():null;if(t.inorderTraversal((d,p)=>{const m=s.get(d),T=to(this.query,p)?p:null,V=!!m&&this.mutatedKeys.has(m.key),N=!!T&&(T.hasLocalMutations||this.mutatedKeys.has(T.key)&&T.hasCommittedMutations);let L=!1;m&&T?m.data.isEqual(T.data)?V!==N&&(r.track({type:3,doc:T}),L=!0):this.ja(m,T)||(r.track({type:2,doc:T}),L=!0,(c&&this.Ua(T,c)>0||f&&this.Ua(T,f)<0)&&(l=!0)):!m&&T?(r.track({type:0,doc:T}),L=!0):m&&!T&&(r.track({type:1,doc:m}),L=!0,(c||f)&&(l=!0)),L&&(T?(a=a.add(T),i=N?i.add(d):i.delete(d)):(a=a.delete(d),i=i.delete(d)))}),this.query.limit!==null)for(;a.size>this.query.limit;){const d=this.query.limitType==="F"?a.last():a.first();a=a.delete(d.key),i=i.delete(d.key),r.track({type:1,doc:d})}return{Ka:a,za:r,ys:l,mutatedKeys:i}}ja(t,n){return t.hasLocalMutations&&n.hasCommittedMutations&&!n.hasLocalMutations}applyChanges(t,n,r,s){const i=this.Ka;this.Ka=t.Ka,this.mutatedKeys=t.mutatedKeys;const a=t.za.da();a.sort((d,p)=>function(T,V){const N=L=>{switch(L){case 0:return 1;case 2:case 3:return 2;case 1:return 0;default:return ot(20277,{Vt:L})}};return N(T)-N(V)}(d.type,p.type)||this.Ua(d.doc,p.doc)),this.Ha(r),s=s!=null&&s;const l=n&&!s?this.Ja():[],c=this.$a.size===0&&this.current&&!s?1:0,f=c!==this.Qa;return this.Qa=c,a.length!==0||f?{snapshot:new Ar(this.query,t.Ka,i,a,t.mutatedKeys,c===0,f,!1,!!r&&r.resumeToken.approximateByteSize()>0),Ya:l}:{Ya:l}}ga(t){return this.current&&t==="Offline"?(this.current=!1,this.applyChanges({Ka:this.Ka,za:new fh,mutatedKeys:this.mutatedKeys,ys:!1},!1)):{Ya:[]}}Za(t){return!this.qa.has(t)&&!!this.Ka.has(t)&&!this.Ka.get(t).hasLocalMutations}Ha(t){t&&(t.addedDocuments.forEach(n=>this.qa=this.qa.add(n)),t.modifiedDocuments.forEach(n=>{}),t.removedDocuments.forEach(n=>this.qa=this.qa.delete(n)),this.current=t.current)}Ja(){if(!this.current)return[];const t=this.$a;this.$a=vt(),this.Ka.forEach(r=>{this.Za(r.key)&&(this.$a=this.$a.add(r.key))});const n=[];return t.forEach(r=>{this.$a.has(r)||n.push(new hp(r))}),this.$a.forEach(r=>{t.has(r)||n.push(new cp(r))}),n}Xa(t){this.qa=t.Ns,this.$a=vt();const n=this.Ga(t.documents);return this.applyChanges(n,!0)}eu(){return Ar.fromInitialDocuments(this.query,this.Ka,this.mutatedKeys,this.Qa===0,this.hasCachedResults)}}const wl="SyncEngine";class Pw{constructor(t,n,r){this.query=t,this.targetId=n,this.view=r}}class Vw{constructor(t){this.key=t,this.tu=!1}}class Dw{constructor(t,n,r,s,i,a){this.localStore=t,this.remoteStore=n,this.eventManager=r,this.sharedClientState=s,this.currentUser=i,this.maxConcurrentLimboResolutions=a,this.nu={},this.ru=new Wn(l=>Od(l),Zi),this.iu=new Map,this.su=new Set,this.ou=new kt(rt.comparator),this._u=new Map,this.au=new fl,this.uu={},this.cu=new Map,this.lu=wr.ir(),this.onlineState="Unknown",this.hu=void 0}get isPrimaryClient(){return this.hu===!0}}async function xw(e,t,n=!0){const r=mp(e);let s;const i=r.ru.get(t);return i?(r.sharedClientState.addLocalQueryTarget(i.targetId),s=i.view.eu()):s=await fp(r,t,n,!0),s}async function Nw(e,t){const n=mp(e);await fp(n,t,!0,!1)}async function fp(e,t,n,r){const s=await nw(e.localStore,He(t)),i=s.targetId,a=e.sharedClientState.addLocalQueryTarget(i,n);let l;return r&&(l=await Ow(e,t,i,a==="current",s.resumeToken)),e.isPrimaryClient&&n&&op(e.remoteStore,s),l}async function Ow(e,t,n,r,s){e.Pu=(p,m,T)=>async function(N,L,G,U){let H=L.view.Ga(G);H.ys&&(H=await ih(N.localStore,L.query,!1).then(({documents:I})=>L.view.Ga(I,H)));const z=U&&U.targetChanges.get(L.targetId),ht=U&&U.targetMismatches.get(L.targetId)!=null,dt=L.view.applyChanges(H,N.isPrimaryClient,z,ht);return mh(N,L.targetId,dt.Ya),dt.snapshot}(e,p,m,T);const i=await ih(e.localStore,t,!0),a=new Cw(t,i.Ns),l=a.Ga(i.documents),c=Vs.createSynthesizedTargetChangeForCurrentChange(n,r&&e.onlineState!=="Offline",s),f=a.applyChanges(l,e.isPrimaryClient,c);mh(e,n,f.Ya);const d=new Pw(t,n,a);return e.ru.set(t,d),e.iu.has(n)?e.iu.get(n).push(t):e.iu.set(n,[t]),f.snapshot}async function Mw(e,t,n){const r=yt(e),s=r.ru.get(t),i=r.iu.get(s.targetId);if(i.length>1)return r.iu.set(s.targetId,i.filter(a=>!Zi(a,t))),void r.ru.delete(t);r.isPrimaryClient?(r.sharedClientState.removeLocalQueryTarget(s.targetId),r.sharedClientState.isActiveQueryTarget(s.targetId)||await Ra(r.localStore,s.targetId,!1).then(()=>{r.sharedClientState.clearQueryState(s.targetId),n&&ml(r.remoteStore,s.targetId),Ca(r,s.targetId)}).catch(Qi)):(Ca(r,s.targetId),await Ra(r.localStore,s.targetId,!0))}async function kw(e,t){const n=yt(e),r=n.ru.get(t),s=n.iu.get(r.targetId);n.isPrimaryClient&&s.length===1&&(n.sharedClientState.removeLocalQueryTarget(r.targetId),ml(n.remoteStore,r.targetId))}async function dp(e,t){const n=yt(e);try{const r=await tw(n.localStore,t);t.targetChanges.forEach((s,i)=>{const a=n._u.get(i);a&&(Nt(s.addedDocuments.size+s.modifiedDocuments.size+s.removedDocuments.size<=1,22616),s.addedDocuments.size>0?a.tu=!0:s.modifiedDocuments.size>0?Nt(a.tu,14607):s.removedDocuments.size>0&&(Nt(a.tu,42227),a.tu=!1))}),await gp(n,r,t)}catch(r){await Qi(r)}}function gh(e,t,n){const r=yt(e);if(r.isPrimaryClient&&n===0||!r.isPrimaryClient&&n===1){const s=[];r.ru.forEach((i,a)=>{const l=a.view.ga(t);l.snapshot&&s.push(l.snapshot)}),function(a,l){const c=yt(a);c.onlineState=l;let f=!1;c.queries.forEach((d,p)=>{for(const m of p.Ra)m.ga(l)&&(f=!0)}),f&&Tl(c)}(r.eventManager,t),s.length&&r.nu.Q_(s),r.onlineState=t,r.isPrimaryClient&&r.sharedClientState.setOnlineState(t)}}async function Lw(e,t,n){const r=yt(e);r.sharedClientState.updateQueryState(t,"rejected",n);const s=r._u.get(t),i=s&&s.key;if(i){let a=new kt(rt.comparator);a=a.insert(i,se.newNoDocument(i,it.min()));const l=vt().add(i),c=new ro(it.min(),new Map,new kt(ct),a,l);await dp(r,c),r.ou=r.ou.remove(i),r._u.delete(t),Il(r)}else await Ra(r.localStore,t,!1).then(()=>Ca(r,t,n)).catch(Qi)}function Ca(e,t,n=null){e.sharedClientState.removeLocalQueryTarget(t);for(const r of e.iu.get(t))e.ru.delete(r),n&&e.nu.Tu(r,n);e.iu.delete(t),e.isPrimaryClient&&e.au.Ur(t).forEach(r=>{e.au.containsKey(r)||pp(e,r)})}function pp(e,t){e.su.delete(t.path.canonicalString());const n=e.ou.get(t);n!==null&&(ml(e.remoteStore,n),e.ou=e.ou.remove(t),e._u.delete(n),Il(e))}function mh(e,t,n){for(const r of n)r instanceof cp?(e.au.addReference(r.key,t),Fw(e,r)):r instanceof hp?(X(wl,"Document no longer in limbo: "+r.key),e.au.removeReference(r.key,t),e.au.containsKey(r.key)||pp(e,r.key)):ot(19791,{Iu:r})}function Fw(e,t){const n=t.key,r=n.path.canonicalString();e.ou.get(n)||e.su.has(r)||(X(wl,"New document in limbo: "+n),e.su.add(r),Il(e))}function Il(e){for(;e.su.size>0&&e.ou.size<e.maxConcurrentLimboResolutions;){const t=e.su.values().next().value;e.su.delete(t);const n=new rt(xt.fromString(t)),r=e.lu.next();e._u.set(r,new Vw(n)),e.ou=e.ou.insert(n,r),op(e.remoteStore,new mn(He(xd(n.path)),r,"TargetPurposeLimboResolution",Yi.le))}}async function gp(e,t,n){const r=yt(e),s=[],i=[],a=[];r.ru.isEmpty()||(r.ru.forEach((l,c)=>{a.push(r.Pu(c,t,n).then(f=>{var d;if((f||n)&&r.isPrimaryClient){const p=f?!f.fromCache:(d=n==null?void 0:n.targetChanges.get(c.targetId))===null||d===void 0?void 0:d.current;r.sharedClientState.updateQueryState(c.targetId,p?"current":"not-current")}if(f){s.push(f);const p=pl.Ps(c.targetId,f);i.push(p)}}))}),await Promise.all(a),r.nu.Q_(s),await async function(c,f){const d=yt(c);try{await d.persistence.runTransaction("notifyLocalViewChanges","readwrite",p=>M.forEach(f,m=>M.forEach(m.ls,T=>d.persistence.referenceDelegate.addReference(p,m.targetId,T)).next(()=>M.forEach(m.hs,T=>d.persistence.referenceDelegate.removeReference(p,m.targetId,T)))))}catch(p){if(!Cr(p))throw p;X(gl,"Failed to update sequence numbers: "+p)}for(const p of f){const m=p.targetId;if(!p.fromCache){const T=d.Ss.get(m),V=T.snapshotVersion,N=T.withLastLimboFreeSnapshotVersion(V);d.Ss=d.Ss.insert(m,N)}}}(r.localStore,i))}async function Uw(e,t){const n=yt(e);if(!n.currentUser.isEqual(t)){X(wl,"User change. New user:",t.toKey());const r=await rp(n.localStore,t);n.currentUser=t,function(i,a){i.cu.forEach(l=>{l.forEach(c=>{c.reject(new Z(B.CANCELLED,a))})}),i.cu.clear()}(n,"'waitForPendingWrites' promise is rejected due to a user change."),n.sharedClientState.handleUserChange(t,r.removedBatchIds,r.addedBatchIds),await gp(n,r.Ms)}}function Bw(e,t){const n=yt(e),r=n._u.get(t);if(r&&r.tu)return vt().add(r.key);{let s=vt();const i=n.iu.get(t);if(!i)return s;for(const a of i){const l=n.ru.get(a);s=s.unionWith(l.view.Wa)}return s}}function mp(e){const t=yt(e);return t.remoteStore.remoteSyncer.applyRemoteEvent=dp.bind(null,t),t.remoteStore.remoteSyncer.getRemoteKeysForTarget=Bw.bind(null,t),t.remoteStore.remoteSyncer.rejectListen=Lw.bind(null,t),t.nu.Q_=Rw.bind(null,t.eventManager),t.nu.Tu=bw.bind(null,t.eventManager),t}class Mi{constructor(){this.kind="memory",this.synchronizeTabs=!1}async initialize(t){this.serializer=so(t.databaseInfo.databaseId),this.sharedClientState=this.Au(t),this.persistence=this.Ru(t),await this.persistence.start(),this.localStore=this.Vu(t),this.gcScheduler=this.mu(t,this.localStore),this.indexBackfillerScheduler=this.fu(t,this.localStore)}mu(t,n){return null}fu(t,n){return null}Vu(t){return ZT(this.persistence,new YT,t.initialUser,this.serializer)}Ru(t){return new np(dl.Ei,this.serializer)}Au(t){return new sw}async terminate(){var t,n;(t=this.gcScheduler)===null||t===void 0||t.stop(),(n=this.indexBackfillerScheduler)===null||n===void 0||n.stop(),this.sharedClientState.shutdown(),await this.persistence.shutdown()}}Mi.provider={build:()=>new Mi};class $w extends Mi{constructor(t){super(),this.cacheSizeBytes=t}mu(t,n){Nt(this.persistence.referenceDelegate instanceof Oi,46915);const r=this.persistence.referenceDelegate.garbageCollector;return new MT(r,t.asyncQueue,n)}Ru(t){const n=this.cacheSizeBytes!==void 0?ge.withCacheSize(this.cacheSizeBytes):ge.DEFAULT;return new np(r=>Oi.Ei(r,n),this.serializer)}}class Pa{async initialize(t,n){this.localStore||(this.localStore=t.localStore,this.sharedClientState=t.sharedClientState,this.datastore=this.createDatastore(n),this.remoteStore=this.createRemoteStore(n),this.eventManager=this.createEventManager(n),this.syncEngine=this.createSyncEngine(n,!t.synchronizeTabs),this.sharedClientState.onlineStateHandler=r=>gh(this.syncEngine,r,1),this.remoteStore.remoteSyncer.handleCredentialChange=Uw.bind(null,this.syncEngine),await Ew(this.remoteStore,this.syncEngine.isPrimaryClient))}createEventManager(t){return function(){return new ww}()}createDatastore(t){const n=so(t.databaseInfo.databaseId),r=function(i){return new uw(i)}(t.databaseInfo);return function(i,a,l,c){return new dw(i,a,l,c)}(t.authCredentials,t.appCheckCredentials,r,n)}createRemoteStore(t){return function(r,s,i,a,l){return new gw(r,s,i,a,l)}(this.localStore,this.datastore,t.asyncQueue,n=>gh(this.syncEngine,n,0),function(){return lh.C()?new lh:new iw}())}createSyncEngine(t,n){return function(s,i,a,l,c,f,d){const p=new Dw(s,i,a,l,c,f);return d&&(p.hu=!0),p}(this.localStore,this.remoteStore,this.eventManager,this.sharedClientState,t.initialUser,t.maxConcurrentLimboResolutions,n)}async terminate(){var t,n;await async function(s){const i=yt(s);X(Ir,"RemoteStore shutting down."),i.aa.add(5),await Ds(i),i.ca.shutdown(),i.la.set("Unknown")}(this.remoteStore),(t=this.datastore)===null||t===void 0||t.terminate(),(n=this.eventManager)===null||n===void 0||n.terminate()}}Pa.provider={build:()=>new Pa};/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 *//**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class jw{constructor(t){this.observer=t,this.muted=!1}next(t){this.muted||this.observer.next&&this.pu(this.observer.next,t)}error(t){this.muted||(this.observer.error?this.pu(this.observer.error,t):en("Uncaught Error in snapshot listener:",t.toString()))}yu(){this.muted=!0}pu(t,n){setTimeout(()=>{this.muted||t(n)},0)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Sn="FirestoreClient";class qw{constructor(t,n,r,s,i){this.authCredentials=t,this.appCheckCredentials=n,this.asyncQueue=r,this.databaseInfo=s,this.user=ee.UNAUTHENTICATED,this.clientId=TE.newId(),this.authCredentialListener=()=>Promise.resolve(),this.appCheckCredentialListener=()=>Promise.resolve(),this._uninitializedComponentsProvider=i,this.authCredentials.start(r,async a=>{X(Sn,"Received user=",a.uid),await this.authCredentialListener(a),this.user=a}),this.appCheckCredentials.start(r,a=>(X(Sn,"Received new app check token=",a),this.appCheckCredentialListener(a,this.user)))}get configuration(){return{asyncQueue:this.asyncQueue,databaseInfo:this.databaseInfo,clientId:this.clientId,authCredentials:this.authCredentials,appCheckCredentials:this.appCheckCredentials,initialUser:this.user,maxConcurrentLimboResolutions:100}}setCredentialChangeListener(t){this.authCredentialListener=t}setAppCheckTokenChangeListener(t){this.appCheckCredentialListener=t}terminate(){this.asyncQueue.enterRestrictedMode();const t=new jn;return this.asyncQueue.enqueueAndForgetEvenWhileRestricted(async()=>{try{this._onlineComponents&&await this._onlineComponents.terminate(),this._offlineComponents&&await this._offlineComponents.terminate(),this.authCredentials.shutdown(),this.appCheckCredentials.shutdown(),t.resolve()}catch(n){const r=up(n,"Failed to shutdown persistence");t.reject(r)}}),t.promise}}async function Ko(e,t){e.asyncQueue.verifyOperationInProgress(),X(Sn,"Initializing OfflineComponentProvider");const n=e.configuration;await t.initialize(n);let r=n.initialUser;e.setCredentialChangeListener(async s=>{r.isEqual(s)||(await rp(t.localStore,s),r=s)}),t.persistence.setDatabaseDeletedListener(()=>e.terminate()),e._offlineComponents=t}async function _h(e,t){e.asyncQueue.verifyOperationInProgress();const n=await Hw(e);X(Sn,"Initializing OnlineComponentProvider"),await t.initialize(n,e.configuration),e.setCredentialChangeListener(r=>hh(t.remoteStore,r)),e.setAppCheckTokenChangeListener((r,s)=>hh(t.remoteStore,s)),e._onlineComponents=t}async function Hw(e){if(!e._offlineComponents)if(e._uninitializedComponentsProvider){X(Sn,"Using user provided OfflineComponentProvider");try{await Ko(e,e._uninitializedComponentsProvider._offline)}catch(t){const n=t;if(!function(s){return s.name==="FirebaseError"?s.code===B.FAILED_PRECONDITION||s.code===B.UNIMPLEMENTED:!(typeof DOMException<"u"&&s instanceof DOMException)||s.code===22||s.code===20||s.code===11}(n))throw n;yr("Error using user provided cache. Falling back to memory cache: "+n),await Ko(e,new Mi)}}else X(Sn,"Using default OfflineComponentProvider"),await Ko(e,new $w(void 0));return e._offlineComponents}async function zw(e){return e._onlineComponents||(e._uninitializedComponentsProvider?(X(Sn,"Using user provided OnlineComponentProvider"),await _h(e,e._uninitializedComponentsProvider._online)):(X(Sn,"Using default OnlineComponentProvider"),await _h(e,new Pa))),e._onlineComponents}async function Kw(e){const t=await zw(e),n=t.eventManager;return n.onListen=xw.bind(null,t.syncEngine),n.onUnlisten=Mw.bind(null,t.syncEngine),n.onFirstRemoteStoreListen=Nw.bind(null,t.syncEngine),n.onLastRemoteStoreUnlisten=kw.bind(null,t.syncEngine),n}function Gw(e,t,n={}){const r=new jn;return e.asyncQueue.enqueueAndForget(async()=>function(i,a,l,c,f){const d=new jw({next:m=>{d.yu(),a.enqueueAndForget(()=>Aw(i,p)),m.fromCache&&c.source==="server"?f.reject(new Z(B.UNAVAILABLE,'Failed to get documents from server. (However, these documents may exist in the local cache. Run again without setting source to "server" to retrieve the cached documents.)')):f.resolve(m)},error:m=>f.reject(m)}),p=new Sw(l,d,{includeMetadataChanges:!0,Fa:!0});return Iw(i,p)}(await Kw(e),e.asyncQueue,t,n,r)),r.promise}/**
 * @license
 * Copyright 2023 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function _p(e){const t={};return e.timeoutSeconds!==void 0&&(t.timeoutSeconds=e.timeoutSeconds),t}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yh=new Map;function Ww(e,t,n,r){if(t===!0&&r===!0)throw new Z(B.INVALID_ARGUMENT,`${e} and ${n} cannot be used together.`)}function vh(e){if(rt.isDocumentKey(e))throw new Z(B.INVALID_ARGUMENT,`Invalid collection reference. Collection references must have an odd number of segments, but ${e} has ${e.length}.`)}function oo(e){if(e===void 0)return"undefined";if(e===null)return"null";if(typeof e=="string")return e.length>20&&(e=`${e.substring(0,20)}...`),JSON.stringify(e);if(typeof e=="number"||typeof e=="boolean")return""+e;if(typeof e=="object"){if(e instanceof Array)return"an array";{const t=function(r){return r.constructor?r.constructor.name:null}(e);return t?`a custom ${t} object`:"an object"}}return typeof e=="function"?"a function":ot(12329,{type:typeof e})}function Va(e,t){if("_delegate"in e&&(e=e._delegate),!(e instanceof t)){if(t.name===e.constructor.name)throw new Z(B.INVALID_ARGUMENT,"Type does not match the expected instance. Did you pass a reference from a different Firestore SDK?");{const n=oo(e);throw new Z(B.INVALID_ARGUMENT,`Expected type '${t.name}', but it was: ${n}`)}}return e}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const yp="firestore.googleapis.com",Eh=!0;class Th{constructor(t){var n,r;if(t.host===void 0){if(t.ssl!==void 0)throw new Z(B.INVALID_ARGUMENT,"Can't provide ssl option if host option is not set");this.host=yp,this.ssl=Eh}else this.host=t.host,this.ssl=(n=t.ssl)!==null&&n!==void 0?n:Eh;if(this.isUsingEmulator=t.emulatorOptions!==void 0,this.credentials=t.credentials,this.ignoreUndefinedProperties=!!t.ignoreUndefinedProperties,this.localCache=t.localCache,t.cacheSizeBytes===void 0)this.cacheSizeBytes=ep;else{if(t.cacheSizeBytes!==-1&&t.cacheSizeBytes<NT)throw new Z(B.INVALID_ARGUMENT,"cacheSizeBytes must be at least 1048576");this.cacheSizeBytes=t.cacheSizeBytes}Ww("experimentalForceLongPolling",t.experimentalForceLongPolling,"experimentalAutoDetectLongPolling",t.experimentalAutoDetectLongPolling),this.experimentalForceLongPolling=!!t.experimentalForceLongPolling,this.experimentalForceLongPolling?this.experimentalAutoDetectLongPolling=!1:t.experimentalAutoDetectLongPolling===void 0?this.experimentalAutoDetectLongPolling=!0:this.experimentalAutoDetectLongPolling=!!t.experimentalAutoDetectLongPolling,this.experimentalLongPollingOptions=_p((r=t.experimentalLongPollingOptions)!==null&&r!==void 0?r:{}),function(i){if(i.timeoutSeconds!==void 0){if(isNaN(i.timeoutSeconds))throw new Z(B.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (must not be NaN)`);if(i.timeoutSeconds<5)throw new Z(B.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (minimum allowed value is 5)`);if(i.timeoutSeconds>30)throw new Z(B.INVALID_ARGUMENT,`invalid long polling timeout: ${i.timeoutSeconds} (maximum allowed value is 30)`)}}(this.experimentalLongPollingOptions),this.useFetchStreams=!!t.useFetchStreams}isEqual(t){return this.host===t.host&&this.ssl===t.ssl&&this.credentials===t.credentials&&this.cacheSizeBytes===t.cacheSizeBytes&&this.experimentalForceLongPolling===t.experimentalForceLongPolling&&this.experimentalAutoDetectLongPolling===t.experimentalAutoDetectLongPolling&&function(r,s){return r.timeoutSeconds===s.timeoutSeconds}(this.experimentalLongPollingOptions,t.experimentalLongPollingOptions)&&this.ignoreUndefinedProperties===t.ignoreUndefinedProperties&&this.useFetchStreams===t.useFetchStreams}}class Al{constructor(t,n,r,s){this._authCredentials=t,this._appCheckCredentials=n,this._databaseId=r,this._app=s,this.type="firestore-lite",this._persistenceKey="(lite)",this._settings=new Th({}),this._settingsFrozen=!1,this._emulatorOptions={},this._terminateTask="notTerminated"}get app(){if(!this._app)throw new Z(B.FAILED_PRECONDITION,"Firestore was not initialized using the Firebase SDK. 'app' is not available");return this._app}get _initialized(){return this._settingsFrozen}get _terminated(){return this._terminateTask!=="notTerminated"}_setSettings(t){if(this._settingsFrozen)throw new Z(B.FAILED_PRECONDITION,"Firestore has already been started and its settings can no longer be changed. You can only modify settings before calling any other methods on a Firestore object.");this._settings=new Th(t),this._emulatorOptions=t.emulatorOptions||{},t.credentials!==void 0&&(this._authCredentials=function(r){if(!r)return new pE;switch(r.type){case"firstParty":return new yE(r.sessionIndex||"0",r.iamToken||null,r.authTokenFactory||null);case"provider":return r.client;default:throw new Z(B.INVALID_ARGUMENT,"makeAuthCredentialsProvider failed due to invalid credential type")}}(t.credentials))}_getSettings(){return this._settings}_getEmulatorOptions(){return this._emulatorOptions}_freezeSettings(){return this._settingsFrozen=!0,td("Firestore",this._settings.isUsingEmulator),this._settings}_delete(){return this._terminateTask==="notTerminated"&&(this._terminateTask=this._terminate()),this._terminateTask}async _restart(){this._terminateTask==="notTerminated"?await this._terminate():this._terminateTask="notTerminated"}toJSON(){return{app:this._app,databaseId:this._databaseId,settings:this._settings}}_terminate(){return function(n){const r=yh.get(n);r&&(X("ComponentProvider","Removing Datastore"),yh.delete(n),r.terminate())}(this),Promise.resolve()}}function Qw(e,t,n,r={}){var s;e=Va(e,Al);const i=el(t),a=e._getSettings(),l=Object.assign(Object.assign({},a),{emulatorOptions:e._getEmulatorOptions()}),c=`${t}:${n}`;a.host!==yp&&a.host!==c&&yr("Host has been set in both settings() and connectFirestoreEmulator(), emulator host will be used.");const f=Object.assign(Object.assign({},a),{host:c,ssl:i,emulatorOptions:r});if(!Ii(f,l)&&(e._setSettings(f),i&&(jy(`https://${c}`),td("Firestore",!0)),r.mockUserToken)){let d,p;if(typeof r.mockUserToken=="string")d=r.mockUserToken,p=ee.MOCK_USER;else{d=qy(r.mockUserToken,(s=e._app)===null||s===void 0?void 0:s.options.projectId);const m=r.mockUserToken.sub||r.mockUserToken.user_id;if(!m)throw new Z(B.INVALID_ARGUMENT,"mockUserToken must contain 'sub' or 'user_id' field!");p=new ee(m)}e._authCredentials=new gE(new gd(d,p))}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Dr{constructor(t,n,r){this.converter=n,this._query=r,this.type="query",this.firestore=t}withConverter(t){return new Dr(this.firestore,t,this._query)}}class rn{constructor(t,n,r){this.converter=n,this._key=r,this.type="document",this.firestore=t}get _path(){return this._key.path}get id(){return this._key.path.lastSegment()}get path(){return this._key.path.canonicalString()}get parent(){return new pr(this.firestore,this.converter,this._key.path.popLast())}withConverter(t){return new rn(this.firestore,t,this._key)}}class pr extends Dr{constructor(t,n,r){super(t,n,xd(r)),this._path=r,this.type="collection"}get id(){return this._query.path.lastSegment()}get path(){return this._query.path.canonicalString()}get parent(){const t=this._path.popLast();return t.isEmpty()?null:new rn(this.firestore,null,new rt(t))}withConverter(t){return new pr(this.firestore,t,this._path)}}function vp(e,t,...n){if(e=Ai(e),e instanceof Al){const r=xt.fromString(t,...n);return vh(r),new pr(e,null,r)}{if(!(e instanceof rn||e instanceof pr))throw new Z(B.INVALID_ARGUMENT,"Expected first argument to collection() to be a CollectionReference, a DocumentReference or FirebaseFirestore");const r=e._path.child(xt.fromString(t,...n));return vh(r),new pr(e.firestore,null,r)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const wh="AsyncQueue";class Ih{constructor(t=Promise.resolve()){this.Qu=[],this.$u=!1,this.Uu=[],this.Ku=null,this.Wu=!1,this.Gu=!1,this.zu=[],this.y_=new ip(this,"async_queue_retry"),this.ju=()=>{const r=zo();r&&X(wh,"Visibility state changed to "+r.visibilityState),this.y_.A_()},this.Hu=t;const n=zo();n&&typeof n.addEventListener=="function"&&n.addEventListener("visibilitychange",this.ju)}get isShuttingDown(){return this.$u}enqueueAndForget(t){this.enqueue(t)}enqueueAndForgetEvenWhileRestricted(t){this.Ju(),this.Yu(t)}enterRestrictedMode(t){if(!this.$u){this.$u=!0,this.Gu=t||!1;const n=zo();n&&typeof n.removeEventListener=="function"&&n.removeEventListener("visibilitychange",this.ju)}}enqueue(t){if(this.Ju(),this.$u)return new Promise(()=>{});const n=new jn;return this.Yu(()=>this.$u&&this.Gu?Promise.resolve():(t().then(n.resolve,n.reject),n.promise)).then(()=>n.promise)}enqueueRetryable(t){this.enqueueAndForget(()=>(this.Qu.push(t),this.Zu()))}async Zu(){if(this.Qu.length!==0){try{await this.Qu[0](),this.Qu.shift(),this.y_.reset()}catch(t){if(!Cr(t))throw t;X(wh,"Operation failed with retryable error: "+t)}this.Qu.length>0&&this.y_.E_(()=>this.Zu())}}Yu(t){const n=this.Hu.then(()=>(this.Wu=!0,t().catch(r=>{throw this.Ku=r,this.Wu=!1,en("INTERNAL UNHANDLED ERROR: ",Ah(r)),r}).then(r=>(this.Wu=!1,r))));return this.Hu=n,n}enqueueAfterDelay(t,n,r){this.Ju(),this.zu.indexOf(t)>-1&&(n=0);const s=El.createAndSchedule(this,t,n,r,i=>this.Xu(i));return this.Uu.push(s),s}Ju(){this.Ku&&ot(47125,{ec:Ah(this.Ku)})}verifyOperationInProgress(){}async tc(){let t;do t=this.Hu,await t;while(t!==this.Hu)}nc(t){for(const n of this.Uu)if(n.timerId===t)return!0;return!1}rc(t){return this.tc().then(()=>{this.Uu.sort((n,r)=>n.targetTimeMs-r.targetTimeMs);for(const n of this.Uu)if(n.skipDelay(),t!=="all"&&n.timerId===t)break;return this.tc()})}sc(t){this.zu.push(t)}Xu(t){const n=this.Uu.indexOf(t);this.Uu.splice(n,1)}}function Ah(e){let t=e.message||"";return e.stack&&(t=e.stack.includes(e.message)?e.stack:e.message+`
`+e.stack),t}class Ep extends Al{constructor(t,n,r,s){super(t,n,r,s),this.type="firestore",this._queue=new Ih,this._persistenceKey=(s==null?void 0:s.name)||"[DEFAULT]"}async _terminate(){if(this._firestoreClient){const t=this._firestoreClient.terminate();this._queue=new Ih(t),this._firestoreClient=void 0,await t}}}function Yw(e,t){const n=eE(),r=Ci,s=Yv(n,"firestore").getImmediate({identifier:r});if(!s._initialized){const i=By("firestore");i&&Qw(s,...i)}return s}function Xw(e){if(e._terminated)throw new Z(B.FAILED_PRECONDITION,"The client has already been terminated.");return e._firestoreClient||Jw(e),e._firestoreClient}function Jw(e){var t,n,r;const s=e._freezeSettings(),i=function(l,c,f,d){return new ME(l,c,f,d.host,d.ssl,d.experimentalForceLongPolling,d.experimentalAutoDetectLongPolling,_p(d.experimentalLongPollingOptions),d.useFetchStreams,d.isUsingEmulator)}(e._databaseId,((t=e._app)===null||t===void 0?void 0:t.options.appId)||"",e._persistenceKey,s);e._componentsProvider||!((n=s.localCache)===null||n===void 0)&&n._offlineComponentProvider&&(!((r=s.localCache)===null||r===void 0)&&r._onlineComponentProvider)&&(e._componentsProvider={_offline:s.localCache._offlineComponentProvider,_online:s.localCache._onlineComponentProvider}),e._firestoreClient=new qw(e._authCredentials,e._appCheckCredentials,e._queue,i,e._componentsProvider&&function(l){const c=l==null?void 0:l._online.build();return{_offline:l==null?void 0:l._offline.build(c),_online:c}}(e._componentsProvider))}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rr{constructor(t){this._byteString=t}static fromBase64String(t){try{return new Rr(Qt.fromBase64String(t))}catch(n){throw new Z(B.INVALID_ARGUMENT,"Failed to construct data from Base64 string: "+n)}}static fromUint8Array(t){return new Rr(Qt.fromUint8Array(t))}toBase64(){return this._byteString.toBase64()}toUint8Array(){return this._byteString.toUint8Array()}toString(){return"Bytes(base64: "+this.toBase64()+")"}isEqual(t){return this._byteString.isEqual(t._byteString)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Tp{constructor(...t){for(let n=0;n<t.length;++n)if(t[n].length===0)throw new Z(B.INVALID_ARGUMENT,"Invalid field name at argument $(i + 1). Field names must not be empty.");this._internalPath=new oe(t)}isEqual(t){return this._internalPath.isEqual(t._internalPath)}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class wp{constructor(t){this._methodName=t}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rl{constructor(t,n){if(!isFinite(t)||t<-90||t>90)throw new Z(B.INVALID_ARGUMENT,"Latitude must be a number between -90 and 90, but was: "+t);if(!isFinite(n)||n<-180||n>180)throw new Z(B.INVALID_ARGUMENT,"Longitude must be a number between -180 and 180, but was: "+n);this._lat=t,this._long=n}get latitude(){return this._lat}get longitude(){return this._long}isEqual(t){return this._lat===t._lat&&this._long===t._long}toJSON(){return{latitude:this._lat,longitude:this._long}}_compareTo(t){return ct(this._lat,t._lat)||ct(this._long,t._long)}}/**
 * @license
 * Copyright 2024 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class bl{constructor(t){this._values=(t||[]).map(n=>n)}toArray(){return this._values.map(t=>t)}isEqual(t){return function(r,s){if(r.length!==s.length)return!1;for(let i=0;i<r.length;++i)if(r[i]!==s[i])return!1;return!0}(this._values,t._values)}}/**
 * @license
 * Copyright 2017 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */const Zw=/^__.*__$/;function Ip(e){switch(e){case 0:case 2:case 1:return!0;case 3:case 4:return!1;default:throw ot(40011,{oc:e})}}class Sl{constructor(t,n,r,s,i,a){this.settings=t,this.databaseId=n,this.serializer=r,this.ignoreUndefinedProperties=s,i===void 0&&this._c(),this.fieldTransforms=i||[],this.fieldMask=a||[]}get path(){return this.settings.path}get oc(){return this.settings.oc}ac(t){return new Sl(Object.assign(Object.assign({},this.settings),t),this.databaseId,this.serializer,this.ignoreUndefinedProperties,this.fieldTransforms,this.fieldMask)}uc(t){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(t),s=this.ac({path:r,cc:!1});return s.lc(t),s}hc(t){var n;const r=(n=this.path)===null||n===void 0?void 0:n.child(t),s=this.ac({path:r,cc:!1});return s._c(),s}Pc(t){return this.ac({path:void 0,cc:!0})}Tc(t){return Da(t,this.settings.methodName,this.settings.Ic||!1,this.path,this.settings.Ec)}contains(t){return this.fieldMask.find(n=>t.isPrefixOf(n))!==void 0||this.fieldTransforms.find(n=>t.isPrefixOf(n.field))!==void 0}_c(){if(this.path)for(let t=0;t<this.path.length;t++)this.lc(this.path.get(t))}lc(t){if(t.length===0)throw this.Tc("Document fields must not be empty");if(Ip(this.oc)&&Zw.test(t))throw this.Tc('Document fields cannot begin and end with "__"')}}class tI{constructor(t,n,r){this.databaseId=t,this.ignoreUndefinedProperties=n,this.serializer=r||so(t)}dc(t,n,r,s=!1){return new Sl({oc:t,methodName:n,Ec:r,path:oe.emptyPath(),cc:!1,Ic:s},this.databaseId,this.serializer,this.ignoreUndefinedProperties)}}function eI(e){const t=e._freezeSettings(),n=so(e._databaseId);return new tI(e._databaseId,!!t.ignoreUndefinedProperties,n)}function nI(e,t,n,r=!1){return Cl(n,e.dc(r?4:3,t))}function Cl(e,t){if(Ap(e=Ai(e)))return sI("Unsupported field value:",t,e),rI(e,t);if(e instanceof wp)return function(r,s){if(!Ip(s.oc))throw s.Tc(`${r._methodName}() can only be used with update() and set()`);if(!s.path)throw s.Tc(`${r._methodName}() is not currently supported inside arrays`);const i=r._toFieldTransform(s);i&&s.fieldTransforms.push(i)}(e,t),null;if(e===void 0&&t.ignoreUndefinedProperties)return null;if(t.path&&t.fieldMask.push(t.path),e instanceof Array){if(t.settings.cc&&t.oc!==4)throw t.Tc("Nested arrays are not supported");return function(r,s){const i=[];let a=0;for(const l of r){let c=Cl(l,s.Pc(a));c==null&&(c={nullValue:"NULL_VALUE"}),i.push(c),a++}return{arrayValue:{values:i}}}(e,t)}return function(r,s){if((r=Ai(r))===null)return{nullValue:"NULL_VALUE"};if(typeof r=="number")return sT(s.serializer,r);if(typeof r=="boolean")return{booleanValue:r};if(typeof r=="string")return{stringValue:r};if(r instanceof Date){const i=Ht.fromDate(r);return{timestampValue:Ia(s.serializer,i)}}if(r instanceof Ht){const i=new Ht(r.seconds,1e3*Math.floor(r.nanoseconds/1e3));return{timestampValue:Ia(s.serializer,i)}}if(r instanceof Rl)return{geoPointValue:{latitude:r.latitude,longitude:r.longitude}};if(r instanceof Rr)return{bytesValue:Gd(s.serializer,r._byteString)};if(r instanceof rn){const i=s.databaseId,a=r.firestore._databaseId;if(!a.isEqual(i))throw s.Tc(`Document reference is for database ${a.projectId}/${a.database} but should be for database ${i.projectId}/${i.database}`);return{referenceValue:Wd(r.firestore._databaseId||s.databaseId,r._key.path)}}if(r instanceof bl)return function(a,l){return{mapValue:{fields:{[Ad]:{stringValue:Rd},[Pi]:{arrayValue:{values:a.toArray().map(f=>{if(typeof f!="number")throw l.Tc("VectorValues must only contain numeric values.");return ll(l.serializer,f)})}}}}}}(r,s);throw s.Tc(`Unsupported field value: ${oo(r)}`)}(e,t)}function rI(e,t){const n={};return yd(e)?t.path&&t.path.length>0&&t.fieldMask.push(t.path):Pr(e,(r,s)=>{const i=Cl(s,t.uc(r));i!=null&&(n[r]=i)}),{mapValue:{fields:n}}}function Ap(e){return!(typeof e!="object"||e===null||e instanceof Array||e instanceof Date||e instanceof Ht||e instanceof Rl||e instanceof Rr||e instanceof rn||e instanceof wp||e instanceof bl)}function sI(e,t,n){if(!Ap(n)||!function(s){return typeof s=="object"&&s!==null&&(Object.getPrototypeOf(s)===Object.prototype||Object.getPrototypeOf(s)===null)}(n)){const r=oo(n);throw r==="an object"?t.Tc(e+" a custom object"):t.Tc(e+" "+r)}}const iI=new RegExp("[~\\*/\\[\\]]");function oI(e,t,n){if(t.search(iI)>=0)throw Da(`Invalid field path (${t}). Paths must not contain '~', '*', '/', '[', or ']'`,e,!1,void 0,n);try{return new Tp(...t.split("."))._internalPath}catch{throw Da(`Invalid field path (${t}). Paths must not be empty, begin with '.', end with '.', or contain '..'`,e,!1,void 0,n)}}function Da(e,t,n,r,s){const i=r&&!r.isEmpty(),a=s!==void 0;let l=`Function ${t}() called with invalid data`;n&&(l+=" (via `toFirestore()`)"),l+=". ";let c="";return(i||a)&&(c+=" (found",i&&(c+=` in field ${r}`),a&&(c+=` in document ${s}`),c+=")"),new Z(B.INVALID_ARGUMENT,l+e+c)}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class Rp{constructor(t,n,r,s,i){this._firestore=t,this._userDataWriter=n,this._key=r,this._document=s,this._converter=i}get id(){return this._key.path.lastSegment()}get ref(){return new rn(this._firestore,this._converter,this._key)}exists(){return this._document!==null}data(){if(this._document){if(this._converter){const t=new aI(this._firestore,this._userDataWriter,this._key,this._document,null);return this._converter.fromFirestore(t)}return this._userDataWriter.convertValue(this._document.data.value)}}get(t){if(this._document){const n=this._document.data.field(Pl("DocumentSnapshot.get",t));if(n!==null)return this._userDataWriter.convertValue(n)}}}class aI extends Rp{data(){return super.data()}}function Pl(e,t){return typeof t=="string"?oI(e,t):t instanceof Tp?t._internalPath:t._delegate._internalPath}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function lI(e){if(e.limitType==="L"&&e.explicitOrderBy.length===0)throw new Z(B.UNIMPLEMENTED,"limitToLast() queries require specifying at least one orderBy() clause")}class Vl{}class uI extends Vl{}function cI(e,t,...n){let r=[];t instanceof Vl&&r.push(t),r=r.concat(n),function(i){const a=i.filter(c=>c instanceof Dl).length,l=i.filter(c=>c instanceof ao).length;if(a>1||a>0&&l>0)throw new Z(B.INVALID_ARGUMENT,"InvalidQuery. When using composite filters, you cannot use more than one filter at the top level. Consider nesting the multiple filters within an `and(...)` statement. For example: change `query(query, where(...), or(...))` to `query(query, and(where(...), or(...)))`.")}(r);for(const s of r)e=s._apply(e);return e}class ao extends uI{constructor(t,n,r){super(),this._field=t,this._op=n,this._value=r,this.type="where"}static _create(t,n,r){return new ao(t,n,r)}_apply(t){const n=this._parse(t);return bp(t._query,n),new Dr(t.firestore,t.converter,ya(t._query,n))}_parse(t){const n=eI(t.firestore);return function(i,a,l,c,f,d,p){let m;if(f.isKeyField()){if(d==="array-contains"||d==="array-contains-any")throw new Z(B.INVALID_ARGUMENT,`Invalid Query. You can't perform '${d}' queries on documentId().`);if(d==="in"||d==="not-in"){bh(p,d);const V=[];for(const N of p)V.push(Rh(c,i,N));m={arrayValue:{values:V}}}else m=Rh(c,i,p)}else d!=="in"&&d!=="not-in"&&d!=="array-contains-any"||bh(p,d),m=nI(l,a,p,d==="in"||d==="not-in");return Ut.create(f,d,m)}(t._query,"where",n,t.firestore._databaseId,this._field,this._op,this._value)}}function hI(e,t,n){const r=t,s=Pl("where",e);return ao._create(s,r,n)}class Dl extends Vl{constructor(t,n){super(),this.type=t,this._queryConstraints=n}static _create(t,n){return new Dl(t,n)}_parse(t){const n=this._queryConstraints.map(r=>r._parse(t)).filter(r=>r.getFilters().length>0);return n.length===1?n[0]:Oe.create(n,this._getOperator())}_apply(t){const n=this._parse(t);return n.getFilters().length===0?t:(function(s,i){let a=s;const l=i.getFlattenedFilters();for(const c of l)bp(a,c),a=ya(a,c)}(t._query,n),new Dr(t.firestore,t.converter,ya(t._query,n)))}_getQueryConstraints(){return this._queryConstraints}_getOperator(){return this.type==="and"?"and":"or"}}function Rh(e,t,n){if(typeof(n=Ai(n))=="string"){if(n==="")throw new Z(B.INVALID_ARGUMENT,"Invalid query. When querying with documentId(), you must provide a valid document ID, but it was an empty string.");if(!Nd(t)&&n.indexOf("/")!==-1)throw new Z(B.INVALID_ARGUMENT,`Invalid query. When querying a collection by documentId(), you must provide a plain document ID, but '${n}' contains a '/' character.`);const r=t.path.child(xt.fromString(n));if(!rt.isDocumentKey(r))throw new Z(B.INVALID_ARGUMENT,`Invalid query. When querying a collection group by documentId(), the value provided must result in a valid document path, but '${r}' is not because it has an odd number of segments (${r.length}).`);return Bc(e,new rt(r))}if(n instanceof rn)return Bc(e,n._key);throw new Z(B.INVALID_ARGUMENT,`Invalid query. When querying with documentId(), you must provide a valid string or a DocumentReference, but it was: ${oo(n)}.`)}function bh(e,t){if(!Array.isArray(e)||e.length===0)throw new Z(B.INVALID_ARGUMENT,`Invalid Query. A non-empty array is required for '${t.toString()}' filters.`)}function bp(e,t){const n=function(s,i){for(const a of s)for(const l of a.getFlattenedFilters())if(i.indexOf(l.op)>=0)return l.op;return null}(e.filters,function(s){switch(s){case"!=":return["!=","not-in"];case"array-contains-any":case"in":return["not-in"];case"not-in":return["array-contains-any","in","not-in","!="];default:return[]}}(t.op));if(n!==null)throw n===t.op?new Z(B.INVALID_ARGUMENT,`Invalid query. You cannot use more than one '${t.op.toString()}' filter.`):new Z(B.INVALID_ARGUMENT,`Invalid query. You cannot use '${t.op.toString()}' filters with '${n.toString()}' filters.`)}class fI{convertValue(t,n="none"){switch(Rn(t)){case 0:return null;case 1:return t.booleanValue;case 2:return Mt(t.integerValue||t.doubleValue);case 3:return this.convertTimestamp(t.timestampValue);case 4:return this.convertServerTimestamp(t,n);case 5:return t.stringValue;case 6:return this.convertBytes(An(t.bytesValue));case 7:return this.convertReference(t.referenceValue);case 8:return this.convertGeoPoint(t.geoPointValue);case 9:return this.convertArray(t.arrayValue,n);case 11:return this.convertObject(t.mapValue,n);case 10:return this.convertVectorValue(t.mapValue);default:throw ot(62114,{value:t})}}convertObject(t,n){return this.convertObjectMap(t.fields,n)}convertObjectMap(t,n="none"){const r={};return Pr(t,(s,i)=>{r[s]=this.convertValue(i,n)}),r}convertVectorValue(t){var n,r,s;const i=(s=(r=(n=t.fields)===null||n===void 0?void 0:n[Pi].arrayValue)===null||r===void 0?void 0:r.values)===null||s===void 0?void 0:s.map(a=>Mt(a.doubleValue));return new bl(i)}convertGeoPoint(t){return new Rl(Mt(t.latitude),Mt(t.longitude))}convertArray(t,n){return(t.values||[]).map(r=>this.convertValue(r,n))}convertServerTimestamp(t,n){switch(n){case"previous":const r=Ji(t);return r==null?null:this.convertValue(r,n);case"estimate":return this.convertTimestamp(Is(t));default:return null}}convertTimestamp(t){const n=In(t);return new Ht(n.seconds,n.nanos)}convertDocumentKey(t,n){const r=xt.fromString(t);Nt(tp(r),9688,{name:t});const s=new As(r.get(1),r.get(3)),i=new rt(r.popFirst(5));return s.isEqual(n)||en(`Document ${i} contains a document reference within a different database (${s.projectId}/${s.database}) which is not supported. It will be treated as a reference in the current database (${n.projectId}/${n.database}) instead.`),i}}/**
 * @license
 * Copyright 2020 Google LLC
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 *   http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */class ri{constructor(t,n){this.hasPendingWrites=t,this.fromCache=n}isEqual(t){return this.hasPendingWrites===t.hasPendingWrites&&this.fromCache===t.fromCache}}class dI extends Rp{constructor(t,n,r,s,i,a){super(t,n,r,s,a),this._firestore=t,this._firestoreImpl=t,this.metadata=i}exists(){return super.exists()}data(t={}){if(this._document){if(this._converter){const n=new pi(this._firestore,this._userDataWriter,this._key,this._document,this.metadata,null);return this._converter.fromFirestore(n,t)}return this._userDataWriter.convertValue(this._document.data.value,t.serverTimestamps)}}get(t,n={}){if(this._document){const r=this._document.data.field(Pl("DocumentSnapshot.get",t));if(r!==null)return this._userDataWriter.convertValue(r,n.serverTimestamps)}}}class pi extends dI{data(t={}){return super.data(t)}}class pI{constructor(t,n,r,s){this._firestore=t,this._userDataWriter=n,this._snapshot=s,this.metadata=new ri(s.hasPendingWrites,s.fromCache),this.query=r}get docs(){const t=[];return this.forEach(n=>t.push(n)),t}get size(){return this._snapshot.docs.size}get empty(){return this.size===0}forEach(t,n){this._snapshot.docs.forEach(r=>{t.call(n,new pi(this._firestore,this._userDataWriter,r.key,r,new ri(this._snapshot.mutatedKeys.has(r.key),this._snapshot.fromCache),this.query.converter))})}docChanges(t={}){const n=!!t.includeMetadataChanges;if(n&&this._snapshot.excludesMetadataChanges)throw new Z(B.INVALID_ARGUMENT,"To include metadata changes with your document changes, you must also pass { includeMetadataChanges:true } to onSnapshot().");return this._cachedChanges&&this._cachedChangesIncludeMetadataChanges===n||(this._cachedChanges=function(s,i){if(s._snapshot.oldDocs.isEmpty()){let a=0;return s._snapshot.docChanges.map(l=>{const c=new pi(s._firestore,s._userDataWriter,l.doc.key,l.doc,new ri(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);return l.doc,{type:"added",doc:c,oldIndex:-1,newIndex:a++}})}{let a=s._snapshot.oldDocs;return s._snapshot.docChanges.filter(l=>i||l.type!==3).map(l=>{const c=new pi(s._firestore,s._userDataWriter,l.doc.key,l.doc,new ri(s._snapshot.mutatedKeys.has(l.doc.key),s._snapshot.fromCache),s.query.converter);let f=-1,d=-1;return l.type!==0&&(f=a.indexOf(l.doc.key),a=a.delete(l.doc.key)),l.type!==1&&(a=a.add(l.doc),d=a.indexOf(l.doc.key)),{type:gI(l.type),doc:c,oldIndex:f,newIndex:d}})}}(this,n),this._cachedChangesIncludeMetadataChanges=n),this._cachedChanges}}function gI(e){switch(e){case 0:return"added";case 2:case 3:return"modified";case 1:return"removed";default:return ot(61501,{type:e})}}class mI extends fI{constructor(t){super(),this.firestore=t}convertBytes(t){return new Rr(t)}convertReference(t){const n=this.convertDocumentKey(t,this.firestore._databaseId);return new rn(this.firestore,null,n)}}function Sp(e){e=Va(e,Dr);const t=Va(e.firestore,Ep),n=Xw(t),r=new mI(t);return lI(e._query),Gw(n,e._query).then(s=>new pI(t,r,e,s))}(function(t,n=!0){(function(s){Sr=s})(tE),bi(new Es("firestore",(r,{instanceIdentifier:s,options:i})=>{const a=r.getProvider("app").getImmediate(),l=new Ep(new mE(r.getProvider("auth-internal")),new vE(a,r.getProvider("app-check-internal")),function(f,d){if(!Object.prototype.hasOwnProperty.apply(f.options,["projectId"]))throw new Z(B.INVALID_ARGUMENT,'"projectId" not provided in firebase.initializeApp.');return new As(f.options.projectId,d)}(a,s),a);return i=Object.assign({useFetchStreams:n},i),l._setSettings(i),l},"PUBLIC").setMultipleInstances(!0)),hr(Cc,Pc,t),hr(Cc,Pc,"esm2017")})();const _I={apiKey:"AIzaSyABEOjef42rtTIbke3Qd7pak6dWaHykxHs",authDomain:"arstore-4785a.firebaseapp.com",projectId:"arstore-4785a",storageBucket:"arstore-4785a.firebasestorage.app",messagingSenderId:"1044400686921",appId:"1:1044400686921:web:3ad534a6f2f6ca1c6ffc98"};id(_I);const Cp=Yw(),yI={class:"products"},vI=["src","alt"],EI={class:"products-description"},TI=Gn({__name:"Product",setup(e){const t=qi([]);Ga(async()=>{const r=await Sp(vp(Cp,"products"));t.value=r.docs.map(s=>({id:s.id,...s.data()}))});function n(r){return`/ar-store/images/${r}.png`}return(r,s)=>{const i=ff("router-link");return qe(),Tn("main",yI,[(qe(!0),Tn(Pe,null,nm(t.value,a=>(qe(),xf(i,{class:"product-item",to:`/products/${a.slug}`,key:a.id},{default:es(()=>[fe("img",{class:"product-image",src:n(a.slug),alt:a.name},null,8,vI),fe("div",EI,[fe("h3",null,Un(a.name),1),fe("h4",null,Un(a.price),1)])]),_:2},1032,["to"]))),128))])}}}),wI=Gn({__name:"ProductsView",setup(e){return(t,n)=>(qe(),Tn(Pe,null,[qt(Yf),qt(TI)],64))}}),II={};function AI(e,t){return qe(),Tn("main",null,t[0]||(t[0]=[fe("h1",null,"Hello World! From About Us",-1)]))}const RI=Cs(II,[["render",AI]]),bI={key:0,class:"product"},SI=["src"],CI={class:"product-description"},PI={key:1},VI=Gn({__name:"ProductDetails",setup(e){const t=Iy(),n=qi(null);Ga(async()=>{const s=t.params.slug,i=cI(vp(Cp,"products"),hI("slug","==",s)),a=await Sp(i);if(a.empty)console.warn("No product found with slug:",s);else{const l=a.docs[0];n.value={id:l.id,...l.data()}}});const r=s=>`../models/${s}.glb`;return(s,i)=>n.value?(qe(),Tn("div",bI,[fe("model-viewer",{src:r(n.value.slug),ar:"","ar-modes":"scene-viewer webxr quick-look","camera-controls":"","auto-rotate":"",alt:"A 3D model of a car",class:"product-image"},null,8,SI),fe("div",CI,[fe("h1",null,Un(n.value.name),1),fe("h3",null,Un(n.value.color),1),fe("h3",null,Un(n.value.price),1),fe("p",null,Un(n.value.description),1)])])):(qe(),Tn("div",PI,i[0]||(i[0]=[fe("p",null,"Loading or not found...",-1)])))}}),DI=Cs(VI,[["__scopeId","data-v-7d3ad0ed"]]),xI=Ty({history:X_("/ar-store/"),routes:[{path:"/",name:"home",component:Py},{path:"/products",name:"products",component:wI},{path:"/products/:slug",name:"product-detail",component:DI},{path:"/about-us",name:"about-us",component:RI}]}),xl=d_(E_);xl.use(__());xl.use(xI);xl.mount("#app");
